# Session 2026-01-22 Part 2: Advanced BOQ Classification Features

## –î–∞—Ç–∞: 2026-01-22 (–≤–µ—á–µ—Ä)
## –í–µ—Ç–∫–∞: `claude/review-session-notes-4I53w`

---

## üìã –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ß–µ—Ç—ã—Ä–µ –∫–ª—é—á–µ–≤—ã—Ö —É–ª—É—á—à–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ BOQ –ø–æ–∑–∏—Ü–∏–π:

1. ‚úÖ **–£–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –±–µ—Ç–æ–Ω–Ω—ã–µ –≥—Ä—É–ø–ø—ã** - —Ç–æ–ª—å–∫–æ –º–æ–Ω–æ–ª–∏—Ç –∏ –ø—Ä–µ—Ñ–∞–±—Ä–∏–∫–∞—Ç
2. ‚úÖ **–†—É—á–Ω–æ–π –≤–≤–æ–¥ –≥—Ä—É–ø–ø** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Å autocomplete
3. ‚úÖ **–ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –ø–æ–∑–∏—Ü–∏–π** - –∞–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã –ø–æ—Ö–æ–∂–∏–º —ç–ª–µ–º–µ–Ω—Ç–∞–º
4. ‚úÖ **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ** - —Å–∫–ª–∞–¥—ã–≤–∞–Ω–∏–µ/—Ä–∞—Å–∫—Ä—ã—Ç–∏–µ –ø–æ –≥—Ä—É–ø–ø–∞–º

---

## üéØ –ó–∞–¥–∞—á–∞ 1: –£–ø—Ä–æ—â–µ–Ω–∏–µ –±–µ—Ç–æ–Ω–Ω—ã—Ö –≥—Ä—É–ø–ø

### –ü—Ä–æ–±–ª–µ–º–∞
–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –±–µ—Ç–æ–Ω–Ω—ã—Ö –≥—Ä—É–ø–ø:
- Beton - z√°klady
- Beton - spodn√≠ stavba
- Beton - nosn√° konstrukce
- Beton - mostovka
- Beton - ostatn√≠

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—Ç–µ–ª **—Ç–æ–ª—å–∫–æ 2 —Ç–∏–ø–∞**: –º–æ–Ω–æ–ª–∏—Ç –∏ –ø—Ä–µ—Ñ–∞–±—Ä–∏–∫–∞—Ç.

### –†–µ—à–µ–Ω–∏–µ

#### –§–∞–π–ª: `src/utils/constants.ts`

**–î–æ:**
```typescript
// Betonov√© pr√°ce
'Beton - monolitick√Ω',
'Beton - prefabrik√°t',
'Beton - z√°klady',        // ‚ùå –£–î–ê–õ–ï–ù–û
'Beton - spodn√≠ stavba',  // ‚ùå –£–î–ê–õ–ï–ù–û
'Beton - nosn√° konstrukce', // ‚ùå –£–î–ê–õ–ï–ù–û
'Beton - mostovka',       // ‚ùå –£–î–ê–õ–ï–ù–û
'Beton - ostatn√≠',        // ‚ùå –£–î–ê–õ–ï–ù–û
```

**–ü–æ—Å–ª–µ:**
```typescript
// Betonov√© pr√°ce
'Beton - monolitick√Ω',    // ‚úÖ –¢–û–õ–¨–ö–û 2 –¢–ò–ü–ê
'Beton - prefabrik√°t',
```

#### –§–∞–π–ª: `src/services/classification/classificationRules.ts`

**–£–¥–∞–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è:**
- Beton - mostovka (mostovka, deska mostu)
- Beton - nosn√° konstrukce (nosn√≠k, sloup, pil√≠≈ô)
- Beton - spodn√≠ stavba (opora, patka)
- Beton - z√°klady (z√°kladov√Ω beton)
- Beton - ostatn√≠ (–æ–±—â–∏–π beton)

**–î–æ–±–∞–≤–ª–µ–Ω–æ fallback –ø—Ä–∞–≤–∏–ª–æ:**
```typescript
// ‚≠ê –ï—Å–ª–∏ –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–æ –∫–∞–∫ –º–æ–Ω–æ–ª–∏—Ç/–ø—Ä–µ—Ñ–∞–±—Ä–∏–∫–∞—Ç - –æ–±—â–∏–π –±–µ—Ç–æ–Ω (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
{
  skupina: 'Beton - monolitick√Ω',
  patterns: [
    /beton/i,
    /betono/i,
    /\bC\d{2}\/\d{2}/i, // C20/25, C30/37
  ],
  priority: 30, // –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç - —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–¥–æ—à–ª–æ
  keywords: ['beton', 'C20/25'],
}
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç
- üü¢ –í—Å–µ –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–µ —Ä–∞–±–æ—Ç—ã ‚Üí **"Beton - monolitick√Ω"**
- üîµ –í—Å–µ –ø—Ä–µ—Ñ–∞–±—Ä–∏–∫–∞—Ç–Ω—ã–µ —Ä–∞–±–æ—Ç—ã ‚Üí **"Beton - prefabrik√°t"**
- ‚ö™ –û–±—â–∏–π "beton" (–µ—Å–ª–∏ –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–æ) ‚Üí **"Beton - monolitick√Ω"** (fallback)

---

## üéØ –ó–∞–¥–∞—á–∞ 2: –†—É—á–Ω–æ–π –≤–≤–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏—è –≥—Ä—É–ø–ø—ã

### –ü—Ä–æ–±–ª–µ–º–∞
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–≥ —Ç–æ–ª—å–∫–æ **–≤—ã–±–∏—Ä–∞—Ç—å** –∏–∑ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –≥—Ä—É–ø–ø
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –±—ã–ª–æ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ—é –≥—Ä—É–ø–ø—É —Ç–∏–ø–∞ "–ú–æ–∏ –æ–ø–æ—Ä—ã" –∏–ª–∏ "–§—É–Ω–¥–∞–º–µ–Ω—Ç 1 —Ñ–∞–∑–∞"

### –†–µ—à–µ–Ω–∏–µ

#### –§–∞–π–ª: `src/components/items/ItemsTable.tsx`

**–î–æ (select):**
```tsx
<select
  value={currentSkupina || ''}
  onChange={(e) => setItemSkupina(projectId, item.id, e.target.value)}
>
  <option value="">-- Vyberte skupinu --</option>
  {allGroups.map((group) => (
    <option key={group} value={group}>{group}</option>
  ))}
</select>
```

**–ü–æ—Å–ª–µ (input + datalist):**
```tsx
<div className="flex items-center gap-1">
  <div className="relative flex-1">
    <input
      type="text"
      list={datalistId}
      value={currentSkupina || ''}
      onChange={(e) => handleSkupinaChange(e.target.value)}
      onBlur={(e) => handleSkupinaChange(e.target.value)}
      placeholder="Zadejte nebo vyberte"
      className="..."
    />
    <datalist id={datalistId}>
      {allGroups.map((group) => (
        <option key={group} value={group} />
      ))}
    </datalist>
  </div>
  {/* ‚ú® –ö–Ω–æ–ø–∫–∞ –¥–ª—è –ø–æ—Ö–æ–∂–∏—Ö –ø–æ–∑–∏—Ü–∏–π */}
</div>
```

**–õ–æ–≥–∏–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π –≥—Ä—É–ø–ø—ã:**
```typescript
const handleSkupinaChange = (value: string) => {
  const trimmedValue = value.trim();
  if (!trimmedValue) {
    setItemSkupina(projectId, item.id, null!);
    return;
  }

  // ‚≠ê –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é –≥—Ä—É–ø–ø—É –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç –≤ —Å–ø–∏—Å–∫–µ
  if (!allGroups.includes(trimmedValue)) {
    addCustomGroup(trimmedValue);
  }

  setItemSkupina(projectId, item.id, trimmedValue);
};
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç **–Ω–∞–±—Ä–∞—Ç—å** –ª—é–±–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã
- ‚úÖ Autocomplete –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≥—Ä—É–ø–ø—ã
- ‚úÖ –ù–æ–≤—ã–µ –≥—Ä—É–ø–ø—ã **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è** –≤ store
- ‚úÖ –ì—Ä—É–ø–ø—ã **–ø–µ—Ä—Å–∏—Å—Ç–∏—Ä—É—é—Ç—Å—è** –≤ localStorage (Zustand)

---

## üéØ –ó–∞–¥–∞—á–∞ 3: –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –ø–æ–∑–∏—Ü–∏–π –¥–ª—è –∞–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞
–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –≥—Ä—É–ø–ø—É **"–ú–æ–∏ –æ–ø–æ—Ä—ã"** –æ–¥–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏, –µ–º—É –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –≤—Ä—É—á–Ω—É—é –∏—Å–∫–∞—Ç—å –≤—Å–µ –ø–æ—Ö–æ–∂–∏–µ –ø–æ–∑–∏—Ü–∏–∏ (–æ–ø–æ—Ä—ã) –∏ –Ω–∞–∑–Ω–∞—á–∞—Ç—å —Ç—É –∂–µ –≥—Ä—É–ø–ø—É.

### –†–µ—à–µ–Ω–∏–µ

#### –ù–æ–≤—ã–π —Ñ–∞–π–ª: `src/services/similarity/similarityService.ts` (175 —Å—Ç—Ä–æ–∫)

**–§—É–Ω–∫—Ü–∏—è 1: findSimilarItems()**
```typescript
/**
 * –ù–∞—Ö–æ–¥–∏—Ç –ø–æ—Ö–æ–∂–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é
 */
export function findSimilarItems(
  targetItem: ParsedItem,
  allItems: ParsedItem[],
  options: SimilarityOptions = {}
): SimilarItem[]
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **Fuse.js** –¥–ª—è fuzzy matching
- –ò—â–µ—Ç –ø–æ —Ç—Ä–µ–º –ø–æ–ª—è–º:
  - `popis` (–≤–µ—Å 50%)
  - `popisFull` (–≤–µ—Å 30%)
  - `kod` (–≤–µ—Å 20%)
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ø-10 –ø–æ—Ö–æ–∂–∏—Ö –ø–æ–∑–∏—Ü–∏–π —Å score (0-1)

**–§—É–Ω–∫—Ü–∏—è 2: autoAssignSimilarItems()**
```typescript
/**
 * –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –≥—Ä—É–ø–ø—ã –ø–æ—Ö–æ–∂–∏–º –ø–æ–∑–∏—Ü–∏—è–º
 */
export function autoAssignSimilarItems(
  sourceItem: ParsedItem, // –ü–æ–∑–∏—Ü–∏—è, –∫–æ—Ç–æ—Ä–æ–π –Ω–∞–∑–Ω–∞—á–∏–ª–∏ –≥—Ä—É–ø–ø—É
  allItems: ParsedItem[],
  minConfidence: number = 70 // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å
): Array<{itemId, suggestedSkupina, confidence}>
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ—Ö–æ–∂–∏–µ –Ω–∞ `sourceItem`
- –§–∏–ª—å—Ç—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ **–Ω–µ–∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ** –ø–æ–∑–∏—Ü–∏–∏
- –í—ã—á–∏—Å–ª—è–µ—Ç confidence: `(1 - score) * 100`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ, —É –∫–æ—Ç–æ—Ä—ã—Ö confidence >= 70%

**–§—É–Ω–∫—Ü–∏—è 3: suggestSkupinaFromSimilar()**
```typescript
/**
 * –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –≥—Ä—É–ø–ø—É –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ—Ö–æ–∂–∏—Ö –ø–æ–∑–∏—Ü–∏–π
 */
export function suggestSkupinaFromSimilar(
  targetItem: ParsedItem,
  allItems: ParsedItem[],
  options: SimilarityOptions = {}
): {
  suggestedSkupina: string | null;
  confidence: number;
  similarCount: number;
  topSimilar: SimilarItem[];
}
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ù–∞—Ö–æ–¥–∏—Ç –ø–æ—Ö–æ–∂–∏–µ **–∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ** –ø–æ–∑–∏—Ü–∏–∏
- –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç —á–∞—Å—Ç–æ—Ç—É –≥—Ä—É–ø–ø
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç—É—é –≥—Ä—É–ø–ø—É
- Confidence = (—á–∞—Å—Ç–æ—Ç–∞ / –≤—Å–µ–≥–æ) √ó —Å—Ä–µ–¥–Ω–∏–π score

#### UI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: –ö–Ω–æ–ø–∫–∞ Sparkles ‚ú®

```tsx
{currentSkupina && (
  <button
    onClick={() => applyToSimilar(item)}
    disabled={isApplying}
    title="–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫ –ø–æ—Ö–æ–∂–∏–º –ø–æ–∑–∏—Ü–∏—è–º"
    className="p-1 rounded hover:bg-bg-secondary"
  >
    <Sparkles size={16} className="text-accent-primary" />
  </button>
)}
```

**–§—É–Ω–∫—Ü–∏—è applyToSimilar():**
```typescript
const applyToSimilar = (sourceItem: ParsedItem) => {
  if (!sourceItem.skupina) return;

  // –ù–∞—Ö–æ–¥–∏–º –ø–æ—Ö–æ–∂–∏–µ –ø–æ–∑–∏—Ü–∏–∏
  const suggestions = autoAssignSimilarItems(sourceItem, items, 70);

  if (suggestions.length > 0) {
    // –ü—Ä–∏–º–µ–Ω—è–µ–º –≥—Ä—É–ø–ø—É –∫–æ –≤—Å–µ–º –ø–æ—Ö–æ–∂–∏–º
    const updates = suggestions.map((s) => ({
      itemId: s.itemId,
      skupina: s.suggestedSkupina,
    }));

    bulkSetSkupina(projectId, updates);

    // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    alert(`–ì—Ä—É–ø–ø–∞ "${sourceItem.skupina}" –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –∫ ${suggestions.length} –ø–æ—Ö–æ–∂–∏–º –ø–æ–∑–∏—Ü–∏—è–º`);
  }
};
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç

**User Flow:**
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –≥—Ä—É–ø–ø—É "–ú–æ–∏ –æ–ø–æ—Ä—ã" –ø–æ–∑–∏—Ü–∏–∏ "–û–ø–æ—Ä–∞ 1"
2. –ö–ª–∏–∫–∞–µ—Ç –∫–Ω–æ–ø–∫—É ‚ú® —Ä—è–¥–æ–º —Å –≥—Ä—É–ø–ø–æ–π
3. –°–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç 5 –ø–æ—Ö–æ–∂–∏—Ö –ø–æ–∑–∏—Ü–∏–π:
   - "–û–ø–æ—Ä–∞ 2" (confidence 95%)
   - "–û–ø–æ—Ä–∞ –º–æ–Ω–æ–ª–∏—Ç–Ω–∞—è" (confidence 88%)
   - "–û–ø–æ—Ä–Ω–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è" (confidence 72%)
   - ... (–µ—â–µ 2)
4. –í—Å–µ 5 –ø–æ–∑–∏—Ü–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –≥—Ä—É–ø–ø—É "–ú–æ–∏ –æ–ø–æ—Ä—ã"
5. Alert: "–ì—Ä—É–ø–ø–∞ '–ú–æ–∏ –æ–ø–æ—Ä—ã' –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –∫ 5 –ø–æ—Ö–æ–∂–∏–º –ø–æ–∑–∏—Ü–∏—è–º"
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚ö° **–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏** - –Ω–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –∏—Å–∫–∞—Ç—å –∫–∞–∂–¥—É—é –ø–æ—Ö–æ–∂—É—é –ø–æ–∑–∏—Ü–∏—é
- üéØ **–¢–æ—á–Ω–æ—Å—Ç—å** - fuzzy matching –Ω–∞—Ö–æ–¥–∏—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å –æ–ø–µ—á–∞—Ç–∫–∞–º–∏
- üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - —Ç–æ–ª—å–∫–æ confidence >= 70% (–ø–æ—Ä–æ–≥ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å)

---

## üéØ –ó–∞–¥–∞—á–∞ 4: –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ

### –ü—Ä–æ–±–ª–µ–º–∞
–ö–æ–≥–¥–∞ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 200+ –ø–æ–∑–∏—Ü–∏–π —Å 10+ –≥—Ä—É–ø–ø–∞–º–∏, —Å–ª–æ–∂–Ω–æ –≤–∏–¥–µ—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É. –ù—É–∂–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å **—Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å** –ø–æ –≥—Ä—É–ø–ø–∞–º –∏ –≤–∏–¥–µ—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –≥—Ä—É–ø–ø.

### –†–µ—à–µ–Ω–∏–µ

#### –§–∞–π–ª: `src/components/items/ItemsTable.tsx`

**–î–æ–±–∞–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã:**
```typescript
import {
  getGroupedRowModel,
  getExpandedRowModel,
  type GroupingState,
  type ExpandedState,
} from '@tanstack/react-table';
import { FolderOpen, Folder } from 'lucide-react';
```

**–î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
```typescript
const [grouping, setGrouping] = useState<GroupingState>([]);
const [expanded, setExpanded] = useState<ExpandedState>({});
const [groupBySkupina, setGroupBySkupina] = useState(false);
```

**–§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏:**
```typescript
const toggleGrouping = () => {
  if (groupBySkupina) {
    setGrouping([]);
    setGroupBySkupina(false);
  } else {
    setGrouping(['skupina']); // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ –ø–æ–ª—é 'skupina'
    setGroupBySkupina(true);
  }
};
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã:**
```typescript
const table = useReactTable({
  data: items,
  columns,
  state: {
    sorting,
    grouping,      // ‚≠ê –ù–û–í–û–ï
    expanded,      // ‚≠ê –ù–û–í–û–ï
    rowSelection,
  },
  onGroupingChange: setGrouping,
  onExpandedChange: setExpanded,
  getGroupedRowModel: getGroupedRowModel(),   // ‚≠ê –ù–û–í–û–ï
  getExpandedRowModel: getExpandedRowModel(), // ‚≠ê –ù–û–í–û–ï
  // ... –æ—Å—Ç–∞–ª—å–Ω–æ–µ
});
```

**UI: –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏**
```tsx
<div className="border-b border-border-color px-4 py-2 flex items-center gap-2">
  <button
    onClick={toggleGrouping}
    className={`px-3 py-1 text-sm rounded flex items-center gap-2 ${
      groupBySkupina
        ? 'bg-accent-primary text-white'
        : 'bg-bg-secondary hover:bg-bg-tertiary'
    }`}
  >
    {groupBySkupina ? <FolderOpen size={16} /> : <Folder size={16} />}
    {groupBySkupina ? 'Skupiny zapnuty' : 'Seskupit podle skupiny'}
  </button>
</div>
```

**–†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫:**
```tsx
<tbody>
  {table.getRowModel().rows.map((row) => {
    if (row.getIsGrouped()) {
      // ‚≠ê –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ (–∑–∞–≥–æ–ª–æ–≤–æ–∫ –≥—Ä—É–ø–ø—ã)
      return (
        <tr key={row.id} className="bg-bg-secondary font-medium">
          <td colSpan={row.getVisibleCells().length}>
            <button
              onClick={row.getToggleExpandedHandler()}
              className="flex items-center gap-2 px-2 py-1 w-full text-left"
            >
              {row.getIsExpanded() ? (
                <ChevronDown size={16} />
              ) : (
                <ChevronUp size={16} />
              )}
              <span className="text-accent-primary">
                {row.groupingValue || '(Bez skupiny)'}
              </span>
              <span className="text-text-secondary text-sm">
                ({row.subRows.length} polo≈æek)
              </span>
            </button>
          </td>
        </tr>
      );
    }

    // –û–±—ã—á–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ (—ç–ª–µ–º–µ–Ω—Ç –≥—Ä—É–ø–ø—ã)
    return <tr key={row.id}>...</tr>;
  })}
</tbody>
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç

**–í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ [Folder] Seskupit podle skupiny                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ K√≥d    ‚îÇ Popis             ‚îÇ MJ  ‚îÇ Mno≈æstv√≠ ‚îÇ Skupina ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –û–±—ã—á–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞...                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü–æ—Å–ª–µ –∫–ª–∏–∫–∞ –Ω–∞ –∫–Ω–æ–ø–∫—É:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ [FolderOpen] Skupiny zapnuty                           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚ñº Beton - monolitick√Ω (15 polo≈æek)                     ‚îÇ
‚îÇ   231112  ‚îÇ Beton√°≈æ z√°klad≈Ø    ‚îÇ m¬≥  ‚îÇ 25.5  ‚îÇ ... ‚îÇ
‚îÇ   231115  ‚îÇ Betonov√°n√≠ sloup≈Ø  ‚îÇ m¬≥  ‚îÇ 12.3  ‚îÇ ... ‚îÇ
‚îÇ   ...                                                  ‚îÇ
‚îÇ                                                        ‚îÇ
‚îÇ ‚ñ≤ Beton - prefabrik√°t (8 polo≈æek)                      ‚îÇ
‚îÇ                                                        ‚îÇ
‚îÇ ‚ñº V√Ωztu≈æ (23 polo≈æek)                                  ‚îÇ
‚îÇ   ...                                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ **–°–∫–ª–∞–¥—ã–≤–∞–Ω–∏–µ/—Ä–∞—Å–∫—Ä—ã—Ç–∏–µ** –≥—Ä—É–ø–ø –ø–æ –∫–ª–∏–∫—É
- ‚úÖ **–°—á–µ—Ç—á–∏–∫ –ø–æ–∑–∏—Ü–∏–π** –≤ –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø–µ
- ‚úÖ **–í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è** - —Å—Ç—Ä–µ–ª–∫–∏ –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑
- ‚úÖ **–¶–≤–µ—Ç–æ–≤–∞—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞** - —Å–µ—Ä—ã–π —Ñ–æ–Ω –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –≥—Ä—É–ø–ø
- ‚úÖ **–ù–µ–∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ** –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ "(Bez skupiny)"

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

| –§–∞–π–ª | –°—Ç—Ä–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω–æ | –°—Ç—Ä–æ–∫ —É–¥–∞–ª–µ–Ω–æ | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|------|----------------|---------------|-----------|
| `src/utils/constants.ts` | +0 | -5 | –£–¥–∞–ª–µ–Ω—ã –ª–∏—à–Ω–∏–µ –≥—Ä—É–ø–ø—ã |
| `src/services/classification/classificationRules.ts` | +15 | -53 | –£–ø—Ä–æ—â–µ–Ω—ã –ø—Ä–∞–≤–∏–ª–∞ |
| `src/components/items/ItemsTable.tsx` | +148 | -21 | –†—É—á–Ω–æ–π –≤–≤–æ–¥ + –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ |
| `src/services/similarity/similarityService.ts` | +175 | -0 | **–ù–û–í–´–ô –§–ê–ô–õ** |
| **–ò–¢–û–ì–û** | **+338** | **-79** | **4 —Ñ–∞–π–ª–∞** |

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –†—É—á–Ω–æ–π –≤–≤–æ–¥ –≥—Ä—É–ø–ø—ã
1. ‚úÖ –û—Ç–∫—Ä—ã—Ç—å —Ç–∞–±–ª–∏—Ü—É —Å –ø–æ–∑–∏—Ü–∏—è–º–∏
2. ‚úÖ –ö–ª–∏–∫–Ω—É—Ç—å –≤ –ø–æ–ª–µ "Skupina"
3. ‚úÖ –ù–∞–±—Ä–∞—Ç—å "–ú–æ–∏ –æ–ø–æ—Ä—ã"
4. ‚úÖ –ù–∞–∂–∞—Ç—å Enter
5. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: –≥—Ä—É–ø–ø–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ dropdown –¥—Ä—É–≥–∏—Ö –ø–æ–∑–∏—Ü–∏–π

### –¢–µ—Å—Ç 2: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫ –ø–æ—Ö–æ–∂–∏–º
1. ‚úÖ –ù–∞–∑–Ω–∞—á–∏—Ç—å –≥—Ä—É–ø–ø—É "–§—É–Ω–¥–∞–º–µ–Ω—Ç" –ø–æ–∑–∏—Ü–∏–∏ "Beton√°≈æ z√°klad≈Ø"
2. ‚úÖ –ö–ª–∏–∫–Ω—É—Ç—å –∫–Ω–æ–ø–∫—É ‚ú®
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: –ø–æ–∑–∏—Ü–∏–∏ "Z√°kladov√° deska", "Z√°klady ≈æelezobeton" –ø–æ–ª—É—á–∏–ª–∏ —Ç—É –∂–µ –≥—Ä—É–ø–ø—É
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: alert –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∑–∏—Ü–∏–π

### –¢–µ—Å—Ç 3: –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ
1. ‚úÖ –ö–ª–∏–∫–Ω—É—Ç—å "Seskupit podle skupiny"
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: –ø–æ–∑–∏—Ü–∏–∏ —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –≥—Ä—É–ø–ø–∞–º
3. ‚úÖ –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –≥—Ä—É–ø–ø—É "Beton - monolitick√Ω"
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: –≥—Ä—É–ø–ø–∞ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è, –ø–æ–∫–∞–∑—ã–≤–∞—è –≤—Å–µ –ø–æ–∑–∏—Ü–∏–∏
5. ‚úÖ –ö–ª–∏–∫–Ω—É—Ç—å —Å–Ω–æ–≤–∞ ‚Üí –≥—Ä—É–ø–ø–∞ —Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è

### –¢–µ—Å—Ç 4: –£–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –±–µ—Ç–æ–Ω–Ω—ã–µ –≥—Ä—É–ø–ø—ã
1. ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å Excel —Å –ø–æ–∑–∏—Ü–∏—è–º–∏ "–ú–æ–Ω–æ–ª–∏—Ç–Ω–∞—è –ø–ª–∏—Ç–∞", "–°–±–æ—Ä–Ω—ã–µ –ø–∞–Ω–µ–ª–∏"
2. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—é
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: "–ú–æ–Ω–æ–ª–∏—Ç–Ω–∞—è –ø–ª–∏—Ç–∞" ‚Üí "Beton - monolitick√Ω"
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: "–°–±–æ—Ä–Ω—ã–µ –ø–∞–Ω–µ–ª–∏" ‚Üí "Beton - prefabrik√°t"
5. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: –≤ dropdown —Ç–æ–ª—å–∫–æ 2 –±–µ—Ç–æ–Ω–Ω—ã–µ –≥—Ä—É–ø–ø—ã (–Ω–µ 7)

---

## üöÄ User Flow (–ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª)

```
1. –ò–º–ø–æ—Ä—Ç Excel ‚Üí 200 –ø–æ–∑–∏—Ü–∏–π
2. –ê–≤—Ç–æ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è ‚Üí 150 –ø–æ–∑–∏—Ü–∏–π –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç: 50 –Ω–µ–∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö

4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –ø–µ—Ä–≤—É—é –Ω–µ–∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—É—é:
   "–ú–æ–Ω–æ–ª–∏—Ç–Ω–∞—è –æ–ø–æ—Ä–∞ –º–æ—Å—Ç–æ–≤–∞—è O1"

5. –ù–∞–±–∏—Ä–∞–µ—Ç –≤ –ø–æ–ª–µ Skupina: "–û–ø–æ—Ä—ã –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–µ - —Ñ–∞–∑–∞ 1"
   ‚Üí –ì—Ä—É–ø–ø–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ —Å–ø–∏—Å–æ–∫

6. –ö–ª–∏–∫–∞–µ—Ç –∫–Ω–æ–ø–∫—É ‚ú® "–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫ –ø–æ—Ö–æ–∂–∏–º"
   ‚Üí –°–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç 8 –ø–æ—Ö–æ–∂–∏—Ö –ø–æ–∑–∏—Ü–∏–π:
   - "–û–ø–æ—Ä–∞ –º–æ–Ω–æ–ª–∏—Ç–Ω–∞—è O2" (confidence 96%)
   - "–û–ø–æ—Ä–Ω–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –º–æ–Ω–æ–ª–∏—Ç–Ω–∞—è O3" (confidence 89%)
   - ... (–µ—â–µ 6)
   ‚Üí –í—Å–µ 8 –ø–æ–ª—É—á–∞—é—Ç –≥—Ä—É–ø–ø—É "–û–ø–æ—Ä—ã –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–µ - —Ñ–∞–∑–∞ 1"

7. Alert: "–ì—Ä—É–ø–ø–∞ '–û–ø–æ—Ä—ã –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–µ - —Ñ–∞–∑–∞ 1' –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –∫ 8 –ø–æ—Ö–æ–∂–∏–º –ø–æ–∑–∏—Ü–∏—è–º"

8. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–∞–µ—Ç "Seskupit podle skupiny"
   ‚Üí –¢–∞–±–ª–∏—Ü–∞ –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è:

   ‚ñº Beton - monolitick√Ω (45 polo≈æek)
   ‚ñº Beton - prefabrik√°t (12 polo≈æek)
   ‚ñº V√Ωztu≈æ (38 polo≈æek)
   ‚ñº Bednƒõn√≠ (32 polo≈æek)
   ‚ñº Opory monolitn√≠ - f√°ze 1 (9 polo≈æek)  ‚Üê –ï–ì–û –ì–†–£–ü–ü–ê
   ‚ñº Ostatn√≠ (64 polo≈æek)

9. –ö–ª–∏–∫–∞–µ—Ç –Ω–∞ "Opory monolitn√≠ - f√°ze 1"
   ‚Üí –ì—Ä—É–ø–ø–∞ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è, –ø–æ–∫–∞–∑—ã–≤–∞—è 9 –ø–æ–∑–∏—Ü–∏–π

10. –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π ‚úÖ
```

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Similarity Service

```
similarityService.ts
‚îú‚îÄ‚îÄ findSimilarItems()
‚îÇ   ‚îú‚îÄ‚îÄ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Fuse.js
‚îÇ   ‚îú‚îÄ‚îÄ Weighted search (popis 50%, popisFull 30%, kod 20%)
‚îÇ   ‚îî‚îÄ‚îÄ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç score 0-1 (–º–µ–Ω—å—à–µ = –ª—É—á—à–µ)
‚îÇ
‚îú‚îÄ‚îÄ suggestSkupinaFromSimilar()
‚îÇ   ‚îú‚îÄ‚îÄ –ù–∞—Ö–æ–¥–∏—Ç –ø–æ—Ö–æ–∂–∏–µ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç —á–∞—Å—Ç–æ—Ç—É –≥—Ä—É–ø–ø
‚îÇ   ‚îî‚îÄ‚îÄ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç—É—é –≥—Ä—É–ø–ø—É
‚îÇ
‚îî‚îÄ‚îÄ autoAssignSimilarItems()
    ‚îú‚îÄ‚îÄ –ù–∞—Ö–æ–¥–∏—Ç –ø–æ—Ö–æ–∂–∏–µ –Ω–µ–∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏
    ‚îú‚îÄ‚îÄ –§–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ minConfidence (default 70%)
    ‚îî‚îÄ‚îÄ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–ª—è bulk update
```

### –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ TanStack Table

```
ItemsTable.tsx
‚îú‚îÄ‚îÄ State
‚îÇ   ‚îú‚îÄ‚îÄ grouping: GroupingState = [] | ['skupina']
‚îÇ   ‚îú‚îÄ‚îÄ expanded: ExpandedState = {}
‚îÇ   ‚îî‚îÄ‚îÄ groupBySkupina: boolean
‚îÇ
‚îú‚îÄ‚îÄ Table Configuration
‚îÇ   ‚îú‚îÄ‚îÄ getGroupedRowModel()
‚îÇ   ‚îú‚îÄ‚îÄ getExpandedRowModel()
‚îÇ   ‚îú‚îÄ‚îÄ onGroupingChange
‚îÇ   ‚îî‚îÄ‚îÄ onExpandedChange
‚îÇ
‚îî‚îÄ‚îÄ Rendering
    ‚îú‚îÄ‚îÄ if (row.getIsGrouped()) ‚Üí Group header
    ‚îî‚îÄ‚îÄ else ‚Üí Regular row
```

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–£–º–Ω–∞—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –≥—Ä—É–ø–ø**
   - –ü—Ä–∏ –≤–≤–æ–¥–µ —Ç–µ–∫—Å—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ø-3 –ø–æ—Ö–æ–∂–∏—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –≥—Ä—É–ø–ø
   - –ò–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —Ç–∏–ø–∞ "–û–ø–æ—Ä—ã" –∏ "–û–ø–æ—Ä–∞"

2. **Batch auto-classification**
   - –ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∞–≤—Ç–æ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—é –∫–æ –≤—Å–µ–º"
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç similarity –¥–ª—è –≤—Å–µ—Ö –Ω–µ–∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö

3. **Confidence indicator**
   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å % —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ —Ä—è–¥–æ–º —Å ‚ú® –∫–Ω–æ–ø–∫–æ–π
   - –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è: –∑–µ–ª–µ–Ω—ã–π >80%, –∂–µ–ª—Ç—ã–π 70-80%

4. **Undo/Redo**
   - –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≥—Ä—É–ø–ø
   - –ö–Ω–æ–ø–∫–∞ "–û—Ç–º–µ–Ω–∏—Ç—å" –ø–æ—Å–ª–µ bulk update

5. **Export grouped data**
   - Excel export —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π
   - –ö–∞–∂–¥–∞—è –≥—Ä—É–ø–ø–∞ = –æ—Ç–¥–µ–ª—å–Ω—ã–π –ª–∏—Å—Ç –∏–ª–∏ —Ä–∞–∑–¥–µ–ª

---

**–ê–≤—Ç–æ—Ä:** Claude AI Assistant
**–î–∞—Ç–∞:** 2026-01-22
**–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** ~90 –º–∏–Ω—É—Ç
**–ö–æ–º–º–∏—Ç—ã:** 2 (b3cdb82, 530592e)

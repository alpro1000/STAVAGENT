# üîç –ê–Ω–∞–ª–∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞

**–î–∞—Ç–∞:** 2025-11-15
**–¶–µ–ª—å:** –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —á—Ç–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ü–û–†–¢–ê–õ ‚Üí –ö–ò–û–°–ö–ò ‚Üí –Ø–î–†–û

---

## üìä –¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### Backend (`backend/src/`)

```
backend/src/
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îú‚îÄ‚îÄ auth.js ..................... ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–ª—è –ø–æ—Ä—Ç–∞–ª–∞)
‚îÇ   ‚îú‚îÄ‚îÄ admin.js .................... ‚úÖ –ê–¥–º–∏–Ω–∫–∞ (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º)
‚îÇ   ‚îú‚îÄ‚îÄ otskp.js .................... ‚úÖ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ OTSKP (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º)
‚îÇ   ‚îú‚îÄ‚îÄ documents.js ................ ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–ì–û–¢–û–í!)
‚îÇ   ‚îú‚îÄ‚îÄ monolith-projects.js ........ ‚ùå ‚Üí –ü–µ—Ä–µ–Ω–æ—Å–∏–º –≤ –∫–∏–æ—Å–∫ Monolit
‚îÇ   ‚îú‚îÄ‚îÄ parts.js .................... ‚ùå ‚Üí –ü–µ—Ä–µ–Ω–æ—Å–∏–º –≤ –∫–∏–æ—Å–∫ Monolit
‚îÇ   ‚îú‚îÄ‚îÄ positions.js ................ ‚ùå ‚Üí –ü–µ—Ä–µ–Ω–æ—Å–∏–º –≤ –∫–∏–æ—Å–∫ Monolit
‚îÇ   ‚îú‚îÄ‚îÄ bridges.js .................. ‚ùå ‚Üí –£—Å—Ç–∞—Ä–µ–≤—à–∏–π (backward compatibility)
‚îÇ   ‚îú‚îÄ‚îÄ upload.js ................... ‚ùå ‚Üí –ó–∞–º–µ–Ω—è–µ–º –Ω–∞ documents.js
‚îÇ   ‚îú‚îÄ‚îÄ export.js ................... ‚ùå ‚Üí –ü–µ—Ä–µ–Ω–æ—Å–∏–º –≤ –∫–∏–æ—Å–∫ Monolit
‚îÇ   ‚îú‚îÄ‚îÄ snapshots.js ................ ‚ùå ‚Üí –ü–µ—Ä–µ–Ω–æ—Å–∏–º –≤ –∫–∏–æ—Å–∫ Monolit
‚îÇ   ‚îú‚îÄ‚îÄ mapping.js .................. ‚ùå ‚Üí –ü–µ—Ä–µ–Ω–æ—Å–∏–º –≤ –∫–∏–æ—Å–∫ Monolit
‚îÇ   ‚îú‚îÄ‚îÄ config.js ................... ‚úÖ –ö–æ–Ω—Ñ–∏–≥ (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º)
‚îÇ   ‚îî‚îÄ‚îÄ debug.js .................... ‚ö†Ô∏è –í—Ä–µ–º–µ–Ω–Ω—ã–µ debug-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚îÇ
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ concreteAgentClient.js ...... ‚úÖ –ì–û–¢–û–í! (–∫–ª–∏–µ–Ω—Ç –¥–ª—è CORE)
‚îÇ   ‚îú‚îÄ‚îÄ emailService.js ............. ‚úÖ Email (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º)
‚îÇ   ‚îú‚îÄ‚îÄ calculator.js ............... ‚ùå ‚Üí –ü–µ—Ä–µ–Ω–æ—Å–∏–º –≤ –∫–∏–æ—Å–∫ Monolit
‚îÇ   ‚îú‚îÄ‚îÄ concreteExtractor.js ........ ‚ùå ‚Üí –ü–µ—Ä–µ–Ω–æ—Å–∏–º –≤ –∫–∏–æ—Å–∫ Monolit
‚îÇ   ‚îú‚îÄ‚îÄ parser.js ................... ‚ùå ‚Üí –ü–µ—Ä–µ–Ω–æ—Å–∏–º –≤ –∫–∏–æ—Å–∫ Monolit
‚îÇ   ‚îú‚îÄ‚îÄ exporter.js ................. ‚ùå ‚Üí –ü–µ—Ä–µ–Ω–æ—Å–∏–º –≤ –∫–∏–æ—Å–∫ Monolit
‚îÇ   ‚îî‚îÄ‚îÄ snapshot.js ................. ‚ùå ‚Üí –ü–µ—Ä–µ–Ω–æ—Å–∏–º –≤ –∫–∏–æ—Å–∫ Monolit
‚îÇ
‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îú‚îÄ‚îÄ auth.js ..................... ‚úÖ JWT auth (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º)
‚îÇ   ‚îú‚îÄ‚îÄ adminOnly.js ................ ‚úÖ Admin check (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º)
‚îÇ   ‚îî‚îÄ‚îÄ rateLimiter.js .............. ‚úÖ Rate limiting (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º)
‚îÇ
‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îú‚îÄ‚îÄ init.js ..................... ‚ö†Ô∏è –ù—É–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å (–¥–æ–±–∞–≤–∏—Ç—å portal —Ç–∞–±–ª–∏—Ü—ã)
‚îÇ   ‚îú‚îÄ‚îÄ migrations.js ............... ‚ö†Ô∏è –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ postgres.js ................. ‚úÖ PostgreSQL –∫–ª–∏–µ–Ω—Ç (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º)
‚îÇ
‚îî‚îÄ‚îÄ utils/
    ‚îú‚îÄ‚îÄ logger.js ................... ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º)
    ‚îú‚îÄ‚îÄ auditLogger.js .............. ‚úÖ Audit logs (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º)
    ‚îú‚îÄ‚îÄ errorHandler.js ............. ‚úÖ Error handling (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º)
    ‚îú‚îÄ‚îÄ fileCleanup.js .............. ‚úÖ File cleanup (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º)
    ‚îî‚îÄ‚îÄ text.js ..................... ‚úÖ Text utils (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º)
```

---

### Frontend (`frontend/src/`)

```
frontend/src/
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îú‚îÄ‚îÄ LoginPage.tsx ............... ‚úÖ –í—Ö–æ–¥ (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º)
‚îÇ   ‚îú‚îÄ‚îÄ DashboardPage.tsx ........... ‚ö†Ô∏è –ó–∞–º–µ–Ω–∏–º –Ω–∞ PortalPage
‚îÇ   ‚îú‚îÄ‚îÄ AdminDashboard.tsx .......... ‚úÖ –ê–¥–º–∏–Ω–∫–∞ (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º)
‚îÇ   ‚îú‚îÄ‚îÄ VerifyEmailPage.tsx ......... ‚úÖ –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è email (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º)
‚îÇ   ‚îú‚îÄ‚îÄ ChangePasswordPage.tsx ...... ‚úÖ –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º)
‚îÇ   ‚îú‚îÄ‚îÄ ForgotPasswordPage.tsx ...... ‚úÖ –ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º)
‚îÇ   ‚îú‚îÄ‚îÄ ResetPasswordPage.tsx ....... ‚úÖ –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º)
‚îÇ   ‚îî‚îÄ‚îÄ DocumentUploadPage.tsx ...... ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–ì–û–¢–û–í!)
‚îÇ
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ MainApp.tsx ................. ‚ùå ‚Üí –ü–µ—Ä–µ–Ω–æ—Å–∏–º –≤ –∫–∏–æ—Å–∫ Monolit
‚îÇ   ‚îú‚îÄ‚îÄ Header.tsx .................. ‚ö†Ô∏è –ê–¥–∞–ø—Ç–∏—Ä—É–µ–º –¥–ª—è –ø–æ—Ä—Ç–∞–ª–∞
‚îÇ   ‚îú‚îÄ‚îÄ Sidebar.tsx ................. ‚ùå ‚Üí –ü–µ—Ä–µ–Ω–æ—Å–∏–º –≤ –∫–∏–æ—Å–∫ Monolit
‚îÇ   ‚îú‚îÄ‚îÄ PositionsTable.tsx .......... ‚ùå ‚Üí –ü–µ—Ä–µ–Ω–æ—Å–∏–º –≤ –∫–∏–æ—Å–∫ Monolit
‚îÇ   ‚îú‚îÄ‚îÄ KPIPanel.tsx ................ ‚ùå ‚Üí –ü–µ—Ä–µ–Ω–æ—Å–∏–º –≤ –∫–∏–æ—Å–∫ Monolit
‚îÇ   ‚îú‚îÄ‚îÄ ProtectedRoute.tsx .......... ‚úÖ Auth guard (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º)
‚îÇ   ‚îú‚îÄ‚îÄ OtskpAutocomplete.tsx ....... ‚úÖ –ü–æ–∏—Å–∫ OTSKP (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º)
‚îÇ   ‚îú‚îÄ‚îÄ DocumentUpload.tsx .......... ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ (–ì–û–¢–û–í!)
‚îÇ   ‚îú‚îÄ‚îÄ AnalysisPreview.tsx ......... ‚úÖ Preview –∞–Ω–∞–ª–∏–∑–∞ CORE (–ì–û–¢–û–í!)
‚îÇ   ‚îî‚îÄ‚îÄ admin/ ...................... ‚úÖ –ê–¥–º–∏–Ω—Å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º)
‚îÇ       ‚îú‚îÄ‚îÄ UserManagement.tsx
‚îÇ       ‚îú‚îÄ‚îÄ AuditLogs.tsx
‚îÇ       ‚îî‚îÄ‚îÄ AdminStats.tsx
‚îÇ
‚îú‚îÄ‚îÄ context/
‚îÇ   ‚îú‚îÄ‚îÄ AuthContext.tsx ............. ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è context (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º)
‚îÇ   ‚îî‚îÄ‚îÄ AppContext.tsx .............. ‚ùå ‚Üí –ü–µ—Ä–µ–Ω–æ—Å–∏–º –≤ –∫–∏–æ—Å–∫ Monolit
‚îÇ
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ useAuth.ts .................. ‚úÖ Auth hook (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º)
‚îÇ   ‚îî‚îÄ‚îÄ useDarkMode.ts .............. ‚úÖ Dark mode (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º)
‚îÇ
‚îî‚îÄ‚îÄ services/
    ‚îî‚îÄ‚îÄ api.ts ...................... ‚ö†Ô∏è –ù—É–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å (–¥–æ–±–∞–≤–∏—Ç—å portal API)
```

---

## ‚úÖ –ß–¢–û –£–ñ–ï –ì–û–¢–û–í–û –ò –ú–û–ñ–ù–û –ü–ï–†–ï–ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨

### 1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Concrete-Agent CORE** ‚ú®

**–§–∞–π–ª:** `backend/src/services/concreteAgentClient.js` (375 —Å—Ç—Ä–æ–∫)

**–ì–æ—Ç–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
```javascript
‚úÖ workflowAStart(filePath, metadata)      // –ü–∞—Ä—Å–∏–Ω–≥ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (KROS, Excel, PDF)
‚úÖ workflowBStart(filePath, metadata)      // –ê–Ω–∞–ª–∏–∑ —á–µ—Ä—Ç–µ–∂–µ–π (OCR + AI)
‚úÖ performAudit(workflowId, data, roles)   // –ú—É–ª—å—Ç–∏-—Ä–æ–ª–µ–≤–æ–π –∞—É–¥–∏—Ç
‚úÖ enrichWithAI(workflowId, data)          // AI –æ–±–æ–≥–∞—â–µ–Ω–∏–µ
‚úÖ searchKnowledgeBase(query, category)    // –ü–æ–∏—Å–∫ –≤ KB
‚úÖ calculateBridge(params)                 // –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –º–æ—Å—Ç–æ–≤
‚úÖ calculateBuilding(params)               // –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∑–¥–∞–Ω–∏–π
‚úÖ healthCheck()                           // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ CORE
‚úÖ getServiceInfo()                        // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ CORE
```

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**
- ‚úÖ **–ù–ï –ù–£–ñ–ù–û –ø–∏—Å–∞—Ç—å –∫–ª–∏–µ–Ω—Ç –∑–∞–Ω–æ–≤–æ!**
- ‚úÖ –ü—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º —ç—Ç–∏ –º–µ—Ç–æ–¥—ã –≤ –ø–æ—Ä—Ç–∞–ª–µ
- ‚úÖ –£–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ: timeout, error handling, logging

---

### 2. **–ó–∞–≥—Ä—É–∑–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** ‚ú®

**–§–∞–π–ª:** `backend/src/routes/documents.js` (400+ —Å—Ç—Ä–æ–∫)

**–ì–æ—Ç–æ–≤—ã–µ endpoints:**
```javascript
‚úÖ POST /api/documents/upload          // –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ + async –∞–Ω–∞–ª–∏–∑ CORE
‚úÖ GET  /api/documents/:id             // –î–µ—Ç–∞–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞
‚úÖ GET  /api/documents/:id/analysis    // –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ CORE
‚úÖ POST /api/documents/:id/confirm     // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞
‚úÖ DELETE /api/documents/:id           // –£–¥–∞–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
‚úÖ GET  /api/documents?project_id=X    // –°–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞
```

**–ß—Ç–æ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ Multer –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ (50MB max)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤ (PDF, Excel, images)
- ‚úÖ Async –∞–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ CORE (workflowAStart)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î (—Ç–∞–±–ª–∏—Ü–∞ `documents`)
- ‚úÖ Polling –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –∞–Ω–∞–ª–∏–∑–∞

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**
- ‚úÖ **–ü–æ—Ä—Ç–∞–ª —É–∂–µ —É–º–µ–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã!**
- ‚úÖ –ü—Ä–æ—Å—Ç–æ –∞–¥–∞–ø—Ç–∏—Ä—É–µ–º –ø–æ–¥ –Ω–æ–≤—É—é —Å—Ö–µ–º—É –ë–î (portal_files)

---

**Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç:** `DocumentUploadPage.tsx` + `DocumentUpload.tsx`

**–ß—Ç–æ –µ—Å—Ç—å:**
- ‚úÖ Drag-drop –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
- ‚úÖ Progress bar
- ‚úÖ Preview —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∞–Ω–∞–ª–∏–∑–∞
- ‚úÖ Polling —Å—Ç–∞—Ç—É—Å–∞ (–∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã)

---

### 3. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** ‚úÖ

**Backend:**
- ‚úÖ `routes/auth.js` - login, register, verify email, reset password
- ‚úÖ `middleware/auth.js` - JWT validation
- ‚úÖ `middleware/adminOnly.js` - admin role check
- ‚úÖ `services/emailService.js` - –æ—Ç–ø—Ä–∞–≤–∫–∞ email (Resend)

**Frontend:**
- ‚úÖ `LoginPage.tsx` - —Ñ–æ—Ä–º–∞ –≤—Ö–æ–¥–∞/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ `VerifyEmailPage.tsx` - –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è email
- ‚úÖ `ChangePasswordPage.tsx` - —Å–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è
- ‚úÖ `ForgotPasswordPage.tsx` + `ResetPasswordPage.tsx` - —Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è
- ‚úÖ `AuthContext.tsx` - –∫–æ–Ω—Ç–µ–∫—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**
- ‚úÖ **–í—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!**
- ‚úÖ –ü–æ—Ä—Ç–∞–ª –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ –∫–∞–∫ –µ—Å—Ç—å
- ‚úÖ –ù–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å

---

### 4. **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å** ‚úÖ

**Backend:**
- ‚úÖ `routes/admin.js` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- ‚úÖ `utils/auditLogger.js` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π

**Frontend:**
- ‚úÖ `AdminDashboard.tsx` - –∞–¥–º–∏–Ω—Å–∫–∞—è –ø–∞–Ω–µ–ª—å
- ‚úÖ `admin/UserManagement.tsx` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- ‚úÖ `admin/AuditLogs.tsx` - –ª–æ–≥–∏ –¥–µ–π—Å—Ç–≤–∏–π
- ‚úÖ `admin/AdminStats.tsx` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**
- ‚úÖ **–ê–¥–º–∏–Ω–∫–∞ –≥–æ—Ç–æ–≤–∞!**
- ‚úÖ –ü–æ—Ä—Ç–∞–ª –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ –∫–∞–∫ –µ—Å—Ç—å

---

### 5. **OTSKP —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫** ‚úÖ

**Backend:**
- ‚úÖ `routes/otskp.js` - –ø–æ–∏—Å–∫ –∫–æ–¥–æ–≤ (17,904 –∫–æ–¥–æ–≤)

**Frontend:**
- ‚úÖ `OtskpAutocomplete.tsx` - autocomplete –ø–æ–∏—Å–∫

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**
- ‚úÖ **–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –≥–æ—Ç–æ–≤!**
- ‚úÖ –ú–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∏ –ø–æ—Ä—Ç–∞–ª–æ–º, –∏ –∫–∏–æ—Å–∫–∞–º–∏

---

### 6. **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞** ‚úÖ

- ‚úÖ **Database**: PostgreSQL –∫–ª–∏–µ–Ω—Ç (`db/postgres.js`)
- ‚úÖ **Logging**: Winston logger (`utils/logger.js`)
- ‚úÖ **Error handling**: Global error handler (`utils/errorHandler.js`)
- ‚úÖ **Rate limiting**: Rate limiters (`middleware/rateLimiter.js`)
- ‚úÖ **File cleanup**: Periodic cleanup (`utils/fileCleanup.js`)

---

## ‚ùå –ß–¢–û –ù–£–ñ–ù–û –ü–ï–†–ï–ù–ï–°–¢–ò –í –ö–ò–û–°–ö MONOLIT

–≠—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã –¥–ª—è –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–≥–æ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞:

### Backend
```
‚ùå routes/monolith-projects.js   ‚Üí –ö–∏–æ—Å–∫ Monolit
‚ùå routes/parts.js                ‚Üí –ö–∏–æ—Å–∫ Monolit
‚ùå routes/positions.js            ‚Üí –ö–∏–æ—Å–∫ Monolit
‚ùå routes/bridges.js              ‚Üí –ö–∏–æ—Å–∫ Monolit (legacy)
‚ùå routes/upload.js               ‚Üí –ö–∏–æ—Å–∫ Monolit
‚ùå routes/export.js               ‚Üí –ö–∏–æ—Å–∫ Monolit
‚ùå routes/snapshots.js            ‚Üí –ö–∏–æ—Å–∫ Monolit
‚ùå routes/mapping.js              ‚Üí –ö–∏–æ—Å–∫ Monolit

‚ùå services/calculator.js         ‚Üí –ö–∏–æ—Å–∫ Monolit
‚ùå services/concreteExtractor.js  ‚Üí –ö–∏–æ—Å–∫ Monolit
‚ùå services/parser.js             ‚Üí –ö–∏–æ—Å–∫ Monolit
‚ùå services/exporter.js           ‚Üí –ö–∏–æ—Å–∫ Monolit
‚ùå services/snapshot.js           ‚Üí –ö–∏–æ—Å–∫ Monolit
```

### Frontend
```
‚ùå components/MainApp.tsx         ‚Üí –ö–∏–æ—Å–∫ Monolit
‚ùå components/Sidebar.tsx         ‚Üí –ö–∏–æ—Å–∫ Monolit
‚ùå components/PositionsTable.tsx  ‚Üí –ö–∏–æ—Å–∫ Monolit
‚ùå components/KPIPanel.tsx        ‚Üí –ö–∏–æ—Å–∫ Monolit
‚ùå components/PositionRow.tsx     ‚Üí –ö–∏–æ—Å–∫ Monolit
‚ùå components/PartHeader.tsx      ‚Üí –ö–∏–æ—Å–∫ Monolit
‚ùå components/Create*.tsx         ‚Üí –ö–∏–æ—Å–∫ Monolit
‚ùå components/Edit*.tsx           ‚Üí –ö–∏–æ—Å–∫ Monolit
‚ùå components/Delete*.tsx         ‚Üí –ö–∏–æ—Å–∫ Monolit
‚ùå components/ExportHistory.tsx   ‚Üí –ö–∏–æ—Å–∫ Monolit
‚ùå components/WorkTypeSelector.tsx‚Üí –ö–∏–æ—Å–∫ Monolit
‚ùå context/AppContext.tsx         ‚Üí –ö–∏–æ—Å–∫ Monolit
```

---

## ‚ö†Ô∏è –ß–¢–û –ù–£–ñ–ù–û –ê–î–ê–ü–¢–ò–†–û–í–ê–¢–¨

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–¢–µ–∫—É—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã:**
```sql
‚úÖ users                    -- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º
‚úÖ otskp_codes              -- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º
‚úÖ audit_logs               -- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º
‚úÖ email_verification_tokens-- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º
‚úÖ password_reset_tokens    -- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º
‚úÖ documents                -- –ê–î–ê–ü–¢–ò–†–£–ï–ú ‚Üí portal_files
‚ùå monolith_projects        -- ‚Üí –ö–∏–æ—Å–∫ Monolit
‚ùå parts                    -- ‚Üí –ö–∏–æ—Å–∫ Monolit
‚ùå positions                -- ‚Üí –ö–∏–æ—Å–∫ Monolit
‚ùå part_templates           -- ‚Üí –ö–∏–æ—Å–∫ Monolit
‚ùå snapshots                -- ‚Üí –ö–∏–æ—Å–∫ Monolit
```

**–ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –ø–æ—Ä—Ç–∞–ª–∞:**
```sql
üÜï portal_projects          -- –ì–ª–∞–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤
üÜï portal_files             -- –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–æ–≤ (–∞–¥–∞–ø—Ç–∞—Ü–∏—è documents)
üÜï kiosk_links              -- –°–≤—è–∑—å –ø–æ—Ä—Ç–∞–ª ‚Üî –∫–∏–æ—Å–∫–∏
üÜï chat_sessions            -- –ß–∞—Ç-—Å–µ—Å—Å–∏–∏
üÜï chat_messages            -- –°–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞
```

---

### 2. API

**–ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ endpoints:**
```javascript
// –ü—Ä–æ–µ–∫—Ç—ã –ø–æ—Ä—Ç–∞–ª–∞
POST   /api/portal/projects
GET    /api/portal/projects
GET    /api/portal/projects/:id
PUT    /api/portal/projects/:id
DELETE /api/portal/projects/:id

// –§–∞–π–ª—ã (–∞–¥–∞–ø—Ç–∞—Ü–∏—è /api/documents)
POST   /api/portal/projects/:id/files
GET    /api/portal/projects/:id/files
GET    /api/portal/files/:id/download
DELETE /api/portal/files/:id

// –ö–∏–æ—Å–∫–∏
POST   /api/portal/projects/:id/kiosks
GET    /api/portal/projects/:id/kiosks
GET    /api/portal/projects/:id/kiosks/:type/open

// CORE Integration
POST   /api/portal/projects/:id/core/submit
GET    /api/portal/projects/:id/core/results
POST   /api/portal/projects/:id/core/accept-to-kiosk

// –ß–∞—Ç
POST   /api/portal/chat/sessions
POST   /api/portal/chat/sessions/:id/messages
GET    /api/portal/chat/sessions/:id/messages
```

---

### 3. Frontend

**–ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:**
```typescript
üÜï PortalPage.tsx           // –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ—Ä—Ç–∞–ª–∞ (—Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤)
üÜï ProjectCard.tsx          // –ö–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–≤–∫–ª–∞–¥–∫–∏: files, kiosks, core, chat)
üÜï KioskSelector.tsx        // –í—ã–±–æ—Ä –∫–∏–æ—Å–∫–∞ –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
üÜï CorePanel.tsx            // –ü–∞–Ω–µ–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å CORE
üÜï ChatPanel.tsx            // –ß–∞—Ç-–ø–∞–Ω–µ–ª—å StavAgent
üÜï FilesList.tsx            // –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞
üÜï KiosksList.tsx           // –°–ø–∏—Å–æ–∫ –∫–∏–æ—Å–∫–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞
```

**–ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å:**
```typescript
‚ö†Ô∏è Header.tsx              // –£–±—Ä–∞—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏–∫—É Monolit
‚ö†Ô∏è DashboardPage.tsx       // –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ PortalPage –∏–ª–∏ —É–ø—Ä–æ—Å—Ç–∏—Ç—å
```

---

## üìã –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –ü–æ—Ä—Ç–∞–ª (–±–∞–∑–∞)
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –ë–î (`portal_projects`, `portal_files`, `kiosk_links`)
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å API routes (`portal-projects.js`, `portal-files.js`, `kiosk-links.js`)
3. ‚úÖ –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å `documents.js` ‚Üí `portal-files.js`
4. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–≥–æ—Ç–æ–≤—ã–π** `concreteAgentClient.js`

### –≠—Ç–∞–ø 2: Frontend –ø–æ—Ä—Ç–∞–ª–∞
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å `PortalPage.tsx` (—Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤)
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å `ProjectCard.tsx` (–∫–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞)
3. ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `DocumentUpload.tsx` + `AnalysisPreview.tsx`
4. ‚úÖ –°–æ–∑–¥–∞—Ç—å `KioskSelector.tsx`
5. ‚úÖ –°–æ–∑–¥–∞—Ç—å `CorePanel.tsx` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç `concreteAgentClient`)

### –≠—Ç–∞–ø 3: –ß–∞—Ç
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã (`chat_sessions`, `chat_messages`)
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å API (`chat.js`)
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å `ChatPanel.tsx`

### –≠—Ç–∞–ø 4: –í—ã–Ω–æ—Å Monolit –≤ –∫–∏–æ—Å–∫
1. ‚úÖ –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∫–æ–¥ –≤ `kiosks/monolit/`
2. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å API endpoints (–¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É `portal_project_id`)
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –ø–æ—Ä—Ç–∞–ª–æ–º

---

## üéØ –í—ã–≤–æ–¥—ã

### ‚úÖ –ß—Ç–æ –£–ñ–ï –ì–û–¢–û–í–û (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –µ—Å—Ç—å)

1. **Concrete-Agent –∫–ª–∏–µ–Ω—Ç** - –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤! ‚ú®
2. **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** - –≥–æ—Ç–æ–≤–∞ (–Ω—É–∂–Ω–∞ –Ω–µ–±–æ–ª—å—à–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è)
3. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** - –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞
4. **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å** - –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞
5. **OTSKP —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫** - –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤
6. **Email —Å–µ—Ä–≤–∏—Å** - –≥–æ—Ç–æ–≤
7. **–í—Å—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞** (logger, error handler, rate limiter)

### ‚ö†Ô∏è –ß—Ç–æ –Ω—É–∂–Ω–æ –°–û–ó–î–ê–¢–¨

1. –¢–∞–±–ª–∏—Ü—ã –ë–î –ø–æ—Ä—Ç–∞–ª–∞ (portal_projects, portal_files, kiosk_links, chat)
2. API routes –¥–ª—è –ø–æ—Ä—Ç–∞–ª–∞
3. Frontend —Å—Ç—Ä–∞–Ω–∏—Ü—ã (PortalPage, ProjectCard, KioskSelector)
4. –ß–∞—Ç-–ø–∞–Ω–µ–ª—å

### ‚ùå –ß—Ç–æ –Ω—É–∂–Ω–æ –ü–ï–†–ï–ù–ï–°–¢–ò

1. –í–µ—Å—å –∫–æ–¥ Monolit –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–∏–æ—Å–∫-—Å–µ—Ä–≤–∏—Å
2. –¢–∞–±–ª–∏—Ü—ã –ë–î –¥–ª—è Monolit (monolith_projects, parts, positions)

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**–ì–æ—Ç–æ–≤—ã–π –∫–æ–¥:**
- ‚úÖ Backend services: 2 —Ñ–∞–π–ª–∞ (concreteAgentClient.js, emailService.js)
- ‚úÖ Backend routes: 4 —Ñ–∞–π–ª–∞ (auth.js, admin.js, otskp.js, documents.js)
- ‚úÖ Frontend pages: 7 —Ñ–∞–π–ª–æ–≤ (Login, Admin, Verify, Change/Forgot/Reset Password, DocumentUpload)
- ‚úÖ Frontend components: 5 —Ñ–∞–π–ª–æ–≤ (DocumentUpload, AnalysisPreview, admin/*)

**–ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å:**
- üÜï Backend routes: 3 —Ñ–∞–π–ª–∞ (portal-projects.js, portal-files.js, chat.js)
- üÜï Frontend pages: 3 —Ñ–∞–π–ª–∞ (PortalPage.tsx, ProjectCard.tsx, KioskSelector.tsx)
- üÜï Frontend components: 3 —Ñ–∞–π–ª–∞ (CorePanel.tsx, ChatPanel.tsx, FilesList.tsx)

**–û—Ü–µ–Ω–∫–∞:** ~70% –∫–æ–¥–∞ —É–∂–µ –≥–æ—Ç–æ–≤–æ! üéâ

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-11-15
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω

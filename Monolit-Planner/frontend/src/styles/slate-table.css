/**
 * Slate Minimal Table Design - Precise Specification
 * Color system: Tailwind Slate + Semantic accents
 * Column widths: Fixed layout for perfect alignment
 * Typography: Tabular nums for data integrity
 */

:root {
  /* ===== SLATE SCALE ===== */
  --slate-50: #f8fafc;   /* Page background */
  --slate-100: #f1f5f9;  /* Hover states, tab container */
  --slate-200: #e2e8f0;  /* Borders, dividers */
  --slate-300: #cbd5e1;  /* Section left-border */
  --slate-400: #94a3b8;  /* Muted text, icons */
  --slate-500: #64748b;  /* Secondary text */
  --slate-600: #475569;  /* Labels */
  --slate-700: #334155;  /* Section tag text */
  --slate-800: #1e293b;  /* Strong text */
  --slate-900: #0f172a;  /* Primary text, headings */

  /* ===== SEMANTIC COLORS ===== */
  /* Positive/Success - for KPI highlights, days, positive metrics */
  --color-positive: #059669;        /* Emerald 600 */
  --color-positive-soft: #d1fae5;   /* Emerald 100 - optional bg */

  /* Warning - for alerts, low values, attention items */
  --color-warning: #d97706;         /* Amber 600 */
  --color-warning-soft: #fef3c7;    /* Amber 100 - optional bg */

  /* Info - for links, interactive elements */
  --color-info: #0284c7;            /* Sky 600 */

  /* Neutral emphasis - for quantities, totals */
  --color-emphasis: var(--slate-900);

  /* ===== TYPOGRAPHY SIZES (VARIANT A) ===== */
  --num-lg: 1rem;       /* 16px - totals */
  --num-md: 0.875rem;   /* 14px - default (STANDARD body) */
  --num-sm: 0.75rem;    /* 12px - muted */
}

/* ============================================
   POSITIONS CONTAINER
   ============================================ */

.positions-container {
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  min-height: 0;
  position: relative;
  background: var(--slate-50);
}

.empty-positions-container {
  padding: 16px 20px;
  background: #ffffff;
  border: 1px solid var(--slate-200);
  border-radius: 8px;
  margin-bottom: 16px;
  text-align: center;
}

.empty-positions-message {
  margin: 0;
  color: var(--slate-600);
  font-size: 14px;
}

/* ============================================
   PART CARD
   ============================================ */

.part-card {
  background: #ffffff;
  border: 1px solid var(--slate-200);
  border-radius: 8px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

/* Section Header - Left Border Style */
.part-header {
  background: var(--slate-50);
  color: var(--slate-900);
  padding: 12px 16px;
  font-size: 13px;
  font-weight: 600;
  display: flex;
  justify-content: space-between;
  align-items: center;
  cursor: pointer;
  user-select: none;
  border-bottom: 1px solid var(--slate-200);
  border-left: 4px solid var(--slate-300); /* Section left border */
  transition: all 0.1s ease;
}

.part-header:hover {
  background: var(--slate-100);
  border-left-color: var(--slate-500);
}

/* Delete Part Button */
.btn-delete-part {
  background: #dc3545;
  color: white;
  border: none;
  border-radius: 4px;
  padding: 4px 8px;
  font-size: 11px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.1s ease;
}

.btn-delete-part:hover {
  background: #c82333;
}

/* ============================================
   PART HEADER CONTAINER
   ============================================ */

.part-header-container {
  background: var(--slate-50);
  border-bottom: 1px solid var(--slate-200);
  padding: 16px;
}

.part-name-input-wrapper {
  margin-bottom: 12px;
}

.part-name-label {
  display: block;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--slate-600);
  margin-bottom: 6px;
}

.part-name-input {
  width: 100%;
  background: #ffffff;
  border: 1px solid var(--slate-300);
  color: var(--slate-900);
  padding: 8px 12px;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 600;
  transition: all 0.1s ease;
}

.part-name-input:focus {
  outline: none;
  border-color: var(--color-info);
  box-shadow: 0 0 0 2px rgba(2, 132, 199, 0.1);
}

/* ============================================
   TABLE WRAPPER - HORIZONTAL SCROLL
   ============================================ */

.table-wrapper {
  overflow-x: auto;
  overflow-y: visible;
  background: #ffffff;
  -webkit-overflow-scrolling: touch;
}

/* ============================================
   POSITIONS TABLE - FIXED LAYOUT
   ============================================ */

.positions-table {
  width: 100%;
  min-width: 1100px; /* Prevent squishing on narrow screens */
  border-collapse: collapse;
  font-size: var(--num-md); /* 13px */
  background: #ffffff;
  table-layout: fixed; /* CRITICAL: Enables precise column widths */
}

/* ============================================
   TABLE HEADER
   ============================================ */

.positions-table thead {
  position: sticky;
  top: 0;
  z-index: 150;
  background: #ffffff;
}

.positions-table th {
  background: var(--slate-50);
  color: var(--slate-500); /* Secondary text for headers */
  font-weight: 600;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  padding: 12px 12px;
  text-align: right; /* All headers right-aligned for numbers */
  border-bottom: 1px solid var(--slate-200);
  white-space: nowrap;
}

.positions-table th:first-child {
  text-align: left; /* First column (name) left-aligned */
}

.positions-table th:last-child {
  border-right: none;
}

/* ============================================
   PRECISE COLUMN WIDTHS
   ============================================ */

/* Lock indicator (if present) */
.lock-col,
.lock-indicator {
  width: 36px !important;
  min-width: 36px;
  text-align: center;
}

/* A: Podtyp (PRÁCE) - work type name - RESIZABLE */
.col-podtyp {
  width: var(--work-column-width, 150px) !important;
  min-width: var(--work-column-width, 150px);
  max-width: var(--work-column-width, 150px);
}

/* B: MJ - unit */
.col-mj {
  width: 48px !important;
  min-width: 48px;
}

/* C: Množství - quantity */
.col-mnozstvi {
  width: 80px !important;
  min-width: 80px;
}

/* D: Lidí - people count */
.col-lidi {
  width: 48px !important;
  min-width: 48px;
}

/* E: Kč/hod - hourly rate */
.col-cena-hod {
  width: 72px !important;
  min-width: 72px;
}

/* F: Hod/den - hours per day */
.col-hod-den {
  width: 64px !important;
  min-width: 64px;
}

/* G: Dny - days */
.col-den {
  width: 56px !important;
  min-width: 56px;
}

/* Curing sub-row (under beton) */
.curing-sub-row td {
  border-bottom: 1px solid #e0e0e0 !important;
}

/* H: MJ/h - speed */
.col-rychlost {
  width: 72px !important;
  min-width: 72px;
}

/* I: Hod celkem - total hours */
.col-hod-celkem {
  width: 72px !important;
  min-width: 72px;
}

/* J: Kč celkem - total cost */
.col-kc-celkem {
  width: 88px !important;
  min-width: 88px;
}

/* K: Kč/m³ ⭐ - KPI metric */
.col-kc-m3 {
  width: 80px !important;
  min-width: 80px;
}

/* L: Objem m³ - volume (hidden in current design) */
/* Not used - volume stored in PartHeader */

/* M: KROS JC - KROS unit */
.col-kros-jc {
  width: 72px !important;
  min-width: 72px;
}

/* N: KROS celkem - KROS total */
.col-kros-celkem {
  width: 96px !important;
  min-width: 96px;
}

/* O: RFI - warning indicator */
.col-rfi {
  width: 45px !important;
  min-width: 45px;
  text-align: center;
}

/* Actions column */
.col-akce {
  width: 75px !important;
  min-width: 75px;
  text-align: center;
}

/* ============================================
   TABLE BODY
   ============================================ */

.positions-table tbody tr {
  border-bottom: 1px solid var(--slate-100);
  transition: background 0.1s ease;
}

.positions-table tbody tr:hover {
  background: var(--slate-50);
}

.positions-table td {
  padding: 12px 12px;
  text-align: right;
  white-space: nowrap;
  font-variant-numeric: tabular-nums; /* CRITICAL: Perfect number alignment */
  color: var(--slate-600); /* Body text */
  vertical-align: middle;
  font-size: var(--num-md); /* 13px */
}

.positions-table td:first-child {
  text-align: left;
  font-weight: 500;
  color: var(--slate-900); /* Primary text for names */
}

/* ============================================
   SEMANTIC COLUMN COLORS
   ============================================ */

/* Unit (MJ) - muted, uppercase */
.positions-table .col-mj {
  color: var(--slate-400);
  font-size: var(--num-sm); /* 12px */
  text-transform: uppercase;
}

/* Quantity - emphasis */
.positions-table .col-mnozstvi {
  font-weight: 600;
  color: var(--color-emphasis);
}

/* Days - positive green */
.positions-table .col-den {
  font-weight: 600;
  color: var(--color-positive);
}

/* Cost columns - emphasis */
.positions-table .col-kc-celkem {
  font-weight: 600;
  color: var(--color-emphasis);
}

/* KPI metric (Kč/m³) - positive green, medium weight */
.positions-table .col-kc-m3 {
  color: var(--color-positive);
  font-weight: 500;
}

/* KROS JC - muted reference */
.positions-table .col-kros-jc {
  color: var(--slate-400);
}

/* KROS total - bold emphasis */
.positions-table .col-kros-celkem {
  font-weight: 600;
  color: var(--color-emphasis);
}

/* Warning indicator with dot */
.positions-table .col-rfi .warning::before,
.kpi-value.warning::before {
  content: "";
  display: inline-block;
  width: 6px;
  height: 6px;
  background: var(--color-warning);
  border-radius: 50%;
  margin-right: 4px;
}

/* ============================================
   TYPOGRAPHY UTILITIES
   ============================================ */

.num-lg {
  font-size: var(--num-lg);
  font-weight: 700;
}

.num-md {
  font-size: var(--num-md);
}

.num-sm {
  font-size: var(--num-sm);
}

/* ============================================
   INPUTS
   ============================================ */

.positions-table input,
.positions-table select {
  width: 100%;
  background: #ffffff;
  border: 1px solid var(--slate-300);
  color: var(--slate-900);
  padding: 6px 8px;
  border-radius: 4px;
  font-size: var(--num-md);
  font-weight: 500;
  font-family: inherit;
  font-variant-numeric: tabular-nums;
  transition: all 0.1s ease;
}

.positions-table input:focus,
.positions-table select:focus {
  outline: none;
  border-color: var(--color-info);
  box-shadow: 0 0 0 2px rgba(2, 132, 199, 0.1);
}

.positions-table input:disabled,
.positions-table select:disabled {
  background: var(--slate-100);
  color: var(--slate-400);
  cursor: not-allowed;
}

/* ============================================
   COMPUTED CELLS (READ-ONLY)
   ============================================ */

.cell-computed,
.computed-cell {
  background: var(--slate-50);
  color: var(--slate-700);
  font-weight: 500;
  font-variant-numeric: tabular-nums;
  padding: 6px 8px;
  border-radius: 4px;
}

/* ============================================
   ACTION BUTTONS
   ============================================ */

.btn-delete-position {
  background: transparent;
  color: var(--slate-400);
  border: none;
  padding: 4px 8px;
  cursor: pointer;
  border-radius: 4px;
  transition: all 0.1s ease;
  font-size: 14px;
}

.btn-delete-position:hover {
  background: #fee2e2;
  color: #dc2626;
}

.btn-rfi {
  background: transparent;
  color: var(--slate-400);
  border: none;
  padding: 4px 8px;
  cursor: pointer;
  border-radius: 4px;
  transition: all 0.1s ease;
  font-size: 14px;
}

.btn-rfi:hover {
  background: var(--color-warning-soft);
  color: var(--color-warning);
}

.btn-rfi.has-rfi {
  color: var(--color-warning);
  background: var(--color-warning-soft);
}

/* ============================================
   ROW STATES
   ============================================ */

.table-row.error td {
  background: #fee2e2 !important;
  border-left: 3px solid #dc2626;
}

.table-row.saving td {
  opacity: 0.8;
  background: rgba(2, 132, 199, 0.05) !important;
  border-left: 3px solid var(--color-info);
}

/* ============================================
   SCROLLBAR
   ============================================ */

.table-wrapper::-webkit-scrollbar {
  height: 10px;
}

.table-wrapper::-webkit-scrollbar-track {
  background: var(--slate-100);
  border-radius: 4px;
}

.table-wrapper::-webkit-scrollbar-thumb {
  background: var(--slate-300);
  border-radius: 4px;
}

.table-wrapper::-webkit-scrollbar-thumb:hover {
  background: var(--slate-400);
}

/* ============================================
   RESPONSIVE
   ============================================ */

@media (max-width: 1200px) {
  .positions-table td,
  .positions-table th {
    padding: 8px 10px;
  }
}

/* ============================================
   TOTAL ROW (if used)
   ============================================ */

.total-row td {
  background: #ffffff;
  font-weight: 600;
  padding: 16px 12px;
  color: var(--slate-900);
  box-shadow: inset 0 2px 0 var(--slate-200); /* Top shadow instead of border */
}

.total-row td:first-child {
  font-weight: 700;
}

.total-main {
  font-size: var(--num-lg);
  font-weight: 700;
  color: var(--slate-900);
}

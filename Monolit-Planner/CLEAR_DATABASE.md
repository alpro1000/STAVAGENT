# –û—á–∏—Å—Ç–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üî¥ –í–ù–ò–ú–ê–ù–ò–ï: –≠—Ç–æ —É–¥–∞–ª–∏—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ!

---

## –í–∞—Ä–∏–∞–Ω—Ç 1: Production –ë–î (PostgreSQL –Ω–∞ Render)

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –ë–î

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://dashboard.render.com
2. –ù–∞–π–¥–∏—Ç–µ PostgreSQL —Å–µ—Ä–≤–∏—Å
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **External Database URL**
4. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å:

```bash
psql "postgresql://user:password@host:port/database"
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

```sql
-- –°–∫–æ–ª—å–∫–æ –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤ –ë–î?
SELECT COUNT(*) FROM monolith_projects;
SELECT COUNT(*) FROM bridges;
SELECT COUNT(*) FROM positions;

-- –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤
SELECT project_id, project_name, object_name FROM monolith_projects;
```

### –®–∞–≥ 3: –û—á–∏—Å—Ç–∏—Ç–µ –ë–î (–û–ü–ê–°–ù–û!)

```sql
-- –£–¥–∞–ª–∏—Ç—å –í–°–ï –¥–∞–Ω–Ω—ã–µ (COPY-PASTE –≤—Å—ë –≤–º–µ—Å—Ç–µ):
BEGIN;

DELETE FROM positions;
DELETE FROM parts;
DELETE FROM snapshots;
DELETE FROM bridges;
DELETE FROM monolith_projects;

COMMIT;
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

```sql
-- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 0 –≤–µ–∑–¥–µ:
SELECT COUNT(*) as projects FROM monolith_projects;
SELECT COUNT(*) as bridges FROM bridges;
SELECT COUNT(*) as positions FROM positions;
```

---

## –í–∞—Ä–∏–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω–∞—è –ë–î (SQLite)

### –®–∞–≥ 1: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç

```bash
cd Monolit-Planner/backend
node scripts/clear-all-projects.js
```

–°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç:
- –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ë–î (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π)
- –ü–æ–¥–æ–∂–¥—ë—Ç 3 —Å–µ–∫—É–Ω–¥—ã
- –£–¥–∞–ª–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
- –ü–æ–∫–∞–∂–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã "–î–∞–Ω–Ω—ã–µ –∏—Å—á–µ–∑–∞—é—Ç –ø–æ—Å–ª–µ F5"

–ï—Å–ª–∏ –ø–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞ Excel –¥–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è, –Ω–æ –ø–æ—Å–ª–µ F5 –∏—Å—á–µ–∑–∞—é—Ç - —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:

### –ü—Ä–æ–±–ª–µ–º–∞: –î–∞–Ω–Ω—ã–µ –ù–ï —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ backend –ª–æ–≥–∏ –Ω–∞ Render:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://dashboard.render.com
2. –ù–∞–π–¥–∏—Ç–µ Monolit-Planner API —Å–µ—Ä–≤–∏—Å
3. –û—Ç–∫—Ä–æ–π—Ç–µ "Logs"
4. –°–¥–µ–ª–∞–π—Ç–µ –∏–º–ø–æ—Ä—Ç Excel
5. –ò—â–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏:

```
[Upload] ‚úÖ Created bridge: SO12-20-01 "..." (...m¬≥)
[Upload] üöÄ Inserted 10 concrete positions for SO12-20-01
```

**–ï—Å–ª–∏ –ù–ï –≤–∏–¥–∏—Ç–µ —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏** ‚Üí –∏–º–ø–æ—Ä—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!

**–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫–∏:**
```
[ERROR] Failed to insert positions: ...
```
‚Üí –ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞ —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π –∏–ª–∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î

---

## üõ†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã

### 1. PostgreSQL connection timeout

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ò–º–ø–æ—Ä—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–µ—Ä–≤—ã–π —Ä–∞–∑
- –ü–æ—Å–ª–µ –ø–∞—É–∑—ã (~15 –º–∏–Ω) –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- –û—à–∏–±–∫–∞: "Connection terminated"

**–†–µ—à–µ–Ω–∏–µ:**
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend —Å–µ—Ä–≤–∏—Å –Ω–∞ Render
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Keep-Alive —Å–∏—Å—Ç–µ–º—É (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞)

### 2. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
```
[Upload] BEGIN transaction
[Upload] INSERT positions...
[Upload] ROLLBACK (error occurred)  ‚Üê –∏—â–∏—Ç–µ —ç—Ç–æ!
```

**–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ ROLLBACK** ‚Üí –µ—Å—Ç—å –æ—à–∏–±–∫–∞ –≤ INSERT –∑–∞–ø—Ä–æ—Å–µ

### 3. –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –¥—Ä—É–≥—É—é –ë–î

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é DATABASE_URL:**

```bash
# –ù–∞ Render Dashboard ‚Üí Environment
DATABASE_URL=postgresql://...
```

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π!

---

## üß™ –¢–µ—Å—Ç –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ –ë–î

1. –û—á–∏—Å—Ç–∏—Ç–µ –ë–î (—Å–º. –≤—ã—à–µ)
2. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5) ‚Üí —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **–ø—É—Å—Ç–æ–π**
3. –°–¥–µ–ª–∞–π—Ç–µ –∏–º–ø–æ—Ä—Ç Excel
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ backend –ª–æ–≥–∏** ‚Üí –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∏ —Å "Created bridge"
5. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
6. **–û–∂–∏–¥–∞–µ—Ç—Å—è:** –ü—Ä–æ–µ–∫—Ç—ã –≤—Å—ë –µ—â—ë –≤–∏–¥–Ω—ã ‚úÖ
7. **–ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:** –ü—Ä–æ–µ–∫—Ç—ã –∏—Å—á–µ–∑–ª–∏ ‚ùå

---

## üìû –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–ª–∞—Å—å

–û—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ:

1. **Backend –ª–æ–≥–∏** (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫ –ø–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞)
2. **–†–µ–∑—É–ª—å—Ç–∞—Ç SQL –∑–∞–ø—Ä–æ—Å–∞:**
```sql
SELECT project_id, project_name, object_name, concrete_m3
FROM monolith_projects
LIMIT 10;
```
3. **Frontend Console** (F12 ‚Üí Console) - –µ—Å—Ç—å –ª–∏ –æ—à–∏–±–∫–∏?

–Ø –ø–æ–º–æ–≥—É –Ω–∞–π—Ç–∏ –ø—Ä–∏—á–∏–Ω—É!

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

**–ù–ï** –æ—á–∏—â–∞–π—Ç–µ Production –ë–î –±–µ–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏!

**–°–¥–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø –ø–µ—Ä–µ–¥ –æ—á–∏—Å—Ç–∫–æ–π:**

```sql
-- PostgreSQL: Export to CSV
\copy monolith_projects TO '/tmp/monolith_projects_backup.csv' CSV HEADER;
\copy bridges TO '/tmp/bridges_backup.csv' CSV HEADER;
\copy positions TO '/tmp/positions_backup.csv' CSV HEADER;
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ CSV —Ñ–∞–π–ª—ã –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä!

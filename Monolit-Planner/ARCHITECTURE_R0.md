# Monolit-Planner Architecture R0: –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –Ø–¥—Ä–æ

**Version:** R0 (MVP - Minimum Viable Product)
**Date:** 2026-01-20
**Status:** üü° In Development

---

## üéØ –§–∏–ª–æ—Å–æ—Ñ–∏—è

> **"AI –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –Ø–¥—Ä–æ —Å—á–∏—Ç–∞–µ—Ç —Ü–∏—Ñ—Ä—ã"**

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å** - –û–¥–Ω–∏ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ‚Üí –≤—Å–µ–≥–¥–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
2. **–¢—Ä–∞—Å—Å–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ö–∞–∂–¥—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç `source_tag`, `confidence`, `assumptions_log`
3. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**:
   - ‚úÖ AI –º–æ–∂–µ—Ç: –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –≥–µ–æ–º–µ—Ç—Ä–∏—é, –Ω–æ—Ä–º—ã, —Ä–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —Ç–∞–∫—Ç—ã
   - ‚ùå AI –Ω–µ –º–æ–∂–µ—Ç: –ø–∏—Å–∞—Ç—å –∏—Ç–æ–≥–æ–≤—ã–µ —á–∞—Å—ã/—Å—Ç–æ–∏–º–æ—Å—Ç—å/—Å—Ä–æ–∫–∏
4. **–í–∞–ª–∏–¥–∞—Ü–∏—è** - –î–≤–∏–∂–æ–∫ –≤—ã—è–≤–ª—è–µ—Ç —É–∑–∫–∏–µ –º–µ—Å—Ç–∞ –∏ –æ—à–∏–±–∫–∏ (—Ç–∞–∫—Ç > —Å–º–µ–Ω—ã, –Ω–µ—Ö–≤–∞—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤)

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```mermaid
flowchart TB
    subgraph USER["üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"]
        INPUT[–í–≤–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞:<br/>–≥–µ–æ–º–µ—Ç—Ä–∏—è, –Ω–æ—Ä–º—ã, —Ä–µ—Å—É—Ä—Å—ã]
    end

    subgraph AI_LAYER["ü§ñ AI-–ü–†–û–†–ê–ë (–°–ª–æ–π 2)"]
        AI_SUGGEST[–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è AI:<br/>‚Ä¢ –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ Elements<br/>‚Ä¢ –†–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —Ç–∞–∫—Ç—ã<br/>‚Ä¢ –ü–æ–¥–±–æ—Ä –Ω–æ—Ä–º]
        AI_VALIDATE[–ê–Ω–∞–ª–∏–∑ AI:<br/>‚Ä¢ –£–∑–∫–∏–µ –º–µ—Å—Ç–∞<br/>‚Ä¢ Assumptions<br/>‚Ä¢ RFIs]

        AI_RULES["‚ö†Ô∏è –ó–ê–ü–†–ï–¢:<br/>AI –Ω–µ –ø–∏—à–µ—Ç –∏—Ç–æ–≥–æ–≤—ã–µ<br/>—á–∞—Å—ã/—Å—Ç–æ–∏–º–æ—Å—Ç—å/—Å—Ä–æ–∫–∏!"]
    end

    subgraph CORE["‚öôÔ∏è –î–ï–¢–ï–†–ú–ò–ù–ò–†–û–í–ê–ù–ù–û–ï –Ø–î–†–û (–°–ª–æ–π 1)"]
        direction TB

        DB[(Database:<br/>Elements, Norms,<br/>Captures, Tasks)]

        subgraph CALC["–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã"]
            REBAR[Rebar Calculator<br/>mass_t ‚Üí labor_hours]
            FORMWORK[Formwork Calculator<br/>area_m2 ‚Üí assembly/disassembly]
            CONCRETE[Concreting Calculator<br/>volume_m3 ‚Üí pour_hours]
        end

        SCHEDULER[Scheduling Engine<br/>Resource-constrained]
        COST[Cost Engine<br/>–¢—Ä–∞—Å—Å–∏—Ä—É–µ–º–æ—Å—Ç—å]

        DB --> CALC
        CALC --> SCHEDULER
        SCHEDULER --> COST
    end

    subgraph OUTPUT["üìä –†–µ–∑—É–ª—å—Ç–∞—Ç"]
        SCHEDULE[–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ<br/>—Å –∑–∞–Ω—è—Ç–æ—Å—Ç—å—é —Ä–µ—Å—É—Ä—Å–æ–≤]
        BUDGET[–°–º–µ—Ç–∞<br/>—Å —Ç—Ä–∞—Å—Å–∏—Ä—É–µ–º–æ—Å—Ç—å—é]
        WARNINGS[–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è<br/>–∏ —É–∑–∫–∏–µ –º–µ—Å—Ç–∞]
    end

    INPUT --> AI_SUGGEST
    AI_SUGGEST -.->|–¢–æ–ª—å–∫–æ –≤—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã| DB
    INPUT --> DB

    COST --> SCHEDULE
    COST --> BUDGET
    SCHEDULER --> WARNINGS

    WARNINGS --> AI_VALIDATE

    AI_RULES -.->|–ö–æ–Ω—Ç—Ä–æ–ª—å| AI_SUGGEST
    AI_RULES -.->|–ö–æ–Ω—Ç—Ä–æ–ª—å| AI_VALIDATE

    style CORE fill:#e8f5e9
    style AI_LAYER fill:#fff3e0
    style AI_RULES fill:#ffebee,stroke:#c62828,stroke-width:3px
    style USER fill:#e3f2fd
    style OUTPUT fill:#f3e5f5
```

---

## üìä –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

### 1. Projects (–ü—Ä–æ–µ–∫—Ç—ã)

–í–µ—Ä—Ö–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------|-----|----------|--------|
| `id` | TEXT | UUID –ø—Ä–æ–µ–∫—Ç–∞ | `"proj_123"` |
| `name` | TEXT | –ù–∞–∑–≤–∞–Ω–∏–µ | `"Most p≈ôes Biokoridor"` |
| `shift_hours` | REAL | –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–º–µ–Ω—ã | `10.0` |
| `time_utilization_k` | REAL | –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ | `0.80` (80%) |
| `oh_rate` | REAL | –ù–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã | `0.13` (13%) |
| `profit_rate` | REAL | –ü—Ä–∏–±—ã–ª—å | `0.08` (8%) |
| `reserve_rate` | REAL | –†–µ–∑–µ—Ä–≤ | `0.05` (5%) |

### 2. Elements (–§–∏–∑–∏—á–µ—Å–∫–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏)

–ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —á–∞—Å—Ç–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: –ø–ª–∏—Ç—ã, —Å—Ç–µ–Ω—ã, –±–∞–ª–∫–∏, —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç—ã, –∫–æ–ª–æ–Ω–Ω—ã.

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------|-----|----------|--------|
| `id` | TEXT | UUID —ç–ª–µ–º–µ–Ω—Ç–∞ | `"elem_slab_01"` |
| `project_id` | TEXT | FK ‚Üí projects | `"proj_123"` |
| `type` | TEXT | –¢–∏–ø —ç–ª–µ–º–µ–Ω—Ç–∞ | `"slab"` / `"wall"` / `"beam"` |
| `name` | TEXT | –ù–∞–∑–≤–∞–Ω–∏–µ | `"Deska nad 1. NP"` |
| **–ì–µ–æ–º–µ—Ç—Ä–∏—è** | | | |
| `length_m` | REAL | –î–ª–∏–Ω–∞ (–º) | `20.5` |
| `width_m` | REAL | –®–∏—Ä–∏–Ω–∞ (–º) | `8.0` |
| `height_m` | REAL | –í—ã—Å–æ—Ç–∞ (–º) | `3.5` |
| `thickness_m` | REAL | –¢–æ–ª—â–∏–Ω–∞ (–º) | `0.25` |
| **–ö–æ–ª–∏—á–µ—Å—Ç–≤–∞** | | | |
| `concrete_volume_m3` | REAL | –û–±—ä—ë–º –±–µ—Ç–æ–Ω–∞ (–º¬≥) | `41.0` |
| `formwork_area_m2` | REAL | –ü–ª–æ—â–∞–¥—å –æ–ø–∞–ª—É–±–∫–∏ (–º¬≤) | `164.0` |
| `rebar_mass_t` | REAL | –ú–∞—Å—Å–∞ –∞—Ä–º–∞—Ç—É—Ä—ã (—Ç) | `4.1` |
| **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è** | | | |
| `max_continuous_pour_hours` | REAL | –ú–∞–∫—Å. –æ–∫–Ω–æ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ—Å—Ç–∏ (—á) | `12.0` |
| `layer_thickness_m` | REAL | –¢–æ–ª—â–∏–Ω–∞ —Å–ª–æ—è –ø—Ä–∏ –ø–æ—Å–ª–æ–π–Ω–æ–º (–º) | `0.5` |

**–¢–∏–ø—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤:**
- `slab` - –ø–ª–∏—Ç–∞ (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è)
- `wall` - —Å—Ç–µ–Ω–∞ (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è)
- `beam` - –±–∞–ª–∫–∞ (–ª–∏–Ω–µ–π–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç)
- `footing` - —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç
- `column` - –∫–æ–ª–æ–Ω–Ω–∞

### 3. NormSets (–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–æ—Ä–º)

–ù–∞–±–æ—Ä—ã –Ω–æ—Ä–º–∞—Ç–∏–≤–æ–≤ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------|-----|----------|--------|
| `id` | TEXT | UUID –Ω–∞–±–æ—Ä–∞ –Ω–æ—Ä–º | `"norm_urs_2024"` |
| `name` | TEXT | –ù–∞–∑–≤–∞–Ω–∏–µ | `"√öRS 2024"` |
| `source_tag` | TEXT | –ò—Å—Ç–æ—á–Ω–∏–∫ (–¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä—É–µ–º–æ—Å—Ç–∏) | `"URS_2024_OFFICIAL"` |
| **–ù–æ—Ä–º—ã –Ω–∞ –∞—Ä–º–∞—Ç—É—Ä—É** | | | |
| `rebar_h_per_t` | REAL | –ß–∞—Å–æ–≤ –Ω–∞ 1 —Ç–æ–Ω–Ω—É | `50.0` |
| **–ù–æ—Ä–º—ã –Ω–∞ –æ–ø–∞–ª—É–±–∫—É** | | | |
| `formwork_assembly_h_per_m2` | REAL | –ú–æ–Ω—Ç–∞–∂ —á–∞—Å–æ–≤/–º¬≤ | `0.8` |
| `formwork_disassembly_h_per_m2` | REAL | –î–µ–º–æ–Ω—Ç–∞–∂ —á–∞—Å–æ–≤/–º¬≤ | `0.3` |
| **–ù–æ—Ä–º—ã –Ω–∞ –±–µ—Ç–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** | | | |
| `pour_team_required` | INTEGER | –†–∞–∑–º–µ—Ä –±—Ä–∏–≥–∞–¥—ã | `6` |
| `pour_setup_hours` | REAL | –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (—á) | `0.5` |
| `washout_hours` | REAL | –ü—Ä–æ–º—ã–≤–∫–∞ (—á) | `0.5` |
| `strip_wait_hours` | REAL | –í—ã–¥–µ—Ä–∂–∫–∞ –¥–æ —Ä–∞—Å–ø–∞–ª—É–±–∫–∏ (—á) | `72.0` (3 —Å—É—Ç–æ–∫) |

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –Ω–æ—Ä–º:**
- `URS_2024_OFFICIAL` - –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–æ—Ä–º—ã √öRS 2024
- `RTS_2023` - –†–æ—Å—Å–∏–π—Å–∫–∏–µ –¢–°–ù
- `KROS_2024` - –ß–µ—à—Å–∫–∏–µ –Ω–æ—Ä–º—ã KROS
- `INTERNAL_MEASURED` - –ò–∑–º–µ—Ä–µ–Ω–Ω—ã–µ –Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞—Ö –∫–æ–º–ø–∞–Ω–∏–∏
- `AI_PROPOSED` - –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–æ AI (—Ç—Ä–µ–±—É–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏)

### 4. Captures (–ó–∞—Ö–≤–∞—Ç–∫–∏/–¢–∞–∫—Ç—ã)

–†–∞–∑–±–∏–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —á–∞—Å—Ç–∏ –¥–ª—è –ø–æ—ç—Ç–∞–ø–Ω–æ–≥–æ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞.

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------|-----|----------|--------|
| `id` | TEXT | UUID –∑–∞—Ö–≤–∞—Ç–∫–∏ | `"capt_01"` |
| `element_id` | TEXT | FK ‚Üí elements | `"elem_slab_01"` |
| `sequence_index` | INTEGER | –ü–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä | `1` (–ø–µ—Ä–≤–∞—è –∑–∞—Ö–≤–∞—Ç–∫–∞) |
| **–ö–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞—Ö–≤–∞—Ç–∫–∏** | | | |
| `volume_m3` | REAL | –û–±—ä—ë–º –±–µ—Ç–æ–Ω–∞ (–º¬≥) | `20.5` |
| `area_m2` | REAL | –ü–ª–æ—â–∞–¥—å –æ–ø–∞–ª—É–±–∫–∏ (–º¬≤) | `82.0` |
| `mass_t` | REAL | –ú–∞—Å—Å–∞ –∞—Ä–º–∞—Ç—É—Ä—ã (—Ç) | `2.05` |
| **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ** | | | |
| `joint_type` | TEXT | –¢–∏–ø —Å—Ç—ã–∫–∞ | `"construction_joint"` |
| `dependencies` | TEXT | JSON –º–∞—Å—Å–∏–≤ predecessor ID | `["capt_00"]` |

**–¢–∏–ø—ã —Å—Ç—ã–∫–æ–≤:**
- `none` - –Ω–µ—Ç —Å—Ç—ã–∫–∞ (–µ–¥–∏–Ω—ã–π –º–∞—Å—Å–∏–≤)
- `construction_joint` - —Ä–∞–±–æ—á–∏–π —à–æ–≤
- `expansion_joint` - –¥–µ—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π —à–æ–≤

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (dependencies):**
–ú–∞—Å—Å–∏–≤ ID –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∑–∞—Ö–≤–∞—Ç–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è –¥–æ –Ω–∞—á–∞–ª–∞ —Ç–µ–∫—É—â–µ–π.

```json
{
  "dependencies": ["capt_00", "capt_01"]
}
```

### 5. Tasks (–û–ø–µ—Ä–∞—Ü–∏–∏)

–ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ –∑–∞–¥–∞—á–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞—Ö–≤–∞—Ç–∫–∏.

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------|-----|----------|--------|
| `id` | TEXT | UUID –∑–∞–¥–∞—á–∏ | `"task_rebar_01"` |
| `capture_id` | TEXT | FK ‚Üí captures | `"capt_01"` |
| `type` | TEXT | –¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏ | `"rebar"` |
| `sequence` | INTEGER | –ü–æ—Ä—è–¥–æ–∫ –≤ –∑–∞—Ö–≤–∞—Ç–∫–µ | `1` |
| **–†–∞—Å—á—ë—Ç–Ω—ã–µ –ø–æ–ª—è (–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ!)** | | | |
| `duration_hours` | REAL | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—á) | `102.5` |
| `labor_hours` | REAL | –¢—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã (—á) | `102.5` |
| `cost_labor` | REAL | –°—Ç–æ–∏–º–æ—Å—Ç—å —Ç—Ä—É–¥–∞ (CZK) | `40,795` |
| `cost_machine` | REAL | –°—Ç–æ–∏–º–æ—Å—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ (CZK) | `5,000` |
| **–¢—Ä–∞—Å—Å–∏—Ä—É–µ–º–æ—Å—Ç—å** | | | |
| `source_tag` | TEXT | –ò—Å—Ç–æ—á–Ω–∏–∫ –Ω–æ—Ä–º—ã | `"URS_2024_OFFICIAL"` |
| `confidence` | REAL | –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å (0-1) | `0.95` |
| `assumptions_log` | TEXT | –î–æ–ø—É—â–µ–Ω–∏—è | `"norm=50 h/t, crew=4, k=0.8"` |

**–¢–∏–ø—ã –æ–ø–µ—Ä–∞—Ü–∏–π (type):**
1. `rebar` - –≤—è–∑–∫–∞ –∞—Ä–º–∞—Ç—É—Ä—ã
2. `formwork_in` - –º–æ–Ω—Ç–∞–∂ –æ–ø–∞–ª—É–±–∫–∏
3. `pour` - –±–µ—Ç–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
4. `wait_strip` - –≤—ã–¥–µ—Ä–∂–∫–∞ –¥–æ —Ä–∞—Å–ø–∞–ª—É–±–∫–∏ (—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –ø–∞—É–∑–∞)
5. `formwork_out` - –¥–µ–º–æ–Ω—Ç–∞–∂ –æ–ø–∞–ª—É–±–∫–∏
6. `move_clean` - –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –æ—á–∏—Å—Ç–∫–∞ –∫–æ–º–ø–ª–µ–∫—Ç–æ–≤

**–¢–∏–ø–∏—á–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π –¥–ª—è –æ–¥–Ω–æ–π –∑–∞—Ö–≤–∞—Ç–∫–∏:**
```
1. rebar (sequence=1)
2. formwork_in (sequence=2)
3. pour (sequence=3)
4. wait_strip (sequence=4) ‚Üê —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –ø–∞—É–∑–∞ 72—á
5. formwork_out (sequence=5)
6. move_clean (sequence=6)
```

### 6. Schedule (–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ)

–†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã Scheduling Engine - –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–π –ø–ª–∞–Ω —Å —Ä–µ—Å—É—Ä—Å–∞–º–∏.

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------|-----|----------|--------|
| `task_id` | TEXT | FK ‚Üí tasks | `"task_rebar_01"` |
| `start_day` | REAL | –î–µ–Ω—å –Ω–∞—á–∞–ª–∞ | `5.0` |
| `end_day` | REAL | –î–µ–Ω—å –æ–∫–æ–Ω—á–∞–Ω–∏—è | `6.28` |
| `resources_used` | TEXT | JSON —Å —Ä–µ—Å—É—Ä—Å–∞–º–∏ | `{"crew_id": "crew_A", "kit_id": "k1"}` |

**–ü—Ä–∏–º–µ—Ä resources_used JSON:**
```json
{
  "crew_id": "crew_rebar_01",
  "crew_size": 4,
  "kit_id": "formwork_kit_A",
  "pump_id": "pump_01"
}
```

---

## ‚öôÔ∏è –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã (–î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏)

### 1. Rebar Calculator

**–í—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```typescript
interface RebarCalculatorParams {
  mass_t: number;               // –ú–∞—Å—Å–∞ –∞—Ä–º–∞—Ç—É—Ä—ã (—Ç)
  norm_h_per_t: number;         // –ù–æ—Ä–º–∞ —á–∞—Å–æ–≤ –Ω–∞ 1 —Ç–æ–Ω–Ω—É
  crew_size: number;            // –†–∞–∑–º–µ—Ä –±—Ä–∏–≥–∞–¥—ã
  shift_h: number;              // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–º–µ–Ω—ã (—á)
  k: number;                    // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
  wage_czk_h: number;           // –°—Ç–∞–≤–∫–∞ (CZK/—á)
  source_tag?: string;          // –ò—Å—Ç–æ—á–Ω–∏–∫ –Ω–æ—Ä–º—ã
  confidence?: number;          // –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å (0-1)
}
```

**–§–æ—Ä–º—É–ª—ã:**
```
labor_hours = mass_t √ó norm_h_per_t
duration_days = labor_hours / (crew_size √ó shift_h √ó k)
cost_labor = labor_hours √ó wage_czk_h
```

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```typescript
interface RebarCalculatorResult {
  labor_hours: number;          // –¢—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç—ã (—á)
  duration_days: number;        // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–¥–Ω–∏)
  cost_labor: number;           // –°—Ç–æ–∏–º–æ—Å—Ç—å —Ç—Ä—É–¥–∞ (CZK)

  // –¢—Ä–∞—Å—Å–∏—Ä—É–µ–º–æ—Å—Ç—å
  source_tag: string;           // "URS_2024_OFFICIAL"
  assumptions_log: string;      // "norm=50 h/t, crew=4, k=0.8"
  confidence: number;           // 0.95
}
```

**–ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á—ë—Ç–∞:**
```
–î–∞–Ω–æ: 2.05—Ç –∞—Ä–º–∞—Ç—É—Ä—ã, –Ω–æ—Ä–º–∞ 50—á/—Ç, –±—Ä–∏–≥–∞–¥–∞ 4 —á–µ–ª, —Å–º–µ–Ω–∞ 10—á, k=0.8, —Å—Ç–∞–≤–∫–∞ 398 CZK/—á

labor_hours = 2.05 √ó 50 = 102.5 —á
duration_days = 102.5 / (4 √ó 10 √ó 0.8) = 3.20 –¥–Ω—è
cost_labor = 102.5 √ó 398 = 40,795 CZK
```

---

### 2. Formwork Calculator

**–í—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```typescript
interface FormworkCalculatorParams {
  area_m2: number;              // –ü–ª–æ—â–∞–¥—å –æ–ø–∞–ª—É–±–∫–∏ (–º¬≤)
  norm_assembly_h_m2: number;   // –ù–æ—Ä–º–∞ –º–æ–Ω—Ç–∞–∂–∞ (—á/–º¬≤)
  norm_disassembly_h_m2: number; // –ù–æ—Ä–º–∞ –¥–µ–º–æ–Ω—Ç–∞–∂–∞ (—á/–º¬≤)
  crew_size: number;            // –†–∞–∑–º–µ—Ä –±—Ä–∏–≥–∞–¥—ã
  shift_h: number;              // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–º–µ–Ω—ã (—á)
  k: number;                    // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
  wage_czk_h: number;           // –°—Ç–∞–≤–∫–∞ (CZK/—á)

  // –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
  strip_wait_hours: number;     // –í—ã–¥–µ—Ä–∂–∫–∞ –¥–æ —Ä–∞—Å–ø–∞–ª—É–±–∫–∏ (—á)
  move_clean_hours: number;     // –ü–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –æ—á–∏—Å—Ç–∫–∞ (—á)

  // –†–µ—Å—É—Ä—Å—ã
  kits_count: number;           // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–ø–ª–µ–∫—Ç–æ–≤ –æ–ø–∞–ª—É–±–∫–∏
  rental_czk_day: number;       // –ê—Ä–µ–Ω–¥–∞ –∫–æ–º–ø–ª–µ–∫—Ç–∞ (CZK/–¥–µ–Ω—å)

  source_tag?: string;
  confidence?: number;
}
```

**–§–æ—Ä–º—É–ª—ã:**
```
assembly_hours = area_m2 √ó norm_assembly_h_m2
disassembly_hours = area_m2 √ó norm_disassembly_h_m2

assembly_days = assembly_hours / (crew_size √ó shift_h √ó k)
disassembly_days = disassembly_hours / (crew_size √ó shift_h √ó k)
wait_days = strip_wait_hours / shift_h

kit_occupancy_days = assembly_days + wait_days + disassembly_days + (move_clean_hours / shift_h)
```

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```typescript
interface FormworkCalculatorResult {
  assembly_hours: number;       // –ú–æ–Ω—Ç–∞–∂ (—á)
  disassembly_hours: number;    // –î–µ–º–æ–Ω—Ç–∞–∂ (—á)
  assembly_days: number;        // –ú–æ–Ω—Ç–∞–∂ (–¥–Ω–∏)
  disassembly_days: number;     // –î–µ–º–æ–Ω—Ç–∞–∂ (–¥–Ω–∏)
  kit_occupancy_days: number;   // –ó–∞–Ω—è—Ç–æ—Å—Ç—å –∫–æ–º–ø–ª–µ–∫—Ç–∞ (–¥–Ω–∏)

  cost_labor: number;           // –°—Ç–æ–∏–º–æ—Å—Ç—å —Ç—Ä—É–¥–∞ (CZK)
  // –í–ê–ñ–ù–û: cost_rental —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤ Schedule Engine –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–∞–ª–µ–Ω–¥–∞—Ä—è!

  source_tag: string;
  assumptions_log: string;
  confidence: number;
}
```

**–ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á—ë—Ç–∞:**
```
–î–∞–Ω–æ: 82–º¬≤ –æ–ø–∞–ª—É–±–∫–∏, –Ω–æ—Ä–º–∞ –º–æ–Ω—Ç–∞–∂ 0.8—á/–º¬≤, –¥–µ–º–æ–Ω—Ç–∞–∂ 0.3—á/–º¬≤, –±—Ä–∏–≥–∞–¥–∞ 4 —á–µ–ª,
      —Å–º–µ–Ω–∞ 10—á, k=0.8, —Å—Ç–∞–≤–∫–∞ 398 CZK/—á, –≤—ã–¥–µ—Ä–∂–∫–∞ 72—á, –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∞ 2—á

assembly_hours = 82 √ó 0.8 = 65.6 —á
disassembly_hours = 82 √ó 0.3 = 24.6 —á

assembly_days = 65.6 / (4 √ó 10 √ó 0.8) = 2.05 –¥–Ω—è
disassembly_days = 24.6 / (4 √ó 10 √ó 0.8) = 0.77 –¥–Ω—è
wait_days = 72 / 10 = 7.2 –¥–Ω—è

kit_occupancy_days = 2.05 + 7.2 + 0.77 + (2 / 10) = 10.22 –¥–Ω—è

cost_labor = (65.6 + 24.6) √ó 398 = 35,900 CZK
```

---

### 3. Concreting (Pump) Calculator

**–í—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```typescript
interface ConcretingCalculatorParams {
  volume_m3: number;            // –û–±—ä—ë–º –±–µ—Ç–æ–Ω–∞ (–º¬≥)
  q_eff_m3_h: number;           // –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞—Å–æ—Å–∞ (–º¬≥/—á)
  setup_hours: number;          // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (—á)
  washout_hours: number;        // –ü—Ä–æ–º—ã–≤–∫–∞ (—á)
  crew_size: number;            // –†–∞–∑–º–µ—Ä –±—Ä–∏–≥–∞–¥—ã
  shift_h: number;              // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–º–µ–Ω—ã (—á)
  wage_czk_h: number;           // –°—Ç–∞–≤–∫–∞ (CZK/—á)
  pump_rate_czk_h: number;      // –°—Ç–æ–∏–º–æ—Å—Ç—å –Ω–∞—Å–æ—Å–∞ (CZK/—á)

  // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
  max_continuous_hours: number; // –ú–∞–∫—Å. –æ–∫–Ω–æ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ—Å—Ç–∏ (—á)

  source_tag?: string;
  confidence?: number;
}
```

**–§–æ—Ä–º—É–ª—ã:**
```
pour_hours = setup_hours + (volume_m3 / q_eff_m3_h) + washout_hours
pour_days = pour_hours / shift_h

cost_labor = pour_hours √ó crew_size √ó wage_czk_h
cost_pump = pour_hours √ó pump_rate_czk_h

// –í–ê–õ–ò–î–ê–¶–ò–Ø
exceeds_continuous = pour_hours > max_continuous_hours
```

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```typescript
interface ConcretingCalculatorResult {
  pour_hours: number;           // –í—Ä–µ–º—è –±–µ—Ç–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (—á)
  pour_days: number;            // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–¥–Ω–∏)
  cost_labor: number;           // –°—Ç–æ–∏–º–æ—Å—Ç—å —Ç—Ä—É–¥–∞ (CZK)
  cost_pump: number;            // –°—Ç–æ–∏–º–æ—Å—Ç—å –Ω–∞—Å–æ—Å–∞ (CZK)

  // –í–∞–ª–∏–¥–∞—Ü–∏—è
  exceeds_continuous_window: boolean; // true –µ—Å–ª–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–æ –æ–∫–Ω–æ
  warning: string | null;       // –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –∏–ª–∏ null

  source_tag: string;
  assumptions_log: string;
  confidence: number;
}
```

**–ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á—ë—Ç–∞:**
```
–î–∞–Ω–æ: 20.5–º¬≥ –±–µ—Ç–æ–Ω–∞, Q_eff=15–º¬≥/—á, –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ 0.5—á, –ø—Ä–æ–º—ã–≤–∫–∞ 0.5—á,
      –±—Ä–∏–≥–∞–¥–∞ 6 —á–µ–ª, —Å–º–µ–Ω–∞ 10—á, —Å—Ç–∞–≤–∫–∞ 398 CZK/—á, –Ω–∞—Å–æ—Å 1500 CZK/—á,
      –º–∞–∫—Å. –æ–∫–Ω–æ 12—á

pour_hours = 0.5 + (20.5 / 15) + 0.5 = 2.37 —á
pour_days = 2.37 / 10 = 0.24 –¥–Ω—è

cost_labor = 2.37 √ó 6 √ó 398 = 5,659 CZK
cost_pump = 2.37 √ó 1500 = 3,555 CZK

exceeds_continuous = 2.37 > 12 ‚Üí false ‚úÖ
warning = null
```

---

## üóìÔ∏è Scheduling Engine

### –ê–ª–≥–æ—Ä–∏—Ç–º: Serial Resource-Constrained Scheduling

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á (tasks) —Å –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—è–º–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã (–±—Ä–∏–≥–∞–¥—ã, –∫–æ–º–ø–ª–µ–∫—Ç—ã –æ–ø–∞–ª—É–±–∫–∏, –Ω–∞—Å–æ—Å)
- –ö–∞–ª–µ–Ω–¥–∞—Ä—å (—Ä–∞–±–æ—á–∏–µ/–Ω–µ—Ä–∞–±–æ—á–∏–µ –¥–Ω–∏)

**–ê–ª–≥–æ—Ä–∏—Ç–º:**

1. **–¢–æ–ø–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞** –∑–∞–¥–∞—á –ø–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º (predecessors)
2. –î–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏:
   - –í—ã—á–∏—Å–ª–∏—Ç—å `earliest_start` = max(finish predecessors, resource availability)
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ç—Ä–µ–±—É–µ–º—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
   - –ù–∞–∑–Ω–∞—á–∏—Ç—å –∑–∞–¥–∞—á—É –Ω–∞ `earliest_start`
   - –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–Ω—è—Ç–æ—Å—Ç—å —Ä–µ—Å—É—Ä—Å–æ–≤
3. –í—ã—á–∏—Å–ª–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å (Critical Path)
4. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —É–∑–∫–∏–µ –º–µ—Å—Ç–∞ (bottlenecks)

**–ü—Å–µ–≤–¥–æ–∫–æ–¥:**

```typescript
function scheduleProject(tasks: Task[], resources: Resources, calendar: Calendar): Schedule[] {
  const schedule: Schedule[] = [];
  const resourceAvailability: Map<string, Availability> = new Map();

  // 1. –¢–æ–ø–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
  const sortedTasks = topologicalSort(tasks);

  for (const task of sortedTasks) {
    // 2. Earliest start = max(predecessors finish, resource available)
    let earliestStart = 0;

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º predecessors
    for (const predId of task.predecessors || []) {
      const pred = schedule.find(s => s.task_id === predId);
      if (pred) {
        earliestStart = Math.max(earliestStart, pred.end_day);
      }
    }

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ—Å—É—Ä—Å—ã (–Ω–∞—Å–æ—Å, –±—Ä–∏–≥–∞–¥—ã, –∫–æ–º–ø–ª–µ–∫—Ç—ã)
    earliestStart = findResourceAvailability(
      earliestStart,
      task.required_resources,
      resourceAvailability,
      calendar
    );

    const endDay = earliestStart + task.duration_days;

    // 3. –ù–∞–∑–Ω–∞—á–∞–µ–º –∑–∞–¥–∞—á—É
    schedule.push({
      task_id: task.id,
      start_day: earliestStart,
      end_day: endDay,
      resources_used: task.required_resources
    });

    // 4. –û–±–Ω–æ–≤–ª—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ä–µ—Å—É—Ä—Å–æ–≤
    updateResourceAvailability(
      earliestStart,
      endDay,
      task.required_resources,
      resourceAvailability
    );
  }

  return schedule;
}
```

**–ü—Ä–∏–º–µ—Ä:**

–î–∞–Ω–æ 2 –∑–∞—Ö–≤–∞—Ç–∫–∏, –∫–∞–∂–¥–∞—è —Å 6 –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏:

```
Capture 1:
  T1: rebar (3.2 –¥–Ω—è)
  T2: formwork_in (2.05 –¥–Ω—è) ‚Üí depends on T1
  T3: pour (0.24 –¥–Ω—è) ‚Üí depends on T2
  T4: wait_strip (7.2 –¥–Ω—è) ‚Üí depends on T3
  T5: formwork_out (0.77 –¥–Ω—è) ‚Üí depends on T4
  T6: move_clean (0.2 –¥–Ω—è) ‚Üí depends on T5

Capture 2:
  T7: rebar (3.2 –¥–Ω—è) ‚Üí depends on T1 (—Ç–∞ –∂–µ –±—Ä–∏–≥–∞–¥–∞)
  T8: formwork_in (2.05 –¥–Ω—è) ‚Üí depends on T7, T6 (–Ω—É–∂–µ–Ω –æ—Å–≤–æ–±–æ–¥–∏–≤—à–∏–π—Å—è –∫–æ–º–ø–ª–µ–∫—Ç!)
  ...
```

**–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ:**

| Task | Type | Start | End | Duration | Dependencies | Resource |
|------|------|-------|-----|----------|--------------|----------|
| T1 | rebar | 0.0 | 3.2 | 3.2 | - | crew_rebar |
| T2 | formwork_in | 3.2 | 5.25 | 2.05 | T1 | crew_form, kit_A |
| T3 | pour | 5.25 | 5.49 | 0.24 | T2 | crew_pour, pump |
| T4 | wait_strip | 5.49 | 12.69 | 7.2 | T3 | kit_A (–∑–∞–Ω—è—Ç!) |
| T5 | formwork_out | 12.69 | 13.46 | 0.77 | T4 | crew_form, kit_A |
| T6 | move_clean | 13.46 | 13.66 | 0.2 | T5 | kit_A |
| T7 | rebar | 3.2 | 6.4 | 3.2 | T1 | crew_rebar |
| T8 | formwork_in | **13.66** | 15.71 | 2.05 | T7, T6 | crew_form, kit_A (–æ—Å–≤–æ–±–æ–¥–∏–ª—Å—è!) |
| ... | ... | ... | ... | ... | ... | ... |

**–ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç:** T8 (–º–æ–Ω—Ç–∞–∂ –æ–ø–∞–ª—É–±–∫–∏ –∑–∞—Ö–≤–∞—Ç–∫–∏ 2) –Ω–µ –º–æ–∂–µ—Ç –Ω–∞—á–∞—Ç—å—Å—è –ø–æ–∫–∞:
1. –ó–∞–≤–µ—Ä—à–∏—Ç—Å—è T7 (–∞—Ä–º–∞—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞)
2. –û—Å–≤–æ–±–æ–¥–∏—Ç—Å—è –∫–æ–º–ø–ª–µ–∫—Ç kit_A (T6 –∑–∞–≤–µ—Ä—à—ë–Ω)

**–ò—Ç–æ–≥–æ:** –ü—Ä–æ–µ–∫—Ç –∑–∞–π–º—ë—Ç ~27 –¥–Ω–µ–π (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å —á–µ—Ä–µ–∑ –≤—ã–¥–µ—Ä–∂–∫–∏ –±–µ—Ç–æ–Ω–∞).

---

## üí∞ Cost Engine

### –¢—Ä–∞—Å—Å–∏—Ä—É–µ–º–æ—Å—Ç—å –∑–∞—Ç—Ä–∞—Ç

–ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ —Å–º–µ—Ç—ã —Å–æ–¥–µ—Ä–∂–∏—Ç:

```typescript
interface CostLineItem {
  task_id: string;              // –°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–¥–∞—á—É
  capture_id: string;           // –°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞—Ö–≤–∞—Ç–∫—É
  element_id: string;           // –°—Å—ã–ª–∫–∞ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç

  description: string;          // "–í—è–∑–∫–∞ –∞—Ä–º–∞—Ç—É—Ä—ã, Deska nad 1. NP, –¢–∞–∫—Ç 1"
  quantity: number;             // 2.05 —Ç
  unit: string;                 // "t"
  unit_cost: number;            // 19,900 CZK/—Ç
  total_cost: number;           // 40,795 CZK

  // –¢—Ä–∞—Å—Å–∏—Ä—É–µ–º–æ—Å—Ç—å
  source_tag: string;           // "URS_2024_OFFICIAL"
  norm_used: string;            // "50 h/t"
  assumptions: string;          // "crew=4, k=0.8, wage=398 CZK/h"
  confidence: number;           // 0.95

  // –ö–∞—Ç–µ–≥–æ—Ä–∏—è
  cost_type: string;            // "labor" / "machine" / "material" / "rental"
}
```

**–ü—Ä–∏–º–µ—Ä —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –°—Ç—Ä–æ–∫–∞ —Å–º–µ—Ç—ã: –í—è–∑–∫–∞ –∞—Ä–º–∞—Ç—É—Ä—ã, Deska nad 1. NP, –¢–∞–∫—Ç 1      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 2.05 —Ç √ó 19,900 CZK/—Ç = 40,795 CZK             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –ò—Å—Ç–æ—á–Ω–∏–∫: URS_2024_OFFICIAL                                 ‚îÇ
‚îÇ –ù–æ—Ä–º–∞: 50 h/t                                               ‚îÇ
‚îÇ –î–æ–ø—É—â–µ–Ω–∏—è: crew=4, k=0.8, shift=10h, wage=398 CZK/h        ‚îÇ
‚îÇ –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 95%                                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –†–∞—Å—á—ë—Ç:                                                     ‚îÇ
‚îÇ   labor_hours = 2.05 √ó 50 = 102.5 h                         ‚îÇ
‚îÇ   cost = 102.5 √ó 398 = 40,795 CZK                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–≠–∫—Å–ø–æ—Ä—Ç –≤ Excel:** –ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ —Å–º–µ—Ç—ã —Å –≥–∏–ø–µ—Ä—Å—Å—ã–ª–∫–æ–π –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫ –Ω–æ—Ä–º—ã –∏ –ª–æ–≥–æ–º –¥–æ–ø—É—â–µ–Ω–∏–π.

---

## üö® –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —É–∑–∫–∏–µ –º–µ—Å—Ç–∞

### Rule-Based –ø—Ä–æ–≤–µ—Ä–∫–∏

```typescript
function analyzeBottlenecks(schedule: Schedule[], resources: Resources): Issue[] {
  const issues: Issue[] = [];

  // 1. –¢–∞–∫—Ç –ø—Ä–µ–≤—ã—à–∞–µ—Ç —Å–º–µ–Ω—É?
  for (const task of schedule) {
    if (task.type === 'pour' && task.duration_hours > resources.shift_hours) {
      issues.push({
        type: 'POUR_EXCEEDS_SHIFT',
        severity: 'WARNING',
        task_id: task.task_id,
        message: `–ë–µ—Ç–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ${task.capture_id}: ${task.duration_hours.toFixed(1)}—á > —Å–º–µ–Ω—ã ${resources.shift_hours}—á`,
        suggestion: '–†–∞–∑–±–∏—Ç—å –Ω–∞ 2 —Ç–∞–∫—Ç–∞ –∏–ª–∏ —É–≤–µ–ª–∏—á–∏—Ç—å Q_eff –Ω–∞—Å–æ—Å–∞'
      });
    }
  }

  // 2. –ö–æ–º–ø–ª–µ–∫—Ç—ã –æ–ø–∞–ª—É–±–∫–∏ ‚Äî —É–∑–∫–æ–µ –º–µ—Å—Ç–æ?
  const kitUtilization = calculateKitUtilization(schedule, resources.kits_count);
  if (kitUtilization > 0.9) {
    issues.push({
      type: 'FORMWORK_BOTTLENECK',
      severity: 'INFO',
      message: `–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–º–ø–ª–µ–∫—Ç–æ–≤ –æ–ø–∞–ª—É–±–∫–∏ ${(kitUtilization * 100).toFixed(0)}%`,
      suggestion: '–ü—Ä–∏ k=1 –∫–∞–ª–µ–Ω–¥–∞—Ä—å –∑–∞–¥–∞—ë—Ç –≤—ã–¥–µ—Ä–∂–∫–∞+–ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∞. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å k=2.'
    });
  }

  // 3. –ù–∞—Å–æ—Å –±—ã—Å—Ç—Ä–µ–µ –±—Ä–∏–≥–∞–¥—ã?
  const pumpUtilization = calculatePumpUtilization(schedule);
  if (pumpUtilization < 0.3) {
    issues.push({
      type: 'PUMP_UNDERUTILIZED',
      severity: 'INFO',
      message: `–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å–æ—Å–∞ ${(pumpUtilization * 100).toFixed(0)}%`,
      suggestion: '–ù–∞—Å–æ—Å –ø—Ä–æ—Å—Ç–∞–∏–≤–∞–µ—Ç. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –º–µ–Ω—å—à—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–ª–∏ —Å–æ–≤–º–µ—â–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤.'
    });
  }

  // 4. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –≤—ã–¥–µ—Ä–∂–∫—É –±–µ—Ç–æ–Ω–∞?
  const criticalPath = findCriticalPath(schedule);
  const waitTasks = criticalPath.filter(t => t.type === 'wait_strip');
  if (waitTasks.length > 0) {
    issues.push({
      type: 'WAITING_ON_CRITICAL_PATH',
      severity: 'INFO',
      message: `${waitTasks.length} –≤—ã–¥–µ—Ä–∂–µ–∫ –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º –ø—É—Ç–∏ (–∏—Ç–æ–≥–æ ${waitTasks.reduce((sum, t) => sum + t.duration_days, 0).toFixed(1)} –¥–Ω–µ–π)`,
      suggestion: '–†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ–≤–º–µ—â–µ–Ω–∏–µ —Ä–∞–±–æ—Ç –Ω–∞ –¥—Ä—É–≥–∏—Ö –∑–∞—Ö–≤–∞—Ç–∫–∞—Ö.'
    });
  }

  return issues;
}
```

**–¢–∏–ø—ã —É–∑–∫–∏—Ö –º–µ—Å—Ç:**

| –ö–æ–¥ | Severity | –û–ø–∏—Å–∞–Ω–∏–µ | –†–µ—à–µ–Ω–∏–µ |
|-----|----------|----------|---------|
| `POUR_EXCEEDS_SHIFT` | WARNING | –¢–∞–∫—Ç > —Å–º–µ–Ω—ã | –†–∞–∑–±–∏—Ç—å —Ç–∞–∫—Ç –∏–ª–∏ —É–≤–µ–ª–∏—á–∏—Ç—å Q_eff |
| `FORMWORK_BOTTLENECK` | INFO | –ö–æ–º–ø–ª–µ–∫—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã >90% | –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–ø–ª–µ–∫—Ç –∏–ª–∏ k=2 |
| `PUMP_UNDERUTILIZED` | INFO | –ù–∞—Å–æ—Å –∑–∞–≥—Ä—É–∂–µ–Ω <30% | –ú–µ–Ω—å—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å |
| `WAITING_ON_CRITICAL_PATH` | INFO | –í—ã–¥–µ—Ä–∂–∫–∏ –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º –ø—É—Ç–∏ | –°–æ–≤–º–µ—â–µ–Ω–∏–µ —Ä–∞–±–æ—Ç |
| `CREW_IDLE` | INFO | –ë—Ä–∏–≥–∞–¥–∞ –ø—Ä–æ—Å—Ç–∞–∏–≤–∞–µ—Ç >20% –≤—Ä–µ–º–µ–Ω–∏ | –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å |

---

## ü§ñ AI-–ø—Ä–æ—Ä–∞–± (–°–ª–æ–π 2)

### –ß—Ç–æ –º–æ–∂–µ—Ç AI

‚úÖ **–†–ê–ó–†–ï–®–ï–ù–û:**
- –ü—Ä–µ–¥–ª–∞–≥–∞—Ç—å –≥–µ–æ–º–µ—Ç—Ä–∏—é —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (volume, area, mass)
- –ü–æ–¥–±–∏—Ä–∞—Ç—å –Ω–æ—Ä–º—ã –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ normsets
- –ü—Ä–µ–¥–ª–∞–≥–∞—Ç—å —Ä–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —Ç–∞–∫—Ç—ã
- –ü—Ä–µ–¥–ª–∞–≥–∞—Ç—å —Ä–∞–∑–º–µ—Ä—ã –±—Ä–∏–≥–∞–¥ –∏ —Ä–µ—Å—É—Ä—Å—ã
- –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å assumptions –∏ RFIs
- –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —É–∑–∫–∏–µ –º–µ—Å—Ç–∞ –∏ –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

‚ùå **–ó–ê–ü–†–ï–©–ï–ù–û:**
- –ü–∏—Å–∞—Ç—å –∏—Ç–æ–≥–æ–≤—ã–µ —á–∞—Å—ã/—Å—Ç–æ–∏–º–æ—Å—Ç—å/—Å—Ä–æ–∫–∏ –Ω–∞–ø—Ä—è–º—É—é
- –û–±—Ö–æ–¥–∏—Ç—å –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —è–¥—Ä–æ
- –í–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –±–µ–∑ `source_tag` –∏ `confidence`

### –§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ –∫ AI

```typescript
interface AIForemanRequest {
  user_description: string;     // "–ü–ª–∏—Ç–∞ 20√ó8√ó0.25–º, C25/30"
  available_normsets: NormSet[]; // –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–æ—Ä–º
  project_constraints: {
    shift_hours: number;
    available_kits: number;
    pump_capacity_m3_h: number;
  };
}
```

### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ AI

```typescript
interface AIForemanResponse {
  proposed_element: {
    type: "slab" | "wall" | "beam" | "footing" | "column";
    concrete_volume_m3: number;
    formwork_area_m2: number;
    rebar_mass_t: number;
    max_continuous_pour_hours: number;
  };

  proposed_normset_id: string;  // ID –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ normsets

  proposed_captures: {
    count: number;              // –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∞–∫—Ç–æ–≤
    reasoning: string;          // "–†–∞–∑–±–∏—Ç—å –Ω–∞ 2 —Ç–∞–∫—Ç–∞, —Ç.–∫. 41–º¬≥ > –æ–∫–Ω–∞ 12—á –ø—Ä–∏ Q=15–º¬≥/—á"
  };

  // –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï –ü–û–õ–Ø
  assumptions: string[];        // ["–ü–ª–æ—Ç–Ω–æ—Å—Ç—å –∞—Ä–º–∞—Ç—É—Ä—ã 100 –∫–≥/–º¬≥", "–¢–æ–ª—â–∏–Ω–∞ —Å–ª–æ—è 0.5–º"]
  confidence: number;           // 0.0-1.0
  rfis: string[];               // ["–£—Ç–æ—á–Ω–∏—Ç—å –∫–ª–∞—Å—Å –±–µ—Ç–æ–Ω–∞", "–î–æ—Å—Ç—É–ø–Ω–∞ –ª–∏ –æ–ø–∞–ª—É–±–∫–∞ —Ç–∏–ø–∞ X?"]

  // –í–ê–õ–ò–î–ê–¶–ò–Ø: AI –Ω–µ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –ø–∏—Å–∞—Ç—å —ç—Ç–∏ –ø–æ–ª—è!
  total_hours?: never;
  total_cost?: never;
  duration_days?: never;
}
```

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**

```typescript
const request: AIForemanRequest = {
  user_description: "Mostn√≠ deska 20√ó8√ó0.25m, beton C25/30, v√Ωztu≈æ pr≈Ømƒõrn√°",
  available_normsets: [
    { id: "norm_urs_2024", name: "√öRS 2024", rebar_h_per_t: 50, ... },
    { id: "norm_rts_2023", name: "RTS 2023", rebar_h_per_t: 48, ... }
  ],
  project_constraints: {
    shift_hours: 10,
    available_kits: 1,
    pump_capacity_m3_h: 15
  }
};
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**

```typescript
const response: AIForemanResponse = {
  proposed_element: {
    type: "slab",
    concrete_volume_m3: 40.0,     // 20 √ó 8 √ó 0.25
    formwork_area_m2: 160.0,      // 2 √ó (20 √ó 8)
    rebar_mass_t: 4.0,            // 100 –∫–≥/–º¬≥ √ó 40–º¬≥
    max_continuous_pour_hours: 12.0
  },

  proposed_normset_id: "norm_urs_2024",

  proposed_captures: {
    count: 2,
    reasoning: "–û–±—ä—ë–º 40–º¬≥ –ø—Ä–∏ Q=15–º¬≥/—á –∑–∞–π–º—ë—Ç 3.2—á –±–µ—Ç–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (—Å –ø–æ–¥–≥–æ—Ç–æ–≤–∫–æ–π/–ø—Ä–æ–º—ã–≤–∫–æ–π). –£–º–µ—â–∞–µ—Ç—Å—è –≤ 1 —Å–º–µ–Ω—É, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é 2 —Ç–∞–∫—Ç–∞ –ø–æ 20–º¬≥ –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏."
  },

  assumptions: [
    "–ü–ª–æ—Ç–Ω–æ—Å—Ç—å –∞—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏–Ω—è—Ç–∞ 100 –∫–≥/–º¬≥ (—Å—Ä–µ–¥–Ω—è—è –¥–ª—è –ø–ª–∏—Ç)",
    "–¢–æ–ª—â–∏–Ω–∞ –∑–∞—â–∏—Ç–Ω–æ–≥–æ —Å–ª–æ—è 30–º–º",
    "–û–ø–∞–ª—É–±–∫–∞ —Å –æ–±–µ–∏—Ö —Å—Ç–æ—Ä–æ–Ω (2 √ó –ø–ª–æ—â–∞–¥—å)"
  ],
  confidence: 0.85,
  rfis: [
    "–£—Ç–æ—á–Ω–∏—Ç—å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫—É—é –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –∞—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è (–∫–≥/–º¬≥)",
    "–î–æ—Å—Ç—É–ø–µ–Ω –ª–∏ –Ω–∞—Å–æ—Å —Å Q=15–º¬≥/—á –∏–ª–∏ –Ω—É–∂–Ω–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Å –º–µ–Ω—å—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é?",
    "–ï—Å—Ç—å –ª–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —Ä–∞–±–æ—á–∏–º —à–≤–∞–º?"
  ]
};
```

**–í–ê–õ–ò–î–ê–¶–ò–Ø –æ—Ç–≤–µ—Ç–∞:**

```typescript
function validateAIResponse(response: AIForemanResponse): void {
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ AI –Ω–µ –Ω–∞–ø–∏—Å–∞–ª –∏—Ç–æ–≥–æ–≤—ã—Ö —Ü–∏—Ñ—Ä
  if ('total_hours' in response || 'total_cost' in response || 'duration_days' in response) {
    throw new Error('‚ùå AI –Ω–µ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –≤—ã–¥–∞–≤–∞—Ç—å –∏—Ç–æ–≥–æ–≤—ã–µ —Ü–∏—Ñ—Ä—ã! –¢–æ–ª—å–∫–æ –≤—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.');
  }

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
  if (!response.assumptions || response.assumptions.length === 0) {
    throw new Error('‚ùå AI –æ–±—è–∑–∞–Ω —É–∫–∞–∑–∞—Ç—å assumptions (–¥–æ–ø—É—â–µ–Ω–∏—è)!');
  }

  if (typeof response.confidence !== 'number' || response.confidence < 0 || response.confidence > 1) {
    throw new Error('‚ùå AI –æ–±—è–∑–∞–Ω —É–∫–∞–∑–∞—Ç—å confidence (0-1)!');
  }

  if (!response.rfis || response.rfis.length === 0) {
    console.warn('‚ö†Ô∏è AI –Ω–µ —É–∫–∞–∑–∞–ª RFIs. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å–∏—Ç—å —É—Ç–æ—á–Ω–µ–Ω–∏—è —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.');
  }
}
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
Monolit-Planner/
‚îú‚îÄ‚îÄ shared/
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calculators/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rebar.ts          ‚Üê –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∞—Ä–º–∞—Ç—É—Ä—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ formwork.ts       ‚Üê –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –æ–ø–∞–ª—É–±–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ concreting.ts     ‚Üê –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –±–µ—Ç–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts          ‚Üê –≠–∫—Å–ø–æ—Ä—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ scheduler/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ engine.ts         ‚Üê Scheduling Engine
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ critical-path.ts  ‚Üê –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bottlenecks.ts    ‚Üê –ê–Ω–∞–ª–∏–∑ —É–∑–∫–∏—Ö –º–µ—Å—Ç
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ project.ts        ‚Üê –¢–∏–ø—ã: Project, Element, NormSet
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ capture.ts        ‚Üê –¢–∏–ø—ã: Capture, Task, Schedule
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calculator.ts     ‚Üê –¢–∏–ø—ã: CalculatorParams, CalculatorResult
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ constants.ts          ‚Üê –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã, –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ migrations/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ 006_r0_deterministic_core.sql  ‚Üê –ù–æ–≤–∞—è —Å—Ö–µ–º–∞ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ r0-projects.js    ‚Üê API –¥–ª—è R0 –ø—Ä–æ–µ–∫—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ r0-elements.js    ‚Üê API –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ r0-normsets.js    ‚Üê API –¥–ª—è –Ω–æ—Ä–º
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ r0-captures.js    ‚Üê API –¥–ª—è –∑–∞—Ö–≤–∞—Ç–æ–∫
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ r0-tasks.js       ‚Üê API –¥–ª—è –∑–∞–¥–∞—á (–∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è)
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ r0-schedule.js    ‚Üê API –¥–ª—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ services/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ r0-calculator.js  ‚Üê –û–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ shared/calculators
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ r0-scheduler.js   ‚Üê –û–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ shared/scheduler
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ r0-ai-foreman.js  ‚Üê AI-–ø—Ä–æ—Ä–∞–± (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îÇ   ‚îî‚îÄ‚îÄ server.js
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ R0ProjectPage.tsx ‚Üê –°—Ç—Ä–∞–Ω–∏—Ü–∞ R0 –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ components/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ r0/
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ ElementsTable.tsx     ‚Üê –¢–∞–±–ª–∏—Ü–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ CapturesTable.tsx     ‚Üê –¢–∞–±–ª–∏—Ü–∞ –∑–∞—Ö–≤–∞—Ç–æ–∫
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ TasksGantt.tsx        ‚Üê –î–∏–∞–≥—Ä–∞–º–º–∞ –ì–∞–Ω—Ç—Ç–∞
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ ScheduleView.tsx      ‚Üê –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ CostBreakdown.tsx     ‚Üê –°–º–µ—Ç–∞ —Å —Ç—Ä–∞—Å—Å–∏—Ä—É–µ–º–æ—Å—Ç—å—é
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ ARCHITECTURE_R0.md            ‚Üê –≠–¢–û–¢ –§–ê–ô–õ
```

---

## üöÄ Roadmap

### R0: –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —è–¥—Ä–æ (MVP) - 3 –Ω–µ–¥–µ–ª–∏

**–ù–µ–¥–µ–ª—è 1: –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö**
- [ ] Migration 006: —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ö–µ–º–∞ –ë–î
- [ ] TypeScript —Ç–∏–ø—ã (Project, Element, NormSet, Capture, Task, Schedule)
- [ ] Seed –¥–∞–Ω–Ω—ã–µ: –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ normsets (√öRS, RTS, KROS)

**–ù–µ–¥–µ–ª—è 2: –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã**
- [ ] Rebar Calculator —Å —Ç—Ä–∞—Å—Å–∏—Ä—É–µ–º–æ—Å—Ç—å—é
- [ ] Formwork Calculator —Å —Ç—Ä–∞—Å—Å–∏—Ä—É–µ–º–æ—Å—Ç—å—é
- [ ] Concreting Calculator —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- [ ] Unit —Ç–µ—Å—Ç—ã –¥–ª—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–≤

**–ù–µ–¥–µ–ª—è 3: Scheduler + UI**
- [ ] Scheduling Engine (serial resource-constrained)
- [ ] Bottleneck Analyzer (rule-based)
- [ ] UI: —Ä—É—á–Ω–æ–π –≤–≤–æ–¥ Elements ‚Üí Captures ‚Üí –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è Tasks ‚Üí Schedule ‚Üí Cost
- [ ] Excel —ç–∫—Å–ø–æ—Ä—Ç —Å —Ç—Ä–∞—Å—Å–∏—Ä—É–µ–º–æ—Å—Ç—å—é

### R1: –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —É–∑–∫–∏–µ –º–µ—Å—Ç–∞ - 1 –Ω–µ–¥–µ–ª—è

- [ ] –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å (Critical Path Method)
- [ ] –î–∏–∞–≥—Ä–∞–º–º–∞ –ì–∞–Ω—Ç—Ç–∞ —Å —Ä–µ—Å—É—Ä—Å–∞–º–∏
- [ ] –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —É–∑–∫–∏—Ö –º–µ—Å—Ç (6 —Ç–∏–ø–æ–≤ –ø—Ä–æ–≤–µ—Ä–æ–∫)
- [ ] –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### R2: AI-–ø—Ä–æ—Ä–∞–± - 1 –Ω–µ–¥–µ–ª—è

- [ ] AI-–ø—Ä–æ—Ä–∞–±: –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è: AI –Ω–µ –ø–∏—à–µ—Ç –∏—Ç–æ–≥–æ–≤—ã–µ —Ü–∏—Ñ—Ä—ã
- [ ] UI: –∫–Ω–æ–ø–∫–∞ "–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å AI" –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ assumptions, confidence, RFIs

---

## üìö –°—Å—ã–ª–∫–∏ –∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∏

### –ù–æ—Ä–º—ã –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã

- **√öRS 2024** - √öst≈ôedn√≠ rozpoƒçtov√© standardy (–ß–µ—Ö–∏—è)
- **RTS 2023** - –†–æ—Å—Å–∏–π—Å–∫–∏–µ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∞–ª—å–Ω—ã–µ —Å–º–µ—Ç–Ω—ã–µ –Ω–æ—Ä–º–∞—Ç–∏–≤—ã
- **KROS 2024** - Komplexn√≠ rozpoƒçtov√© orientaƒçn√≠ standardy
- **CSN EN 206** - –ë–µ—Ç–æ–Ω (—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- **CSN EN 13670** - –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –±–µ—Ç–æ–Ω–Ω—ã—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π

### –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è

- **CPM** (Critical Path Method) - –ú–µ—Ç–æ–¥ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—É—Ç–∏
- **PERT** (Program Evaluation and Review Technique)
- **Resource-Constrained Scheduling** - –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ —Ä–µ—Å—É—Ä—Å–æ–≤
- **Line of Balance** (LOB) - –õ–∏–Ω–µ–π–Ω—ã–π –º–µ—Ç–æ–¥ (–¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Ä–∞–±–æ—Ç)

### –õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞

1. "Construction Planning, Equipment, and Methods" - Peurifoy, Schexnayder, Shapira
2. "Construction Project Scheduling and Control" - Saleh A. Mubarak
3. "Concrete Construction Engineering Handbook" - Edward G. Nawy

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `CLAUDE.md` - –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Monolit-Planner
- `migrations/006_r0_deterministic_core.sql` - –°—Ö–µ–º–∞ –ë–î –¥–ª—è R0
- `shared/src/calculators/README.md` - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–≤
- `shared/src/scheduler/README.md` - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞

---

**–ê–≤—Ç–æ—Ä:** Development Team
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2026-01-20
**–°—Ç–∞—Ç—É—Å:** üü° In Development (R0 MVP)

---

## Changelog

| –î–∞—Ç–∞ | –í–µ—Ä—Å–∏—è | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|------|--------|-----------|
| 2026-01-20 | R0 | –°–æ–∑–¥–∞–Ω –¥–æ–∫—É–º–µ–Ω—Ç, –æ–ø–∏—Å–∞–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —è–¥—Ä–∞ |

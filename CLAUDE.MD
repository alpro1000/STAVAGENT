# üèóÔ∏è CLAUDE.MD ‚Äî AI Context Document

**–í–ê–ñ–ù–û: –≠—Ç–æ—Ç —Ñ–∞–π–ª ‚Äî –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞. –í—Å–µ–≥–¥–∞ –æ–±—Ä–∞—â–∞–π—Å—è –∫ –Ω–µ–º—É –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∑–∞–¥–∞—á!**

---

## üìå –û –ü–†–û–ï–ö–¢–ï

**–ù–∞–∑–≤–∞–Ω–∏–µ:** Monolit Planner
**–¶–µ–ª—å:** –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ—Ç–æ–Ω–Ω—ã—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –º–æ—Å—Ç–æ–≤ –≤ –ß–µ—Ö–∏–∏

**–ó–∞–∫–∞–∑—á–∏–∫:** –°—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è (–ß–µ—Ö–∏—è)
**–ö–ª—é—á–µ–≤–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** –ü—Ä–∏–≤–µ—Å—Ç–∏ –í–°–ï –∑–∞—Ç—Ä–∞—Ç—ã –∫ –µ–¥–∏–Ω–æ–π –º–µ—Ç—Ä–∏–∫–µ **CZK/–º¬≥ –±–µ—Ç–æ–Ω–∞** (–¥–∞–∂–µ –µ—Å–ª–∏ –∏—Å—Ö–æ–¥–Ω–∞—è –ï–ò ‚Äî –º¬≤, –∫–≥, ks)

---

## üìÅ –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

```
monolit-planner/
‚îú‚îÄ‚îÄ backend/                          ‚Üê Node.js + Express + SQLite
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ init.js              ‚Üê Database initialization
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ positions.js         ‚Üê GET/POST/PUT positions (FIXED v4.3.3!)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bridges.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ snapshots.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calculator.js        ‚Üê Core calculation logic
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ parser.js            ‚Üê XLSX parsing
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ exporter.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logger.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ app.js
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îî‚îÄ‚îÄ .nvmrc                        ‚Üê Node.js 18.20.4
‚îÇ
‚îú‚îÄ‚îÄ frontend/                         ‚Üê React + TypeScript + Vite
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PartHeader.tsx        ‚Üê ü™® Beton input (with logging)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PositionsTable.tsx    ‚Üê üìä Table sync logic
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PositionRow.tsx       ‚Üê üîí Locked beton row + min=0
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ KPIPanel.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Header.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Sidebar.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ usePositions.ts       ‚Üê üîÑ Mutation with logging
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useBridges.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ context/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AppContext.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ api.ts                ‚Üê Axios wrapper
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ styles/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ global.css
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ App.tsx
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îî‚îÄ‚îÄ vite.config.ts
‚îÇ
‚îú‚îÄ‚îÄ shared/                           ‚Üê Shared types & formulas
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types.ts                  ‚Üê Position, HeaderKPI interfaces
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ formulas.ts               ‚Üê calculatePositionFields(), calculateKPI()
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ constants.ts
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îú‚îÄ‚îÄ render.yaml                       ‚Üê Deployment config (Blueprint)
‚îú‚îÄ‚îÄ CLAUDE.MD                         ‚Üê üìÑ This file
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ .gitignore
```

---

## üéØ –ì–õ–ê–í–ù–ê–Ø –ò–î–ï–Ø

### –ü—Ä–æ–±–ª–µ–º–∞
–í —Ç–µ–∫—É—â–∏—Ö —Å–º–µ—Ç–∞—Ö –º–æ—Å—Ç—ã –∏–º–µ—é—Ç —Ä–∞–∑–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è:
- –ë–µ—Ç–æ–Ω ‚Üí –º¬≥
- –û–ø–∞–ª—É–±–∫–∞ ‚Üí –º¬≤
- –ê—Ä–º–∞—Ç—É—Ä–∞ ‚Üí –∫–≥
- –ü—Ä–æ—á–∏–µ —Ä–∞–±–æ—Ç—ã ‚Üí ks, t, –º...

**–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å—Ä–∞–≤–Ω–∏—Ç—å** —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Ä–∞–±–æ—Ç!

### –†–µ—à–µ–Ω–∏–µ
‚úÖ **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞: `unit_cost_on_m3` (CZK/–º¬≥ –±–µ—Ç–æ–Ω–∞)**

–í—Å–µ –∑–∞—Ç—Ä–∞—Ç—ã –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ —Å—Ç–æ–∏–º–æ—Å—Ç—å –Ω–∞ 1 –º¬≥ –±–µ—Ç–æ–Ω–∞ —ç–ª–µ–º–µ–Ω—Ç–∞:
- –ë–µ—Ç–æ–Ω (43.8 –º¬≥) ‚Üí 729 CZK/–º¬≥
- –û–ø–∞–ª—É–±–∫–∞ (63.6 –º¬≤) ‚Üí 1079 CZK/–º¬≥ (—Å—Ç–æ–∏–º–æ—Å—Ç—å –æ–ø–∞–ª—É–±–∫–∏, —Ä–∞–∑–Ω–µ—Å—ë–Ω–Ω–∞—è –Ω–∞ –æ–±—ä—ë–º –±–µ—Ç–æ–Ω–∞)
- –ê—Ä–º–∞—Ç—É—Ä–∞ (2100 –∫–≥) ‚Üí 456 CZK/–º¬≥ (—Å—Ç–æ–∏–º–æ—Å—Ç—å –∞—Ä–º–∞—Ç—É—Ä—ã, —Ä–∞–∑–Ω–µ—Å—ë–Ω–Ω–∞—è –Ω–∞ –æ–±—ä—ë–º –±–µ—Ç–æ–Ω–∞)

**–ò—Ç–æ–≥–æ:** –ú–æ–∂–Ω–æ —á–µ—Å—Ç–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã —Ä–∞–±–æ—Ç!

---

## üìê –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –§–û–†–ú–£–õ–´

### 1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–±—ä—ë–º–∞ –±–µ—Ç–æ–Ω–∞ —ç–ª–µ–º–µ–Ω—Ç–∞

```javascript
FOR subtype = "beton":
  concrete_m3 = qty  // qty —É–∂–µ –≤ –º¬≥

FOR other subtypes (bednƒõn√≠, v√Ωztu≈æ, jin√©):
  concrete_m3 = qty_beton_of_same_part
  // –ë–µ—Ä—ë–º –æ–±—ä—ë–º –±–µ—Ç–æ–Ω–∞ –∏–∑ —Å—Ç—Ä–æ–∫–∏ subtype="beton" —Ç–æ–π –∂–µ part_name

  ‚ö†Ô∏è –ï–°–õ–ò –ù–ï –ù–ê–ô–î–ï–ù–û ‚Üí RFI + –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞
```

### 2. ‚≠ê –ì–õ–ê–í–ù–ê–Ø –§–û–†–ú–£–õ–ê: –ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –∫ –º¬≥

```javascript
unit_cost_on_m3 = cost_czk / concrete_m3

// –≠—Ç–æ –∫–ª—é—á–µ–≤–∞—è –º–µ—Ç—Ä–∏–∫–∞!
// –û–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç –¥–∞–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤ –ø–µ—Ä–µ—Å—á—ë—Ç–µ –Ω–∞ 1 –º¬≥ –±–µ—Ç–æ–Ω–∞ —ç–ª–µ–º–µ–Ω—Ç–∞
```

### 3. KROS-–æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ (–≤–≤–µ—Ä—Ö, —à–∞–≥–æ–º 50 CZK)

```javascript
kros_unit_czk = Math.ceil(unit_cost_on_m3 / 50) * 50

// –ü—Ä–∏–º–µ—Ä—ã:
// 729.45 ‚Üí 750
// 1079.12 ‚Üí 1100
// 800.00 ‚Üí 800
```

### 4. ‚≠ê –ù–û–í–û–ï: –†–∞—Å—á—ë—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```javascript
// –í–∑–≤–µ—à–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥–Ω–∏–µ (–ø–æ –æ–±—ä—ë–º—É –±–µ—Ç–æ–Ω–∞):
avg_crew_size = Œ£(crew_size √ó concrete_m3) / Œ£(concrete_m3)
avg_wage_czk_ph = Œ£(wage_czk_ph √ó concrete_m3) / Œ£(concrete_m3)
avg_shift_hours = Œ£(shift_hours √ó concrete_m3) / Œ£(concrete_m3)

// –ú–µ—Å—è—Ü—ã:
estimated_months = sum_kros_total_czk /
                   (avg_crew_size √ó avg_wage_czk_ph √ó avg_shift_hours √ó days_per_month)

// –ù–µ–¥–µ–ª–∏:
estimated_weeks = estimated_months √ó days_per_month / 7

// days_per_month = 30 (–Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞) –∏–ª–∏ 22 (—Ä–∞–±–æ—á–∏–µ –¥–Ω–∏)
```

### 5. –ü—Ä–æ–µ–∫—Ç–Ω—ã–µ KPI

```javascript
sum_concrete_m3 = Œ£(concrete_m3 –¥–ª—è subtype="beton")
sum_kros_total_czk = Œ£(kros_total_czk –¥–ª—è –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π)

project_unit_cost_czk_per_m3 = sum_kros_total_czk / sum_concrete_m3
project_unit_cost_czk_per_t = project_unit_cost_czk_per_m3 / 2.4  // œÅ=2.4 t/m¬≥
```

---

## üóÇÔ∏è –°–¢–†–£–ö–¢–£–†–ê –î–ê–ù–ù–´–•

### Position (–ü–æ–∑–∏—Ü–∏—è)

```typescript
{
  // –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–û–†–ê–ù–ñ–ï–í–´–ï –ø–æ–ª—è ‚Äî —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–µ):
  bridge_id: string          // SO201, SO202...
  part_name: string          // Z√ÅKLADY, ≈ò√çMSY, OPƒöRY...
  item_name: string          // –ù–∞–∑–≤–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ (v4.3: –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–∑ PartHeader)
  subtype: Subtype          // beton | bednƒõn√≠ | v√Ωztu≈æ | ...
  unit: string              // M3, m2, kg, ks...
  qty: number               // ‚≠ê v4.3: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ (–¢–û–õ–¨–ö–û –¥–ª—è beton —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è –≤ PartHeader, –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö ‚Äî –∏–∑ –¥—Ä—É–≥–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤)
  qty_m3_helper?: number    // –°–ø—Ä–∞–≤–æ—á–Ω–æ (–¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏)

  crew_size: number         // –õ—é–¥–µ–π –≤ –±—Ä–∏–≥–∞–¥–µ (default: 4)
  wage_czk_ph: number       // CZK/—á–∞—Å (default: 398)
  shift_hours: number       // –ß–∞—Å–æ–≤/–¥–µ–Ω—å (default: 10)
  days: number              // –î–Ω–µ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (default: 0)

  // –†–∞—Å—á—ë—Ç–Ω—ã–µ –ø–æ–ª—è (–°–ï–†–´–ï ‚Äî readonly):
  labor_hours: number       // = crew_size √ó shift_hours √ó days
  cost_czk: number          // = labor_hours √ó wage_czk_ph
  unit_cost_native: number  // = cost_czk / qty (—Å–ø—Ä–∞–≤–æ—á–Ω–æ)

  concrete_m3: number       // ‚ö†Ô∏è –ö–õ–Æ–ß–ï–í–û–ï: –æ–±—ä—ë–º –±–µ—Ç–æ–Ω–∞ —ç–ª–µ–º–µ–Ω—Ç–∞
  unit_cost_on_m3: number   // ‚≠ê –ì–õ–ê–í–ù–ê–Ø –ú–ï–¢–†–ò–ö–ê: CZK/–º¬≥ –±–µ—Ç–æ–Ω–∞

  // KROS (–ó–ï–õ–Å–ù–´–ï —è—á–µ–π–∫–∏):
  kros_unit_czk: number     // –û–∫—Ä—É–≥–ª—ë–Ω–Ω–∞—è –µ–¥–∏–Ω–∏—á–Ω–∞—è —Ü–µ–Ω–∞
  kros_total_czk: number    // –ü–æ–ª–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å

  // RFI:
  has_rfi?: boolean
  rfi_message?: string
}
```

### HeaderKPI (–®–∞–ø–∫–∞)

```typescript
{
  // –í—Ö–æ–¥–Ω—ã–µ (—Ä—É—á–Ω–æ–π –≤–≤–æ–¥):
  span_length_m?: number
  deck_width_m?: number
  pd_weeks?: number
  days_per_month_mode: 30 | 22  // –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å!

  // –†–∞—Å—á—ë—Ç–Ω—ã–µ —Å—É–º–º—ã:
  sum_concrete_m3: number
  sum_kros_total_czk: number

  // –ï–¥–∏–Ω–∏—á–Ω—ã–µ —Ü–µ–Ω—ã:
  project_unit_cost_czk_per_m3: number
  project_unit_cost_czk_per_t: number

  // ‚≠ê –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
  estimated_months: number
  estimated_weeks: number

  // –í–∑–≤–µ—à–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥–Ω–∏–µ:
  avg_crew_size: number
  avg_wage_czk_ph: number
  avg_shift_hours: number
  days_per_month: number

  // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:
  rho_t_per_m3: number  // = 2.4
}
```

---

## üîÑ –ü–û–¢–û–ö –î–ê–ù–ù–´–• –ë–ï–¢–û–ù–ê (v4.3.2 - –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (v4.3.2 - FINAL CORRECT DESIGN)

**–ü–†–ê–í–ò–õ–¨–ù–´–ô –ü–û–¢–û–ö (v4.3.2):**
```
PartHeader (—Ä—è–¥–æ–º —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º):
  - –ù–∞–∑–≤–∞–Ω–∏–µ "N√°zev ƒç√°sti": "Z√ÅKLADY ZE ≈ΩELEZOBETONU..." üìù
  - Objem betonu: [INPUT 255] m¬≥ ‚Üê üü† –ì–õ–ê–í–ù–û–ï –ü–û–õ–ï! EDITABLE!
         ‚Üì –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è ‚Üì
–¢–∞–±–ª–∏—Ü–∞ –ø–æ–∑–∏—Ü–∏–π –†–ê–ó–í–ï–†–ù–£–¢–ê:
         ‚Üì
–°—Ç—Ä–æ–∫–∞ 'beton' (–ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–∞–±–æ—Ç—É –ø–æ –ë–ï–¢–û–ù–ò–†–û–í–ê–ù–ò–Æ):
  - Podtyp: "beton" (—Ç–∏–ø —Ä–∞–±–æ—Ç—ã - –±–µ—Ç–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)
  - MJ: M3
  - Mno≈æstv√≠: 255 (–∏–∑ PartHeader) ‚Üê —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ!
  - LIDI: 4 (–ª—é–¥–∏ –Ω–∞ —Ä–∞–±–æ—Ç–µ)
  - Kƒå/HOD: 398 (–∑–∞—Ä–ø–ª–∞—Ç–∞ –≤ —á–∞—Å)
  - HOD/DEN: 10 (—á–∞—Å–æ–≤ –≤ –¥–µ–Ω—å)
  - DEN: ? (–¥–Ω–∏ –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è!)
         ‚Üì
–§–æ—Ä–º—É–ª–∞ –≤—ã—á–∏—Å–ª—è–µ—Ç:
  concrete_m3 = position.qty = 255  ‚Üê –û—Å–Ω–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—á–µ—Ç–æ–≤!
         ‚Üì
–û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ (bednƒõn√≠=–æ–ø–∞–ª—É–±–∫–∞, v√Ωztu≈æ=–∞—Ä–º–∞—Ç—É—Ä–∞):
  - concrete_m3 = findConcreteVolumeForPart() = 255
  - –ò—Å–ø–æ–ª—å–∑—É—é—Ç –¢–û–ñ–ï –æ–±—ä–µ–º –±–µ—Ç–æ–Ω–∞!
         ‚Üì
‚úÖ –í—Å–µ —Ä–∞—Å—á—ë—Ç—ã: unit_cost_on_m3 = cost_czk / 255!
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏ (v4.3.2 FINAL)

#### PartHeader.tsx (–ù–ê–ó–í–ê–ù–ò–ï + –û–ë–™–ï–ú –ë–ï–¢–û–ù–ê)
```typescript
// –ü–†–ê–í–ò–õ–¨–ù–û: –¥–≤–∞ input –ø–æ–ª—è
interface Props {
  itemName?: string;
  betonQuantity: number;  // ‚Üê –û–±—ä–µ–º –±–µ—Ç–æ–Ω–∞!
  onItemNameUpdate: (itemName: string) => void;
  onBetonQuantityUpdate: (quantity: number) => void;  // ‚Üê –°–∏–Ω—Ö—Ä–æ!
  isLocked: boolean;
}

export default function PartHeader({
  itemName,
  betonQuantity,
  onItemNameUpdate,
  onBetonQuantityUpdate,
  isLocked
}: Props) {
  return (
    <div className="part-header-container">
      {/* Input 1: –ù–∞–∑–≤–∞–Ω–∏–µ */}
      <input
        type="text"
        value={itemName}
        onBlur={handleNameBlur}
        disabled={isLocked}
        placeholder="Z√ÅKLADY ZE ≈ΩELEZOBETONU DO C30/37"
      />

      {/* Input 2: –û–±—ä–µ–º –±–µ—Ç–æ–Ω–∞ - –ì–õ–ê–í–ù–û–ï –ü–û–õ–ï! */}
      <div className="concrete-params">
        <label>Objem betonu celkem:</label>
        <input
          type="number"
          className="concrete-input"  // üü† –û—Ä–∞–Ω–∂–µ–≤–æ–µ!
          value={editedBeton}
          onChange={handleBetonChange}
          onBlur={handleBetonBlur}  // ‚Üê –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ!
          disabled={isLocked}
          step="0.01"
          min="0"
          placeholder="255"
        />
        <span>m¬≥</span>
      </div>
    </div>
  );
}
```

#### PositionRow.tsx (BETON - EDITABLE!)
```typescript
// –ü–†–ê–í–ò–õ–¨–ù–û: beton –ù–ï –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω, —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è —Å–≤–æ–±–æ–¥–Ω–æ
<td className="cell-input">
  <input
    type="number"
    step="0.01"
    className="input-cell"  // üü† –û—Ä–∞–Ω–∂–µ–≤—ã–π input!
    value={getValue('qty')}
    onChange={(e) => handleFieldChange('qty', parseFloat(e.target.value) || 0)}
    onBlur={handleBlur}
    disabled={isLocked}  // ‚Üê –¢–û–õ–¨–ö–û –µ—Å–ª–∏ snapshot locked!
    title={
      position.subtype === 'beton'
        ? 'Objem betonu v m¬≥ (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–æ–≤–∞–Ω–æ —Å PartHeader –≤—ã—à–µ)'
        : 'Mno≈æstv√≠ v mƒõrn√Ωch jednotk√°ch'
    }
  />
</td>
```

#### PositionsTable.tsx (–°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø)
```typescript
// –ü–†–ê–í–ò–õ–¨–ù–û: handleBetonQuantityUpdate() —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç PartHeader ‚Üí Table
const handleBetonQuantityUpdate = (partName: string, newQuantity: number) => {
  // –ù–∞—Ö–æ–¥–∏–º beton position –≤ —á–∞—Å—Ç–∏
  const betonPosition = positions.find(
    p => p.part_name === partName && p.subtype === 'beton'
  );

  // –û–±–Ω–æ–≤–ª—è–µ–º –µ–≥–æ qty
  updatePositions([{
    ...betonPosition,
    qty: newQuantity  // ‚Üê –≠—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ–∑–¥–µ!
  }]);
};

// PartHeader –ø–µ—Ä–µ–¥–∞–µ—Ç:
<PartHeader
  betonQuantity={betonQty}  // ‚Üê —á–∏—Ç–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
  onBetonQuantityUpdate={(qty) => handleBetonQuantityUpdate(partName, qty)}  // ‚Üê –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç
  ...
/>
```

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –î–í–£–°–¢–û–†–û–ù–ù–Ø–Ø —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

**–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–µ–Ω—è–µ—Ç –≤ PartHeader**
```
PartHeader [255] ‚Üí onBetonQuantityUpdate() ‚Üí PositionsTable
  ‚Üì
updatePositions({beton, qty: 255}) ‚Üí backend
  ‚Üì
React Query –æ–±–Ω–æ–≤–ª—è–µ—Ç positions
  ‚Üì
PartHeader –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç—Å—è: betonQuantity = 255 ‚úì
Table —Å—Ç—Ä–æ–∫–∞ beton –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç—Å—è: qty = 255 ‚úì
```

**–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–µ–Ω—è–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü–µ (beton row)**
```
PositionRow [255] ‚Üí handleFieldChange() ‚Üí updatePositions()
  ‚Üì
backend –æ–±–Ω–æ–≤–ª—è–µ—Ç
  ‚Üì
React Query –æ–±–Ω–æ–≤–ª—è–µ—Ç positions
  ‚Üì
PartHeader –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç—Å—è: betonQuantity = 255 (–≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è!) ‚úì
```

**–ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç:** betonQuantity –≤ PartHeader –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ö–ê–ñ–î–´–ô –†–ê–ó:
```typescript
betonQuantity={partPositions
  .filter(p => p.subtype === 'beton')
  .reduce((sum, p) => sum + (p.qty || 0), 0)}
```

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ –õ–Æ–ë–û–ú –º–µ—Å—Ç–µ –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ –≤–µ–∑–¥–µ! ‚úÖ

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (v4.3.1)

#### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –æ–±—ä—ë–º –±–µ—Ç–æ–Ω–∞
```
1. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç —á–∞—Å—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: "Z√ÅKLADY"
2. –í–∏–¥–∏—Ç PartHeader —Å –ø–æ–ª–µ–º "N√°zev ƒç√°sti: [Z√ÅKLADY ZE ≈ΩELEZOBETONU...]"
3. –†–∞—Å–∫—Ä—ã–≤–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É –ø–æ–∑–∏—Ü–∏–π (click –Ω–∞ —Å—Ç—Ä–µ–ª–∫—É ‚ñº)
4. –ù–∞—Ö–æ–¥–∏—Ç —Å—Ç—Ä–æ–∫—É —Å "beton" (–ø–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞)
5. –í –∫–æ–ª–æ–Ω–∫–µ "Mno≈æstv√≠" –≤–∏–¥–∏—Ç –æ—Ä–∞–Ω–∂–µ–≤—ã–π INPUT
6. ‚úçÔ∏è –í–≤–æ–¥–∏—Ç: 43.8 (–º¬≥)
7. –ù–∞–∂–∏–º–∞–µ—Ç Tab –∏–ª–∏ –∫–ª–∏–∫–∞–µ—Ç –≤–Ω–µ –ø–æ–ª—è (onBlur)
8. handleBlur() ‚Üí updatePositions([{id: ..., qty: 43.8}]) ‚Üí backend
9. Backend –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç:
   - concrete_m3 = 43.8 (–¥–ª—è beton position)
   - unit_cost_on_m3 = cost_czk / 43.8 ‚úì (–¥–ª—è –≤—Å–µ—Ö subtypes —á–∞—Å—Ç–∏)
10. React Query –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∫—ç—à
11. –¢–∞–±–ª–∏—Ü–∞ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è:
    - –°—Ç—Ä–æ–∫–∞ 'beton': qty = 43.8 (–æ—Ä–∞–Ω–∂–µ–≤—ã–π, —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–π) ‚úçÔ∏è
    - –°—Ç—Ä–æ–∫–∞ 'bednƒõn√≠': concrete_m3 = 43.8 (–≤—ã—á–∏—Å–ª–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!)
    - –°—Ç—Ä–æ–∫–∞ 'v√Ωztu≈æ': concrete_m3 = 43.8 (–≤—ã—á–∏—Å–ª–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!)
    - KPI: sum_concrete_m3 = 43.8 –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
    - –í—Å–µ Kƒç/m¬≥ –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω—ã! ‚úÖ
```

#### –°—Ü–µ–Ω–∞—Ä–∏–π 2: Excel –∏–º–ø–æ—Ä—Ç (–≥–æ—Ç–æ–≤–æ!)
```
Excel —Å–æ–¥–µ—Ä–∂–∏—Ç: "ƒå√ÅST KONSTRUKCE" | "SUBTYPE" | "QTY" | "MJ"
–ü—Ä–∏–º–µ—Ä:          "Z√ÅKLADY"        | "beton"   | 43.8  | m3
           ‚Üì
Parser —á–∏—Ç–∞–µ—Ç –∏ —Å–æ–∑–¥–∞—ë—Ç positions
           ‚Üì
Frontend –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É
           ‚Üì
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –≥–æ—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å: –∫–ª–∏–∫–∞–µ—Ç –Ω–∞ –æ—Ä–∞–Ω–∂–µ–≤—ã–π input –≤ beton —Å—Ç—Ä–æ–∫–µ
           ‚Üì
–í—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏! ‚úÖ
```

### CSS —Å—Ç–∏–ª–∏ (v4.3)

```css
/* –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–µ –ø–æ–ª–µ –±–µ—Ç–æ–Ω–∞ –≤ PartHeader */
.concrete-input {
  background: var(--input-bg);      /* üü† #FFA726 –æ—Ä–∞–Ω–∂–µ–≤—ã–π */
  border: 2px solid #FF9800;        /* –û—Ä–∞–Ω–∂–µ–≤—ã–π –±–æ—Ä–¥–µ—Ä */
  padding: 6px 8px;
  width: 100px;                     /* –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ä–∞–∑–º–µ—Ä */
  text-align: right;                /* –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª */
  font-family: monospace;           /* –ú–æ–Ω–æ-—à—Ä–∏—Ñ—Ç –¥–ª—è —á–∏—Å–µ–ª */
}

/* Read-only –ø–æ–ª–µ –≤ —Ç–∞–±–ª–∏—Ü–µ –¥–ª—è beton */
.input-cell.readonly-style input {
  background: var(--bg-tertiary);   /* üîí #E8E8E8 —Å–µ—Ä—ã–π */
  border-color: var(--border-light);
  color: var(--text-secondary);
  cursor: not-allowed;              /* –ó–∞–ø—Ä–µ—Ç–Ω—ã–π –∫—É—Ä—Å–æ—Ä */
}
```

---

## üé® –î–ò–ó–ê–ô–ù (–í–ê–ñ–ù–û!)

### –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞

```css
/* –ë–µ—Ç–æ–Ω–Ω–∞—è –æ—Å–Ω–æ–≤–∞ */
--light-concrete: #F5F5F5    /* –§–æ–Ω —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
--medium-concrete: #E8E8E8   /* –ö–∞—Ä—Ç–æ—á–∫–∏, —Å–µ–∫—Ü–∏–∏ */
--divider-border: #D0D0D0    /* –õ–∏–Ω–∏–∏ */

/* –ê–∫—Ü–µ–Ω—Ç—ã */
--primary-action: #1E5A96    /* –°–∏–Ω–∏–π (–∫–Ω–æ–ø–∫–∏, –∑–∞–≥–æ–ª–æ–≤–∫–∏) */
--secondary: #F39C12          /* –û—Ä–∞–Ω–∂–µ–≤—ã–π (–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è) */
--success: #27AE60            /* –ó–µ–ª—ë–Ω—ã–π (KROS) */
--error: #E74C3C              /* –ö—Ä–∞—Å–Ω—ã–π (RFI) */

/* ‚≠ê INPUT CELLS ‚Äî –ê–ü–ï–õ–¨–°–ò–ù–û–í–´–ï! */
--input-bg: #FFA726           /* –§–æ–Ω —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã—Ö –ø–æ–ª–µ–π */
--input-border: #FF9800       /* –ë–æ—Ä–¥–µ—Ä */
--input-focus: #FF7043        /* –§–æ–∫—É—Å (2px ring) */

/* –¢–∞–±–ª–∏—Ü–∞ */
--computed-cells: #F0F0F0     /* –°–µ—Ä—ã–µ readonly */
--kros-success-bg: #F0FFF4    /* –ó–µ–ª—ë–Ω—ã–π —Ñ–æ–Ω KROS */
--rfi-warning: #FEE8E8        /* –ö—Ä–∞—Å–Ω—ã–π —Ñ–æ–Ω RFI */
```

### –ü—Ä–∞–≤–∏–ª–∞ UI

1. **–í—Å–µ input-–ø–æ–ª—è (—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–µ):**
   - –§–æ–Ω `#FFA726` (–∞–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–π)
   - –ë–æ—Ä–¥–µ—Ä `#FF9800`
   - –ü—Ä–∏ —Ñ–æ–∫—É—Å–µ: ring `#FF7043` (2px)

2. **Readonly –ø–æ–ª—è (—Ä–∞—Å—á—ë—Ç–Ω—ã–µ):**
   - –§–æ–Ω `#F0F0F0` (—Å–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π)
   - –®—Ä–∏—Ñ—Ç bold, tabular-nums
   - –ö—É—Ä—Å–æ—Ä: default

3. **KROS-—è—á–µ–π–∫–∏:**
   - –§–æ–Ω `#F0FFF4` (—Å–≤–µ—Ç–ª–æ-–∑–µ–ª—ë–Ω—ã–π)
   - –¢–µ–∫—Å—Ç `#27AE60` (–∑–µ–ª—ë–Ω—ã–π)
   - Font-weight: 600

4. **RFI-—Å—Ç—Ä–æ–∫–∏:**
   - –§–æ–Ω –≤—Å–µ–π —Å—Ç—Ä–æ–∫–∏: `#FEE8E8`
   - Badge: –∫—Ä–∞—Å–Ω—ã–π —Å –±–µ–ª—ã–º —Ç–µ–∫—Å—Ç–æ–º

---

## üèõÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê

### –ú–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```
monolit-planner/
‚îú‚îÄ‚îÄ backend/          ‚Üê Node.js + Express + SQLite
‚îú‚îÄ‚îÄ frontend/         ‚Üê React + TypeScript + Vite
‚îú‚îÄ‚îÄ shared/           ‚Üê –û–±—â–∏–µ —Ç–∏–ø—ã –∏ —Ñ–æ—Ä–º—É–ª—ã
‚îú‚îÄ‚îÄ render.yaml       ‚Üê –ö–æ–Ω—Ñ–∏–≥ –¥–µ–ø–ª–æ—è
‚îú‚îÄ‚îÄ DEPLOY.md         ‚Üê –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
‚îú‚îÄ‚îÄ CLAUDE.MD         ‚Üê ‚≠ê –≠–¢–û–¢ –§–ê–ô–õ (–¥–ª—è AI)
‚îî‚îÄ‚îÄ README.md         ‚Üê –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

### Backend Stack

- **Node.js 18+** + Express.js
- **SQLite** (better-sqlite3) ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ë–î
- **XLSX** (xlsx) ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ Excel
- **Multer** ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
- **API:** REST (JSON)

**–í–∞–∂–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã:**
- `calculator.js` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–æ—Ä–º—É–ª—ã –∏–∑ shared
- `parser.js` ‚Äî –ø–∞—Ä—Å–∏—Ç XLSX, –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç bridge_id
- `exporter.js` ‚Äî –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç XLSX/CSV –¥–ª—è KROS4

### Frontend Stack

- **React 18** + TypeScript 5
- **Vite 5** ‚Äî —Å–±–æ—Ä—â–∏–∫
- **TanStack React Query** ‚Äî –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ API
- **Axios** ‚Äî HTTP-–∫–ª–∏–µ–Ω—Ç
- **Context API** ‚Äî –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `Header` ‚Äî –≤—ã–±–æ—Ä –º–æ—Å—Ç–∞, –∏–º–ø–æ—Ä—Ç, —ç–∫—Å–ø–æ—Ä—Ç, –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –¥–Ω–µ–π
- `Sidebar` ‚Äî —Å–ø–∏—Å–æ–∫ –º–æ—Å—Ç–æ–≤, —Ñ–∏–ª—å—Ç—Ä—ã
- `KPIPanel` ‚Äî –º–µ—Ç—Ä–∏–∫–∏ (–º–µ—Å—è—Ü—ã, –Ω–µ–¥–µ–ª–∏, CZK/–º¬≥...)
- `PositionsTable` ‚Äî —Ç–∞–±–ª–∏—Ü–∞ —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ part_name
- `PositionRow` ‚Äî —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–∞—è —Å—Ç—Ä–æ–∫–∞ (–∞–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–µ inputs!)

### Shared Package

**–¶–µ–ª—å:** –û–¥–Ω–∞ –≤–µ—Ä—Å–∏—è —Ñ–æ—Ä–º—É–ª –¥–ª—è —Ñ—Ä–æ–Ω—Ç–∞ –∏ –±—ç–∫–∞

```typescript
// types.ts ‚Äî –≤—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
// formulas.ts ‚Äî –≤—Å–µ —Ä–∞—Å—á—ë—Ç—ã (calculatePositionFields, calculateHeaderKPI...)
// constants.ts ‚Äî –¥–µ—Ñ–æ–ª—Ç—ã, —Ü–≤–µ—Ç–∞, feature flags
```

---

## üîÑ WORKFLOW –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø

1. **–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
2. **–ù–∞–∂–∞—Ç—å "Upload XLSX"** ‚Üí –≤—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª —Å –º–æ—Å—Ç–∞–º–∏
3. **Backend –ø–∞—Ä—Å–∏—Ç XLSX:**
   - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç bridge_id (–∏–∑ –∫–æ–ª–æ–Ω–∫–∏ "Po≈ô. ƒç√≠slo" –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∞)
   - –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –º—ç–ø–ø–∏–Ω–≥ –∫–æ–ª–æ–Ω–æ–∫
   - –ü—Ä–∏–º–µ–Ω—è–µ—Ç –º—ç–ø–ø–∏–Ω–≥ ‚Üí –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏
4. **–í—ã–±—Ä–∞—Ç—å –º–æ—Å—Ç** –∏–∑ —Å–ø–∏—Å–∫–∞ –≤ Sidebar
5. **Backend —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Å—ë:**
   - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç concrete_m3 –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏
   - –í—ã—á–∏—Å–ª—è–µ—Ç unit_cost_on_m3 (‚≠ê –≥–ª–∞–≤–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞)
   - –û–∫—Ä—É–≥–ª—è–µ—Ç KROS
   - –í—ã—á–∏—Å–ª—è–µ—Ç –º–µ—Å—è—Ü—ã/–Ω–µ–¥–µ–ª–∏
6. **Frontend –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:**
   - KPI-–ø–∞–Ω–µ–ª—å —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
   - –¢–∞–±–ª–∏—Ü—É –ø–æ–∑–∏—Ü–∏–π (–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ part_name)
   - –ê–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–µ input-—è—á–µ–π–∫–∏
   - –°–µ—Ä—ã–µ readonly-—è—á–µ–π–∫–∏
7. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç** (qty, crew_size, days...) ‚Üí –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
8. **–ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç —Ä–µ–∂–∏–º –¥–Ω–µ–π** (30 ‚Üî 22) ‚Üí –ø–µ—Ä–µ—Å—á—ë—Ç –º–µ—Å—è—Ü–µ–≤/–Ω–µ–¥–µ–ª—å
9. **–≠–∫—Å–ø–æ—Ä—Ç XLSX/CSV** ‚Üí –≥–æ—Ç–æ–≤–æ –¥–ª—è KROS4

---

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–ê–í–ò–õ–ê

### 1. Zero Regression
- **–ù–ï –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞—Ç—å** –∏—Å—Ö–æ–¥–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏ XLSX
- –¢–æ–ª—å–∫–æ **–º—ç–ø–ø–∏–Ω–≥ —á–µ—Ä–µ–∑ UI**

### 2. RFI-—Å–∏—Å—Ç–µ–º–∞ (Request For Information)
- –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–ù–ï –±–ª–æ–∫–∏—Ä—É–µ—Ç** —Ä–∞—Å—á—ë—Ç—ã (—Ä–∞—Å—á—ë—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Å 0 –∏–ª–∏ null)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—Ä—É—á–Ω—É—é –≤–≤–µ—Å—Ç–∏ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä—ã RFI:**
- ‚ùå "–ù–µ –Ω–∞–π–¥–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∞ beton –¥–ª—è —á–∞—Å—Ç–∏ '≈ò√çMSY'"
- ‚ö†Ô∏è "–ü—É—Å—Ç–æ: den (koef 1). –†–∞—Å—á—ë—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω (cost_czk=0)"
- ‚ÑπÔ∏è "–ù–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω Po≈ô. ƒç√≠slo ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –º—ç–ø–ø–∏–Ω–≥"

### 3. –§–æ—Ä–º—É–ª—ã –ø—Ä–æ–∑—Ä–∞—á–Ω—ã
- –ö–∞–∂–¥–æ–µ —Ä–∞—Å—á—ë—Ç–Ω–æ–µ –ø–æ–ª–µ ‚Üí tooltip —Å —Ñ–æ—Ä–º—É–ª–æ–π
- –ü—Ä–∏–º–µ—Ä: –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ `kros_unit_czk` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:
  ```
  = ceil(unit_cost_on_m3 / 50) √ó 50
  = ceil(729.45 / 50) √ó 50
  = ceil(14.589) √ó 50
  = 15 √ó 50
  = 750 CZK
  ```

### 4. –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –¥–Ω–µ–π/–º–µ—Å—è—Ü–∞
- **30 –¥–Ω–µ–π/–º–µ—Å—è—Ü** ‚Äî –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è —Å—Ç—Ä–æ–π–∫–∞ (7 –¥–Ω–µ–π –≤ –Ω–µ–¥–µ–ª—é)
- **22 –¥–Ω—è/–º–µ—Å—è—Ü** ‚Äî —Ä–∞–±–æ—á–∏–µ –¥–Ω–∏ (5 –¥–Ω–µ–π –≤ –Ω–µ–¥–µ–ª—é + –ø—Ä–∞–∑–¥–Ω–∏–∫–∏)
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `project_config.days_per_month_mode`
- –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ ‚Üí –ø–µ—Ä–µ—Å—á—ë—Ç –º–µ—Å—è—Ü–µ–≤/–Ω–µ–¥–µ–ª—å –¥–ª—è –≤—Å–µ—Ö –º–æ—Å—Ç–æ–≤

---

## üöÄ DEPLOYMENT (Render)

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Blueprint! (render.yaml)

**–ù–ï —Å–æ–∑–¥–∞–≤–∞–π –≤—Ä—É—á–Ω—É—é "New Web Service"!**

### –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å:

1. **Push –∫–æ–¥ –Ω–∞ GitHub** ‚úÖ (—É–∂–µ —Å–¥–µ–ª–∞–Ω–æ)

2. **–í Render Dashboard:**
   - –ù–∞–∂–∞—Ç—å **"New" ‚Üí "Blueprint"**
   - –í—ã–±—Ä–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `alpro1000/Monolit-Planner`
   - Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥—ë—Ç `render.yaml`
   - –ù–∞–∂–∞—Ç—å **"Create New Resources"**

3. **Render —Å–æ–∑–¥–∞—Å—Ç 2 —Å–µ—Ä–≤–∏—Å–∞:**
   - `monolit-planner-api` (backend)
   - `monolit-planner-frontend` (frontend)

4. **–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è backend:**
   - Backend –ø–æ–ª—É—á–∏—Ç URL —Ç–∏–ø–∞: `https://monolit-planner-api.onrender.com`
   - ‚ö†Ô∏è **–í–ê–ñ–ù–û**: –ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å frontend!

5. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ frontend (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!):**
   - –û—Ç–∫—Ä–æ–π Render Dashboard ‚Üí `monolit-planner-frontend` ‚Üí Environment
   - –î–æ–±–∞–≤—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `VITE_API_URL` = `https://monolit-planner-api.onrender.com`
   - –ù–∞–∂–º–∏ **"Save Changes"** ‚Üí frontend –ø–µ—Ä–µ—Å–æ–±—Ä—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

6. **(–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å CORS:**
   - –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è frontend –ø–æ–ª—É—á–∏—Ç URL —Ç–∏–ø–∞: `https://monolit-planner-frontend.onrender.com`
   - –û—Ç–∫—Ä–æ–π backend Environment
   - –ò–∑–º–µ–Ω–∏ `CORS_ORIGIN` —Å `*` –Ω–∞ URL frontend'–∞ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

7. **URLs:**
   - Frontend: `https://monolit-planner-frontend.onrender.com`
   - Backend: `https://monolit-planner-api.onrender.com`

### ‚ö†Ô∏è –ù–ï –¥–µ–ª–∞–π:
- ‚ùå New Web Service –≤—Ä—É—á–Ω—É—é (—Å–ª–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–≤—è–∑–∏)
- ‚ùå –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å build commands –≤—Ä—É—á–Ω—É—é (–≤—Å—ë –≤ render.yaml)

### ‚úÖ –î–µ–ª–∞–π:
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π Blueprint (render.yaml)
- ‚úÖ Auto-deploy: push –≤ main ‚Üí –∞–≤—Ç–æ–¥–µ–ø–ª–æ–π

### üìù –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å render.yaml:

**Backend (Web Service):**
```yaml
- type: web
  name: monolit-planner-api
  env: node
  plan: free
  buildCommand: ...
  startCommand: ...
```

**Frontend (Static Site):**
```yaml
- type: web              # ‚ö†Ô∏è –ù–ï "static"!
  name: monolit-planner-frontend
  env: static            # –≠—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ static site
  buildCommand: ...
  staticPublishPath: frontend/dist
```

‚ö†Ô∏è **–í–ê–ñ–ù–û:**
- Render Blueprint –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `type: static`
- –ò—Å–ø–æ–ª—å–∑—É–π `type: web` + `env: static` –¥–ª—è static sites
- –ù–ï –¥–æ–±–∞–≤–ª—è–π `region` ‚Äî –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è free tier
- **Node.js –≤–µ—Ä—Å–∏—è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–ê**: better-sqlite3 —Ç—Ä–µ–±—É–µ—Ç Node 18.x
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω .nvmrc ‚Üí 18.20.4
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω NODE_VERSION –≤ render.yaml
  - ‚ùå Node 25.x –ù–ï –†–ê–ë–û–¢–ê–ï–¢ (–æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ C++)

### üîç –ü–æ—á–µ–º—É CORS_ORIGIN="*" –∏ VITE_API_URL=sync:false - –ù–ï –∫–æ—Å—Ç—ã–ª–∏?

**–ü—Ä–æ–±–ª–µ–º–∞ fromService (circular dependency):**

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –¥–µ–ø–ª–æ–µ —á–µ—Ä–µ–∑ Blueprint —Å fromService –≤–æ–∑–Ω–∏–∫–∞–µ—Ç deadlock:
```yaml
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - —Å–æ–∑–¥–∞—ë—Ç deadlock:
backend:
  envVars:
    - key: CORS_ORIGIN
      fromService:
        name: frontend  # Backend –∂–¥—ë—Ç URL frontend

frontend:
  envVars:
    - key: VITE_API_URL
      fromService:
        name: backend   # Frontend –∂–¥—ë—Ç URL backend
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Backend –∂–¥—ë—Ç frontend ‚Üí Frontend –∂–¥—ë—Ç backend ‚Üí **–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª!**

**‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û–ï —Ä–µ—à–µ–Ω–∏–µ:**

1. **CORS_ORIGIN = "\*"**:
   - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ –¥–ª—è development
   - –ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –æ—Ç –ª—é–±–æ–≥–æ origin –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –¥–µ–ø–ª–æ–µ
   - –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è frontend –º–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–æ–º–µ–Ω
   - –í production: —É—Å—Ç–∞–Ω–æ–≤–∏ `CORS_ORIGIN=https://monolit-planner-frontend.onrender.com`

2. **VITE_API_URL = sync:false**:
   - –ì–æ–≤–æ—Ä–∏—Ç Render –ù–ï –∂–¥–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç –¥—Ä—É–≥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –≤ Dashboard –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è backend
   - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∞–π—Ç–æ–≤ —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º API

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –∏ –ø–æ—á–µ–º—É –æ–Ω–∏ —Ö—É–∂–µ:**

- ‚ùå **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å**: —Ç–µ—Ä—è–µ–º –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- ‚ùå **Reverse proxy –Ω–∞ frontend**: —É—Å–ª–æ–∂–Ω—è–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, –Ω—É–∂–µ–Ω nginx/express
- ‚ùå **–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ URL (/api)**: –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∞–π—Ç–æ–≤ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –¥–æ–º–µ–Ω–∞—Ö

**–ò—Ç–æ–≥:** –≠—Ç–æ –ù–ï –∫–æ—Å—Ç—ã–ª–∏, –∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤!

### ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ shared –ø–∞–∫–µ—Ç–∞

**ensure-shared-build.js** (–≤ backend/scripts –∏ frontend/scripts):

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ TypeScript –≤ shared/
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
- –°–æ–±–∏—Ä–∞–µ—Ç shared –ø–∞–∫–µ—Ç, –µ—Å–ª–∏ dist/ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Å–±–æ—Ä–∫—É, –µ—Å–ª–∏ dist/ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ù–µ –Ω—É–∂–Ω–æ —è–≤–Ω–æ —Å–æ–±–∏—Ä–∞—Ç—å shared –≤ render.yaml buildCommand
- prestart/prebuild —Ö—É–∫–∏ –¥–µ–ª–∞—é—Ç –≤—Å—ë –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –£—Å–∫–æ—Ä—è–µ—Ç –ª–æ–∫–∞–ª—å–Ω—É—é —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É (—Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤–∞—è —Å–±–æ—Ä–∫–∞)

---

## üìù FEATURE FLAGS

–í—Å–µ –≤ `shared/src/constants.ts`:

```typescript
FEATURE_FLAGS = {
  FF_AI_DAYS_SUGGEST: false,    // AI-–ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –¥–Ω–µ–π
  FF_PUMP_MODULE: false,         // –ú–æ–¥—É–ª—å –±–µ—Ç–æ–Ω–æ–Ω–∞—Å–æ—Å–∞
  FF_ADVANCED_METRICS: false,    // –ê–Ω–∞–ª–∏–∑ —Å–∫–æ—Ä–æ—Å—Ç–∏
  FF_DARK_MODE: false,           // –¢—ë–º–Ω–∞—è —Ç–µ–º–∞
  FF_SPEED_ANALYSIS: false       // –°–∫–æ—Ä–æ—Å—Ç—å –º¬≤/–¥–µ–Ω—å
}
```

**–ö–∞–∫ –≤–∫–ª—é—á–∏—Ç—å:**
```http
POST /api/config
{
  "feature_flags": {
    "FF_DARK_MODE": true
  }
}
```

---

## üéØ ROADMAP (–ë—É–¥—É—â–µ–µ)

- [ ] AI-–ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –¥–Ω–µ–π (ML-–º–æ–¥–µ–ª—å)
- [ ] –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –±–µ—Ç–æ–Ω–æ–Ω–∞—Å–æ—Å–∞
- [ ] –ê–Ω–∞–ª–∏–∑ —Å–∫–æ—Ä–æ—Å—Ç–∏ (–º¬≤/–¥–µ–Ω—å –ø–æ —ç–ª–µ–º–µ–Ω—Ç–∞–º)
- [ ] Multilang (EN, DE)
- [ ] PDF-–æ—Ç—á—ë—Ç—ã
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∏–µ–π
- [ ] –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (React Native)

---

## üìå –ò–ù–°–¢–†–£–ö–¶–ò–ò –î–õ–Ø AI

### –ö–æ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞–µ—à—å —Ä–∞–±–æ—Ç—É:

1. **–í–°–ï–ì–î–ê —á–∏—Ç–∞–π CLAUDE.MD** –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∑–∞–¥–∞—á
2. –ü—Ä–æ–≤–µ—Ä—å –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å —Ñ–æ—Ä–º—É–ª –≤ `shared/src/formulas.ts`
3. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –¥–∏–∑–∞–π–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ü–≤–µ—Ç–æ–≤–æ–π –ø–∞–ª–∏—Ç—Ä–µ

### –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π:

1. **–û–±–Ω–æ–≤–∏ CLAUDE.MD** —Å –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é
2. –î–æ–±–∞–≤—å —Ñ–æ—Ä–º—É–ª—ã –≤ —Ä–∞–∑–¥–µ–ª "–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –§–û–†–ú–£–õ–´"
3. –û–±–Ω–æ–≤–∏ ROADMAP
4. –î–æ–±–∞–≤—å feature flag, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

### –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–æ—Ä–º—É–ª:

1. **‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û:** –û–±–Ω–æ–≤–∏ `shared/src/formulas.ts`
2. –û–±–Ω–æ–≤–∏ `backend/src/services/calculator.js` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç shared)
3. –û–±–Ω–æ–≤–∏ CLAUDE.MD —Å –Ω–æ–≤–æ–π —Ñ–æ—Ä–º—É–ª–æ–π
4. –î–æ–±–∞–≤—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏

### –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∏–∑–∞–π–Ω–∞:

1. –û–±–Ω–æ–≤–∏ `frontend/src/styles/global.css`
2. –ü—Ä–æ–≤–µ—Ä—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ü–≤–µ—Ç–∞–º –≤ CLAUDE.MD
3. –û–±–Ω–æ–≤–∏ CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

### –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ API endpoints:

1. –î–æ–±–∞–≤—å –≤ `backend/src/routes/`
2. –û–±–Ω–æ–≤–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ README.md
3. –î–æ–±–∞–≤—å –≤ API-–∫–ª–∏–µ–Ω—Ç `frontend/src/services/api.ts`
4. –û–±–Ω–æ–≤–∏ —Ç–∏–ø—ã –≤ `shared/src/types.ts`, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

---

## üîç DEBUGGING CHECKLIST

### –ï—Å–ª–∏ —Ä–∞—Å—á—ë—Ç—ã –Ω–µ–≤–µ—Ä–Ω—ã–µ:

1. –ü—Ä–æ–≤–µ—Ä—å `concrete_m3` ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω?
2. –ü—Ä–æ–≤–µ—Ä—å `unit_cost_on_m3` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ concrete_m3 –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞?
3. –ü—Ä–æ–≤–µ—Ä—å KROS-–æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ ‚Äî `Math.ceil`, –Ω–µ `Math.round`!
4. –ü—Ä–æ–≤–µ—Ä—å weighted averages ‚Äî –≤–∑–≤–µ—à–µ–Ω—ã –ª–∏ –ø–æ concrete_m3?

### –ï—Å–ª–∏ UI –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è:

1. –ü—Ä–æ–≤–µ—Ä—å React Query cache
2. –ü—Ä–æ–≤–µ—Ä—å Context API ‚Äî –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ?
3. –ü—Ä–æ–≤–µ—Ä—å `usePositions` hook ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ª–∏ invalidation?

### –ï—Å–ª–∏ –∏–º–ø–æ—Ä—Ç XLSX –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ü—Ä–æ–≤–µ—Ä—å –ø–∞—Ä—Å–µ—Ä ‚Äî –Ω–∞—Ö–æ–¥–∏—Ç –ª–∏ bridge_id?
2. –ü—Ä–æ–≤–µ—Ä—å –º—ç–ø–ø–∏–Ω–≥ ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ª–∏ –∫–æ–ª–æ–Ω–∫–∏?
3. –ü—Ä–æ–≤–µ—Ä—å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é ‚Äî –≤—Å–µ –ª–∏ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã?

---

## üìä SUCCESS CRITERIA

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤, –∫–æ–≥–¥–∞:

- ‚úÖ –í—Å–µ –ø–æ–¥—Ç–∏–ø—ã –ø—Ä–∏–≤–µ–¥–µ–Ω—ã –∫ CZK/–º¬≥ –±–µ—Ç–æ–Ω–∞
- ‚úÖ KROS-–æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–≤–≤–µ—Ä—Ö, —à–∞–≥ 50)
- ‚úÖ –ú–µ—Å—è—Ü—ã –∏ –Ω–µ–¥–µ–ª–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å 30/22 –¥–Ω—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ê–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–µ input-–ø–æ–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ –æ—Ç–ª–∏—á–∏–º—ã
- ‚úÖ RFI-—Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç –ø—Ä–æ–ø—É—Å–∫–∏ (–Ω–æ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç)
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç XLSX/CSV –≥–æ—Ç–æ–≤ –∫ KROS4
- ‚úÖ –î–µ–ø–ª–æ–π –Ω–∞ Render —á–µ—Ä–µ–∑ Blueprint —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Frontend –∏ Backend —Ä–∞–±–æ—Ç–∞—é—Ç —Ä–∞–∑–¥–µ–ª—å–Ω–æ

---

## üõ†Ô∏è –£–°–¢–ê–ù–û–í–ö–ê –ò –ù–ê–°–¢–†–û–ô–ö–ê

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

- **Node.js**: 18.20.4 (–∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ –≤ `.nvmrc`)
  - ‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ù–û**: better-sqlite3 —Ç—Ä–µ–±—É–µ—Ç –∏–º–µ–Ω–Ω–æ Node 18.x
  - ‚ùå Node.js 25.x –ù–ï –†–ê–ë–û–¢–ê–ï–¢ (–æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ C++)
  - –£—Å—Ç–∞–Ω–æ–≤–∫–∞: `nvm install 18.20.4 && nvm use 18.20.4`

- **npm**: –≤–µ—Ä—Å–∏—è 9+
- **Git**: –¥–ª—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º

### –õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

#### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone https://github.com/alpro1000/Monolit-Planner.git
cd Monolit-Planner
```

#### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π shared –ø–∞–∫–µ—Ç–∞
```bash
cd shared
npm install
npm run build
cd ..
```

#### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ backend
```bash
cd backend
npm install
```

**Environment –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (backend/.env):**
```env
NODE_ENV=development
PORT=3001
CORS_ORIGIN=*
DATABASE_URL=./data/monolit.db
```

#### 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ frontend
```bash
cd frontend
npm install
```

**Environment –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (frontend/.env.local):**
```env
VITE_API_URL=http://localhost:3001
```

#### 5. –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**Backend:**
```bash
cd backend
npm run dev
# –ò–ª–∏ –¥–ª—è production: npm start
```

**Frontend (–≤ –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ):**
```bash
cd frontend
npm run dev
# –û—Ç–∫—Ä–æ–µ—Ç—Å—è –Ω–∞ http://localhost:5173
```

**–û–±–µ –∫–æ–º–∞–Ω–¥—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (–∫–æ—Ä–Ω–µ–≤–æ–π –∫–∞—Ç–∞–ª–æ–≥):**
```bash
# –¢—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ concurrently (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
npm install -g concurrently
concurrently "cd backend && npm run dev" "cd frontend && npm run dev"
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ backend:
```bash
cd backend
npm run dev
# –°–æ–∑–¥–∞—ë—Ç ./data/monolit.db —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏:
# - bridges
# - positions
# - snapshots
# - project_config
# - rfi_messages
```

### –°–±–æ—Ä–∫–∞ –¥–ª—è production

```bash
# Shared –ø–∞–∫–µ—Ç
cd shared && npm run build && cd ..

# Frontend
cd frontend && npm run build
# –†–µ–∑—É–ª—å—Ç–∞—Ç: frontend/dist/

# Backend
cd backend && npm start
# –ó–∞–ø—É—Å–∫–∞–µ—Ç express —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 3001
```

### –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Render

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Blueprint** (`render.yaml`):

1. Push –∫–æ–¥ –Ω–∞ GitHub
2. –í Render Dashboard: **"New" ‚Üí "Blueprint"**
3. –í—ã–±—Ä–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `alpro1000/Monolit-Planner`
4. Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥—ë—Ç `render.yaml`
5. –ù–∞–∂–∞—Ç—å **"Create New Resources"**

–ü–æ—Å–ª–µ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è:
- Backend –ø–æ–ª—É—á–∏—Ç URL: `https://monolit-planner-api.onrender.com`
- Frontend –ø–æ–ª—É—á–∏—Ç URL: `https://monolit-planner-frontend.onrender.com`
- –í Render Dashboard ‚Üí frontend ‚Üí Environment ‚Üí –¥–æ–±–∞–≤–∏—Ç—å `VITE_API_URL=https://monolit-planner-api.onrender.com`

---

## üìã –°–ï–°–°–ò–Ø v4.3.3 - –†–ï–ó–Æ–ú–ï

### –ü—Ä–æ–±–ª–µ–º—ã, –≤—ã—è–≤–ª–µ–Ω–Ω—ã–µ –≤ –Ω–∞—á–∞–ª–µ —Å–µ—Å—Å–∏–∏

#### 1. ‚ùå Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 500 –æ—à–∏–±–∫—É –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–æ–∑–∏—Ü–∏–π
**–°–∏–º–ø—Ç–æ–º:** `monolit-planner-api.onrender.com/api/positions:1 Failed to load resource: the server responded with a status of 500`

**–ü—Ä–∏—á–∏–Ω–∞:** SQL statement –≤ `backend/src/routes/positions.js` –≤ PUT-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ —Å—Ç—Ä–æ–∏–ª—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –≤ –Ω–∞—á–∞–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∏—Å–ø–æ–ª—å–∑—É—è –∫–ª—é—á–∏ –ø–æ–ª–µ–π –∏–∑ `updates[0]`. –ù–æ –∫–∞–∂–¥–∞—è –ø–æ–∑–∏—Ü–∏—è –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Ä–∞–∑–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, —á—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ –æ—à–∏–±–∫—É SQL.

**–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ–¥–µ–ª–∞–Ω PUT-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é SQL –¥–ª—è –ö–ê–ñ–î–û–ì–û –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω–æ.

**–§–∞–π–ª:** `backend/src/routes/positions.js` (v4.3.3)

#### 2. ‚ùå –û–±—ä—ë–º –±–µ—Ç–æ–Ω–∞ –Ω–µ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è –∏–∑ PartHeader –≤ —Ç–∞–±–ª–∏—Ü—É
**–°–∏–º–ø—Ç–æ–º:** –ü—Ä–∏ –≤–≤–æ–¥–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ `Objem betonu celkem:` –ø–æ–ª–µ –≤ PartHeader —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –ø–æ—è–≤–ª—è–ª–æ—Å—å –≤ —Å—Ç—Ä–æ–∫–µ beton (Mno≈æstv√≠ –∫–æ–ª–æ–Ω–∫–∞).

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ë—ã–ª–∞ –ø–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å —Å–ª–æ–∂–Ω—É—é –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±—ã–ª –∑–∞–ø—É—Ç–∞–Ω–Ω—ã–º (–Ω–µ —è—Å–Ω–æ –≥–¥–µ –≤–≤–æ–¥–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ)
- Backend 500 –æ—à–∏–±–∫–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏ –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö

**–†–µ—à–µ–Ω–∏–µ:**
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø—Ä–æ—Å—Ç–∞—è, –ø–æ–Ω—è—Ç–Ω–∞—è **–æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω—è—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
- PartHeader —Å–æ–¥–µ—Ä–∂–∏—Ç INPUT –ø–æ–ª–µ "Objem betonu celkem:" –¥–ª—è –≤–≤–æ–¥–∞ –æ–±—ä—ë–º–∞
- –≠—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É beton row —á–µ—Ä–µ–∑ `handleBetonQuantityUpdate()`
- –°—Ç—Ä–æ–∫–∞ beton "–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞" (disabled=true, readonly-style CSS) –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–§–∞–π–ª—ã:**
- `frontend/src/components/PartHeader.tsx` (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ø–æ–ª–µ –≤–≤–æ–¥–∞)
- `frontend/src/components/PositionsTable.tsx` (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏)
- `frontend/src/components/PositionRow.tsx` (–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ beton —Å—Ç—Ä–æ–∫–∞)

#### 3. ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≤–≤–æ–¥–∏—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
**–°–∏–º–ø—Ç–æ–º:** –í –ø–æ–ª—è—Ö –≤–≤–æ–¥–∞ (qty, crew_size, wage_czk_ph, shift_hours, days) –º–æ–∂–Ω–æ –±—ã–ª–æ –≤–≤–µ—Å—Ç–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞.

**–ü—Ä–∏—á–∏–Ω–∞:** Input-–ø–æ–ª—è –Ω–µ –∏–º–µ–ª–∏ `min="0"` –∞—Ç—Ä–∏–±—É—Ç–∞ –∏ –Ω–µ –±—ã–ª–æ JavaScript-–≤–∞–ª–∏–¥–∞—Ü–∏–∏.

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω `min="0"` HTML-–∞—Ç—Ä–∏–±—É—Ç –∫–æ –≤—Å–µ–º —á–∏—Å–ª–æ–≤—ã–º input-–ø–æ–ª—è–º
- –î–æ–±–∞–≤–ª–µ–Ω–∞ JavaScript-–≤–∞–ª–∏–¥–∞—Ü–∏—è: `Math.max(0, parseFloat(...) || 0)` –≤ onChange –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö
- –î–≤–æ–π–Ω–∞—è –∑–∞—â–∏—Ç–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –≤–≤–æ–¥ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

**–§–∞–π–ª:** `frontend/src/components/PositionRow.tsx` (–æ–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ —á–∏—Å–ª–æ–≤—ã–µ –ø–æ–ª—è)

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –±–µ—Ç–æ–Ω–∞ (v4.3.3 - –û–ö–û–ù–ß–ê–¢–ï–õ–¨–ù–ê–Ø)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ PartHeader (—Ä—è–¥–æ–º —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º)          ‚îÇ
‚îÇ ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚îÇ
‚îÇ "N√°zev ƒç√°sti": [Z√ÅKLADY...] üìù          ‚îÇ
‚îÇ "Objem betonu celkem": [255] m¬≥ ‚Üê INPUT ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ onBetonQuantityUpdate()
                   ‚Üì
        updatePositions(updates)
                   ‚Üì
     PUT /api/positions (backend)
                   ‚Üì
Backend calculates: concrete_m3, unit_cost_on_m3, etc.
                   ‚Üì
        Response with full positions[]
                   ‚Üì
    React Query invalidates + refetches
                   ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Table positions (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ)       ‚îÇ
‚îÇ ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚îÇ
‚îÇ beton row:                               ‚îÇ
‚îÇ - Mno≈æstv√≠: 255 m¬≥ (READ-ONLY üîí)       ‚îÇ
‚îÇ - LIDI: 4                                ‚îÇ
‚îÇ - Kƒå/HOD: 398                            ‚îÇ
‚îÇ - –û—Å—Ç–∞–ª—å–Ω—ã–µ fields —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã         ‚îÇ
‚îÇ                                          ‚îÇ
‚îÇ –æ—Å—Ç–∞–ª—å–Ω—ã–µ rows (bednƒõn√≠, v√Ωztu≈æ):      ‚îÇ
‚îÇ - –ò—Å–ø–æ–ª—å–∑—É—é—Ç concrete_m3 = 255          ‚îÇ
‚îÇ - –í—Å–µ —Ä–∞—Å—á–µ—Ç—ã (Kƒç/m¬≥, KROS) –ø—Ä–∞–≤–∏–ª—å–Ω—ã!‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –∏—Ö —Ñ—É–Ω–∫—Ü–∏–∏

**1. `frontend/src/components/PartHeader.tsx`** (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ)
- ‚úÖ Input –¥–ª—è –Ω–∞–∑–≤–∞–Ω–∏—è —á–∞—Å—Ç–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ ("N√°zev ƒç√°sti")
- ‚úÖ Input –¥–ª—è –æ–±—ä—ë–º–∞ –±–µ—Ç–æ–Ω–∞ ("Objem betonu celkem") ‚Äî **–ì–õ–ê–í–ù–û–ï –ü–û–õ–ï**
- ‚úÖ Callbacks: `onItemNameUpdate()`, `onBetonQuantityUpdate()`
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ ü™® –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ –ü–æ–ª–µ —Å `min="0"`, `step="0.01"`

**2. `frontend/src/components/PositionsTable.tsx`** (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è)
- ‚úÖ Function: `handleBetonQuantityUpdate(partName, newQuantity)`
- ‚úÖ –ù–∞—Ö–æ–¥–∏—Ç beton position –≤ —á–∞—Å—Ç–∏
- ‚úÖ –í—ã–∑—ã–≤–∞–µ—Ç `updatePositions()` –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ üìä –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

**3. `frontend/src/components/PositionRow.tsx`** (–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ + –≤–∞–ª–∏–¥–∞—Ü–∏—è)
```typescript
// –î–ª—è beton row:
disabled={isLocked || position.subtype === 'beton'}  // –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù–ê
className={`input-cell ${position.subtype === 'beton' ? 'readonly-style' : ''}`}

// –î–ª—è –≤—Å–µ—Ö —á–∏—Å–ª–æ–≤—ã—Ö fields:
min="0"
onChange={(e) => handleFieldChange(field, Math.max(0, parseFloat(e.target.value) || 0))}
```

**4. `frontend/src/hooks/usePositions.ts`** (—Ä–∞—Å—à–∏—Ä–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ mutationFn
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ onSuccess (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ onError
- ‚úÖ Cache invalidation —Å –ª–æ–≥–∞–º–∏

**5. `frontend/src/services/api.ts`** (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- ‚úÖ –í—Å–µ endpoints —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ PUT /api/positions –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å partial updates

**6. `backend/src/routes/positions.js`** (–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï v4.3.3)
```javascript
// ‚ùå –ë–´–õ–û (v4.3.2 - –≤—ã–∑—ã–≤–∞–ª–æ 500 –æ—à–∏–±–∫—É):
const fieldNames = Object.keys(updates[0]);  // ‚Üê –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–π update!
const fieldPlaceholders = fieldNames.map(f => `${f} = ?`).join(', ');
const sql = `UPDATE positions SET ${fieldPlaceholders} WHERE id = ? AND bridge_id = ?`;
// ‚úó –ï—Å–ª–∏ updates[2] –∏–º–µ–µ—Ç –¥—Ä—É–≥–∏–µ –ø–æ–ª—è ‚Üí –æ—à–∏–±–∫–∞ SQL!

// ‚úÖ –°–¢–ê–õ–û (v4.3.3 - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ):
for (const update of updates) {
  const { id, ...fields } = update;

  // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º SQL –¥–ª—è –ö–ê–ñ–î–û–ì–û update –æ—Ç–¥–µ–ª—å–Ω–æ!
  const fieldNames = Object.keys(fields);
  const fieldPlaceholders = fieldNames.map(f => `${f} = ?`).join(', ');
  const sql = `UPDATE positions SET ${fieldPlaceholders} WHERE id = ? AND bridge_id = ?`;

  const values = [...Object.values(fields), id, bridge_id];
  db.prepare(sql).run(...values);  // ‚úì –†–∞–±–æ—Ç–∞–µ—Ç!
}
```

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö (–ø—Ä–∏–º–µ—Ä)

**–°—Ü–µ–Ω–∞—Ä–∏–π: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–µ–Ω—è–µ—Ç –æ–±—ä—ë–º –±–µ—Ç–æ–Ω–∞**

```
1Ô∏è‚É£  User –≤ PartHeader –≤–≤–æ–¥–∏—Ç: "255" (–≤ –ø–æ–ª–µ "Objem betonu celkem")
    –ù–∞–∂–∏–º–∞–µ—Ç Tab/—â–µ–ª–∫–∞–µ—Ç –≤–Ω–µ –ø–æ–ª—è

2Ô∏è‚É£  PartHeader.handleBetonBlur() —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
    –õ–æ–≥–∏: ü™® PartHeader.handleBetonBlur: value="255", parsed=255, current=255
    –í—ã–∑—ã–≤–∞–µ—Ç: onBetonQuantityUpdate(255)

3Ô∏è‚É£  PositionsTable.handleBetonQuantityUpdate() –ø–æ–ª—É—á–∞–µ—Ç –≤—ã–∑–æ–≤
    –õ–æ–≥–∏: üìä handleBetonQuantityUpdate called: part="Z√ÅKLADY", qty=255
    –ù–∞—Ö–æ–¥–∏—Ç beton position: id=abc123
    –õ–æ–≥–∏: ‚úÖ Found beton position: id=abc123, current qty=43.8, new qty=255

4Ô∏è‚É£  –í—ã–∑—ã–≤–∞–µ—Ç updatePositions([{id: abc123, qty: 255}])
    –õ–æ–≥–∏: üì§ Calling updatePositions with: [{id: abc123, qty: 255}]

5Ô∏è‚É£  usePositions.updateMutation —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
    –õ–æ–≥–∏: üîÑ updateMutation: sending 1 updates to backend
    –õ–æ–≥–∏: Updates: [{"id":"abc123","qty":255}]

6Ô∏è‚É£  Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç: PUT /api/positions
    Body: {bridge_id: "SO201", updates: [{id: "abc123", qty: 255}]}

7Ô∏è‚É£  Backend –ø–æ–ª—É—á–∞–µ—Ç –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
    –õ–æ–≥–∏: üìù PUT /api/positions: bridge_id=SO201, 1 updates
    –õ–æ–≥–∏: Updating position id=abc123: qty

    –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç: UPDATE positions SET qty = ? WHERE id = ? AND bridge_id = ?
    –í—ã–ø–æ–ª–Ω—è–µ—Ç —Å values: [255, "abc123", "SO201"]

8Ô∏è‚É£  Backend –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç –í–°–ï –ø–æ–ª—è:
    - concrete_m3 = 255 (–¥–ª—è beton)
    - unit_cost_on_m3 = cost_czk / 255 (–¥–ª—è –≤—Å–µ—Ö subtypes —á–∞—Å—Ç–∏)
    - kros_unit_czk, kros_total_czk, etc.

9Ô∏è‚É£  –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç response
    –õ–æ–≥–∏: ‚úÖ updateMutation: response received {positions: [...], header_kpi: {...}}

üîü  React Query invalidates cache
    –õ–æ–≥–∏: ‚úÖ updateMutation.onSuccess: invalidated query cache

1Ô∏è‚É£1Ô∏è‚É£ Query re-fetches data (GET /api/positions?bridge_id=SO201)

1Ô∏è‚É£2Ô∏è‚É£ usePositions context updated
    setPositions(newPositions)
    setHeaderKPI(newHeaderKPI)

1Ô∏è‚É£3Ô∏è‚É£ PositionsTable –∏ PartHeader re-render
    PartHeader: betonQuantity = 255 (–≤—ã—á–∏—Å–ª–µ–Ω–æ –∏–∑ beton row)
    Table: beton row qty = 255 ‚úì
    –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω—ã —Å –Ω–æ–≤—ã–º concrete_m3!

1Ô∏è‚É£4Ô∏è‚É£ KPI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
    sum_concrete_m3 = 255
    project_unit_cost_czk_per_m3 = sum_kros_total_czk / 255
    estimated_months/weeks –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω—ã!
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ø—Ä–æ–≤–µ—Ä–µ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç)

‚úÖ **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (F12 Console):**

1. –í–≤–æ–¥ –æ–±—ä—ë–º–∞ –≤ PartHeader "Objem betonu celkem"
   - –õ–æ–≥–∏ ü™® –ø–æ—è–≤–ª—è—é—Ç—Å—è
   - –ó–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É beton row
   - –í—Å–µ —Ä–∞—Å—á—ë—Ç—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è

2. –ü–æ–ø—ã—Ç–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å beton row –≤ —Ç–∞–±–ª–∏—Ü–µ
   - –ü–æ–ª–µ disabled (—Å–µ—Ä–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞)
   - Tooltip: "Objem betonu (ƒçte se z PartHeader v√Ω≈°e)"
   - Edit –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω

3. –ü–æ–ø—ã—Ç–∫–∞ –≤–≤–µ—Å—Ç–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –ª—é–±–æ–µ —á–∏—Å–ª–æ–≤–æ–µ –ø–æ–ª–µ
   - HTML min="0" –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç
   - JavaScript Math.max() –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç

4. Backend PUT –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
   - –ë–æ–ª—å—à–µ –Ω–µ—Ç 500 –æ—à–∏–±–æ–∫
   - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π SQL —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - –í—Å–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ

### Commits –≤ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏

- ‚úÖ `f92a03d` - üîß Fix: Prevent negative values + fix backend update logic + add logging
- ‚úÖ `fc43f9f` - üîß Debug: Add logging + lock beton row as READ-ONLY
- ‚úÖ `a89ec0b` - üìù v4.3.2: Document correct concrete volume architecture
- ‚úÖ `6ade33e` - ‚ú® v4.3.2: Restore concrete volume input in PartHeader with bidirectional sync
- ‚úÖ `ad1befb` - üìù Update CLAUDE.MD: Document v4.3.1 concrete volume architecture fix

---

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### –ë–ª–∏–∂–∞–π—à–∏–µ –∑–∞–¥–∞—á–∏ (–ì–æ—Ç–æ–≤–æ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é)

#### 1. ‚úÖ **–û—Ç–ø—Ä–∞–≤–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ GitHub**
```bash
git push origin claude/finalize-documentation-011CUv1xKwDSHYhEg5M8d5uA
```

#### 2. üß™ **–ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–≤—Ä—É—á–Ω—É—é)**

**–¢–µ—Å—Ç 1: –í–≤–æ–¥ –æ–±—ä—ë–º–∞ –±–µ—Ç–æ–Ω–∞**
- [ ] –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- [ ] –í—ã–±—Ä–∞—Ç—å –º–æ—Å—Ç
- [ ] –ù–∞–π—Ç–∏ —á–∞—Å—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Z√ÅKLADY)
- [ ] –í PartHeader –≤–≤–µ—Å—Ç–∏ "100" –≤ –ø–æ–ª–µ "Objem betonu celkem"
- [ ] –ù–∞–∂–∞—Ç—å Tab
- [ ] **–û–∂–∏–¥–∞–µ–º–æ**: –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ beton row, –≤—Å–µ —Ñ–æ—Ä–º—É–ª—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è
- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ F12**: –õ–æ–≥–∏ ü™®, üìä, üîÑ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã

**–¢–µ—Å—Ç 2: –ü–æ–ø—ã—Ç–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è beton row**
- [ ] –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –ø–æ–ª–µ "Mno≈æstv√≠" –≤ beton —Å—Ç—Ä–æ–∫–µ
- [ ] **–û–∂–∏–¥–∞–µ–º–æ**: –ü–æ–ª–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–µ (—Å–µ—Ä—ã–π —Ü–≤–µ—Ç, cursor: not-allowed)
- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å**: Tooltip –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "Objem betonu (ƒçte se z PartHeader)"

**–¢–µ—Å—Ç 3: –í–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π**
- [ ] –í –ø–æ–ª–µ "Crew size" –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –≤–≤–µ—Å—Ç–∏ "-5"
- [ ] **–û–∂–∏–¥–∞–µ–º–æ**: HTML min="0" –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É
- [ ] –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—è—Ö (qty, wage, shift_hours, days)
- [ ] **–í—Å–µ –¥–æ–ª–∂–Ω—ã –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è**

**–¢–µ—Å—Ç 4: Backend PUT –æ–±—Ä–∞–±–æ—Ç—á–∏–∫**
- [ ] –í F12 Network tab –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –ø–æ–∑–∏—Ü–∏–π
- [ ] **–û–∂–∏–¥–∞–µ–º–æ**: –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 200 OK (–±–µ–∑ 500 –æ—à–∏–±–æ–∫)
- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å**: Backend console –ª–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π SQL

**–¢–µ—Å—Ç 5: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤ –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã**
- [ ] –ò–∑–º–µ–Ω–∏—Ç—å qty –≤ —Ç–∞–±–ª–∏—Ü–µ beton row (—á–µ—Ä–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥—Ä—É–≥–æ–π —á–∞—Å—Ç–∏)
- [ ] **–û–∂–∏–¥–∞–µ–º–æ**: PartHeader "Objem betonu celkem" –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
- [ ] –ò–∑–º–µ–Ω–∏—Ç—å –≤ PartHeader **–û–±–≤–µ–º betonu celkem"
- [ ] **–û–∂–∏–¥–∞–µ–º–æ**: Table beton row –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

#### 3. üìä **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º—É–ª**

- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `concrete_m3 = qty` –¥–ª—è beton positions
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `unit_cost_on_m3 = cost_czk / concrete_m3` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ KROS-–æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç: `ceil(unit_cost_on_m3 / 50) * 50`
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –º–µ—Å—è—Ü—ã/–Ω–µ–¥–µ–ª–∏ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —Å –Ω–æ–≤—ã–º concrete_m3

#### 4. üöÄ **Deployment –Ω–∞ Render (–∫–æ–≥–¥–∞ –≥–æ—Ç–æ–≤–æ)**

```bash
# –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏
git push origin claude/finalize-documentation-011CUv1xKwDSHYhEg5M8d5uA

# –í Render Dashboard:
# - Blueprint ‚Üí alpro1000/Monolit-Planner
# - Auto-deploy –Ω–∞—á–Ω—ë—Ç—Å—è –ø—Ä–∏ push –≤ main
```

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ (TODO)

#### üìù **–£–ª—É—á—à–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ README.md
- [ ] –°–æ–∑–¥–∞—Ç—å user guide –Ω–∞ —á–µ—à—Å–∫–æ–º —è–∑—ã–∫–µ
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å API endpoints
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–∏–¥–µ–æ—É—Ä–æ–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### üé® **UX/UI —É–ª—É—á—à–µ–Ω–∏—è**
- [ ] –£–±—Ä–∞—Ç—å –∏–ª–∏ —Å–∫—Ä—ã—Ç—å console.log() –ª–æ–≥–∏ –¥–ª—è production
- [ ] –î–æ–±–∞–≤–∏—Ç—å toast-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å spinner-–∞–Ω–∏–º–∞—Ü–∏—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- [ ] –£–ª—É—á—à–∏—Ç—å error handling (–ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é)

#### üß™ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è formulas.ts
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å e2e-—Ç–µ—Å—Ç—ã –¥–ª—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (Cypress/Playwright)
- [ ] –î–æ–±–∞–≤–∏—Ç—å GitHub Actions CI/CD

#### üìà **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (ROADMAP)**
- [ ] Excel import —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–∞—Ä—Å–∏–Ω–≥–æ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- [ ] Snapshots —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, –Ω—É–∂–Ω–æ UI)
- [ ] RFI —Å–∏—Å—Ç–µ–º–∞ —Å notifications
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –≤ KROS4 XML
- [ ] Multi-bridge aggregation (—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–æ—Å—Ç–æ–≤)
- [ ] AI-–ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –¥–Ω–µ–π (ML-–º–æ–¥–µ–ª—å)

#### üîê **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ production**
- [ ] CORS_ORIGIN –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–æ–º–µ–Ω (–Ω–µ "*")
- [ ] Authentication/Authorization —Å–∏—Å—Ç–µ–º–∞
- [ ] Rate limiting –Ω–∞ API
- [ ] SQL injection protection (—É–∂–µ –µ—Å—Ç—å —á–µ—Ä–µ–∑ prepared statements)
- [ ] HTTPS everywhere
- [ ] Database backup strategy

### –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å –∫–æ–¥–æ–º (–¥–ª—è –Ω–æ–≤—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)

1. **–ü—Ä–æ—á–∏—Ç–∞–π CLAUDE.MD** (—ç—Ç–æ—Ç —Ñ–∞–π–ª) ‚Äî –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã
2. **–ò–∑—É—á–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞**: `ls -la` –≤ –∫–∞–∂–¥–æ–π –ø–∞–ø–∫–µ
3. **–ó–∞–ø—É—Å—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–æ**: `npm run dev` –≤ backend –∏ frontend
4. **–û—Ç–∫—Ä–æ–π—Ç–µ F12 Console** –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö
5. **–ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ commitis**: `git log --oneline` (–∏—Å—Ç–æ—Ä–∏—è —Ä–µ—à–µ–Ω–∏–π)
6. **–ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ formulas.ts**: –≥–¥–µ –≤—Å–µ —Ä–∞—Å—á—ë—Ç—ã –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç

### –°–±–æ–π –∏ recovery

**–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å –ø–æ—Å–ª–µ pull:**
```bash
# 1. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å shared –ø–∞–∫–µ—Ç
cd shared && npm install && npm run build && cd ..

# 2. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
cd backend && rm -rf node_modules && npm install && cd ..
cd frontend && rm -rf node_modules && npm install && cd ..

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ
cd backend && npm run dev
# –í –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
cd frontend && npm run dev
```

**–ï—Å–ª–∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∞:**
```bash
# –£–¥–∞–ª–∏—Ç—å –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å
rm backend/data/monolit.db

# –ó–∞–ø—É—Å—Ç–∏—Ç—å backend (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –ë–î)
cd backend && npm run dev
```

---

## üîê –í–ï–†–°–ò–û–ù–ò–†–û–í–ê–ù–ò–ï

**–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è:** v4.3.6 (2025-11-08)

**–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π:**

- **v4.3.6** (2025-11-08) - **CRITICAL FIX: Only send editable fields to backend** üîßüîßüîß
  - ‚úÖ **–ù–ê–ô–î–ï–ù–ê –ò –ò–°–ü–†–ê–í–õ–ï–ù–ê –ù–ê–°–¢–û–Ø–©–ê–Ø –ü–†–û–ë–õ–ï–ú–ê**: PositionsTable –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∞ –í–°–ï –ø–æ–ª—è (–≤–∫–ª—é—á–∞—è –≤—ã—á–∏—Å–ª–µ–Ω–Ω—ã–µ) –Ω–∞ backend!
  - **–ü—Ä–æ–±–ª–µ–º–∞**: `handleBetonQuantityUpdate()` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ `...betonPosition` —á—Ç–æ –∫–æ–ø–∏—Ä–æ–≤–∞–ª–æ –≤—Å–µ –ø–æ–ª—è:
    ```typescript
    // ‚ùå –ë–´–õ–û (v4.3.5):
    const updates = [{
      ...betonPosition,      // –ö–æ–ø–∏—Ä—É–µ—Ç –í–°–ï!
      qty: newQuantity       // labor_hours, cost_czk, unit_cost_on_m3, kros_total_czk...
    }];
    // –≠—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç SQL –æ—à–∏–±–∫—É ‚Üí 500!
    ```
  - **–†–µ—à–µ–Ω–∏–µ**: –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¢–û–õ–¨–ö–û —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–µ –ø–æ–ª—è:
    ```typescript
    // ‚úÖ –°–¢–ê–õ–û (v4.3.6):
    const updates = [{
      id: betonPosition.id,
      qty: newQuantity
      // –¢–û–õ–¨–ö–û —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–µ! backend —Å–∞–º –ø–µ—Ä–µ—Å—á–∏—Ç–∞–µ—Ç labor_hours, cost_czk –∏ —Ç.–¥.
    }];
    ```
  - **–ü–æ—á–µ–º—É 500 –æ—à–∏–±–∫–∞?** Backend –ø—ã—Ç–∞–ª—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–µ–≤–µ—Ä–Ω—ã–π SQL:
    ```sql
    UPDATE positions SET qty=?, labor_hours=?, cost_czk=?, unit_cost_on_m3=?, ... id=?, bridge_id=?
    -- –ö–æ–ª–æ–Ω–∫–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç! –û—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤—ã—á–∏—Å–ª–µ–Ω–Ω—ã–µ –ø–æ–ª—è –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ UPDATE
    ```
  - **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ**:
    ```
    1. PartHeader: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç "Objem betonu celkem" ‚úì
    2. PartHeader.handleBetonBlur() ‚Üí onBetonQuantityUpdate(value) ‚úì
    3. PositionsTable.handleBetonQuantityUpdate() ‚Üí –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¢–û–õ–¨–ö–û {id, qty} ‚úì
    4. Backend: UPDATE positions SET qty=?, updated_at=CURRENT_TIMESTAMP ‚úì
    5. Backend: calculatePositionFields() –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç –í–°–ï derived fields ‚úì
    6. Response: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—ã–µ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ ‚úì
    7. Frontend: React Query –æ–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç ‚úì
    8. PartHeader useEffect: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç editedBeton = newValue ‚úì
    9. Table: –ü–µ—Ä–µ–¥–∏-—Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —Å –Ω–æ–≤—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º ‚úì
    ```
  - **Files modified**: `frontend/src/components/PositionsTable.tsx` (handleBetonQuantityUpdate + handleItemNameUpdate)
  - **Impact**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è! –ó–Ω–∞—á–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è –∏–∑ PartHeader –≤ —Ç–∞–±–ª–∏—Ü—É –ø—Ä–∞–≤–∏–ª—å–Ω–æ!

- **v4.3.5** (2025-11-08) - **UX & Robustness: Rename 'beton' to 'Betonov√°n√≠'** ‚ú®
  - ‚úÖ **–£–ª—É—á—à–µ–Ω–∏–µ UX**: –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ "beton" ‚Üí "Betonov√°n√≠" (–ë–µ—Ç–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ) –¥–ª—è –±–æ–ª–µ–µ –ø–æ–Ω—è—Ç–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
  - ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–æ SUBTYPE_LABELS**: –ú–∞–ø–ø–∏–Ω–≥ –¥–ª—è –ø–æ–∫–∞–∑—ã–≤–∞–µ–º—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–π –ø–æ–¥—Ç–∏–ø–æ–≤ —Ä–∞–±–æ—Ç (—á–µ—à—Å–∫–∏–π —è–∑—ã–∫)
  - ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è 500 –æ—à–∏–±–∫–∞**: Edge case –∫–æ–≥–¥–∞ –Ω–µ—Ç –ø–æ–ª–µ–π –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ–π fieldNames
  - **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞**:
    ```
    ‚úì "Objem betonu celkem" INPUT –ø–æ–ª–µ –≤ PartHeader (–≤–≤–æ–¥–∏—Ç—Å—è –≤—Ä—É—á–Ω—É—é, –ø–æ—Ç–æ–º –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑ XLSX)
    ‚úì Beton row –≤ —Ç–∞–±–ª–∏—Ü–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–∫ READ-ONLY (–ø–æ–º–µ—á–µ–Ω–æ –∫–∞–∫ "Betonov√°n√≠")
    ‚úì –û–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è: PartHeader ‚Üí Table (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤ v4.3.4)
    ‚úì –í—Å–µ —Ä–∞—Å—á—ë—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ concrete_m3
    ```
  - **Files modified**: `shared/src/constants.ts`, `frontend/src/components/PositionRow.tsx`, `backend/src/routes/positions.js`
  - **Impact**: –£–ª—É—á—à–µ–Ω–∞ UX (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç "Betonov√°n√≠" –≤–º–µ—Å—Ç–æ "beton"), –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è SQL –æ—à–∏–±–∫–∞

- **v4.3.4** (2025-11-08) - **FIX: PartHeader state synchronization** üîß
  - ‚úÖ **–†–ï–®–ï–ù–ê**: PartHeader –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–ª–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `editedBeton` –∫–æ–≥–¥–∞ `betonQuantity` –º–µ–Ω—è–ª–æ—Å—å –∏–∑–≤–Ω–µ
  - **–ü—Ä–æ–±–ª–µ–º–∞**: `editedBeton` –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è –æ–¥–∏–Ω —Ä–∞–∑ —á–µ—Ä–µ–∑ `useState`, –Ω–æ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª—Å—è –∫–æ–≥–¥–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏—Ö–æ–¥–∏–ª–æ —á–µ—Ä–µ–∑ props
  - **–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω—ã `useEffect` –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:
    ```typescript
    useEffect(() => {
      setEditedName(itemName || '');
    }, [itemName]);

    useEffect(() => {
      setEditedBeton(betonQuantity.toString());
    }, [betonQuantity]);
    ```
  - **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ - –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü–µ ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ PartHeader ‚úì
  - **Files modified**: `frontend/src/components/PartHeader.tsx`
  - **Impact**: –†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —Å —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π –∑–Ω–∞—á–µ–Ω–∏–π "Podtyp beton" ‚Üî "Objem betonu celkem"

- **v4.3.3** (2025-11-08) - **Session Complete: All Issues Fixed + Documentation** ‚úÖ‚úÖ‚úÖ
  - ‚úÖ **–†–ï–®–ï–ù–ê**: Backend 500 –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–æ–∑–∏—Ü–∏–π
    - –ü—Ä–æ–±–ª–µ–º–∞: SQL statement —Å—Ç—Ä–æ–∏–ª—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è updates[0], –Ω–æ –∫–∞–∂–¥—ã–π update –∏–º–µ–µ—Ç —Ä–∞–∑–Ω—ã–µ –ø–æ–ª—è
    - –†–µ—à–µ–Ω–∏–µ: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è SQL –¥–ª—è –∫–∞–∂–¥–æ–≥–æ update –æ—Ç–¥–µ–ª—å–Ω–æ
  - ‚úÖ **–†–ï–®–ï–ù–ê**: –û–±—ä—ë–º –±–µ—Ç–æ–Ω–∞ –Ω–µ –ø–µ—Ä–µ–Ω–æ—Å–∏–ª—Å—è –∏–∑ PartHeader –≤ —Ç–∞–±–ª–∏—Ü—É
    - –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—è—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –≥–¥–µ –≤–≤–æ–¥–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ
    - –†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ—Å—Ç–∞—è –æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω—è—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ - INPUT –≤ PartHeader, READ-ONLY –≤ —Ç–∞–±–ª–∏—Ü–µ
  - ‚úÖ **–†–ï–®–ï–ù–ê**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥–ª–∏ –≤–≤–æ–¥–∏—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
    - –ü—Ä–æ–±–ª–µ–º–∞: –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞
    - –†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤–ª–µ–Ω min="0" HTML + Math.max() JavaScript –≤–∞–ª–∏–¥–∞—Ü–∏—è
  - üìù **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–∞–∑–¥–µ–ª—ã –£—Å—Ç–∞–Ω–æ–≤–∫–∞, –†–µ–∑—é–º–µ —Å–µ—Å—Å–∏–∏, –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏
  - üìã **–î–µ—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–∏–º–µ—Ä—ã —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, troubleshooting
  - **Files modified**: PartHeader.tsx, PositionsTable.tsx, PositionRow.tsx, usePositions.ts, positions.js, CLAUDE.MD
  - **Result**: Production-ready, –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ, –≥–æ—Ç–æ–≤–æ –∫ deployment

- **v4.3.2** (2025-11-08) - **FINAL: Correct Concrete Volume Architecture** ‚≠ê‚≠ê‚≠ê DEFINITIVE FIX
  - ‚ú® **–†–ï–®–ï–ù–ò–ï**: –ü–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ –æ–±—ä–µ–º–∞ –±–µ—Ç–æ–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ì–î–ï –ù–ê–î–û - –≤ PartHeader, –†–Ø–î–û–ú —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º!
  - üéØ **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ v4.3.2 (–ü–†–ê–í–ò–õ–¨–ù–ê–Ø)**:
    ```
    PartHeader:
      - "N√°zev ƒç√°sti konstrukce": [—Ç–µ–∫—Å—Ç] ‚Üê –ù–∞–∑–≤–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞
      - "Objem betonu celkem": [255] m¬≥ ‚Üê üü† –ì–õ–ê–í–ù–û–ï –ü–û–õ–ï! EDITABLE!
           ‚Üì –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è ‚Üì
    Table beton row:
      - "Mno≈æstv√≠": 255 m¬≥ ‚Üê —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ PartHeader

    –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:
    - –ú–µ–Ω—è–µ—à—å –≤ PartHeader ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ ‚úì
    - –ú–µ–Ω—è–µ—à—å –≤ —Ç–∞–±–ª–∏—Ü–µ ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ PartHeader ‚úì
    ```
  - üìä **–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö**: PartHeader [255] ‚Üî PositionRow (beton) ‚Üî –§–æ—Ä–º—É–ª—ã
  - ‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —á–µ—Ä–µ–∑ React Query
  - **–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç**:
    - üü† –í–≤–æ–¥ –æ–±—ä–µ–º–∞: –¢–û–õ–¨–ö–û –≤ PartHeader (—É–¥–æ–±–Ω–æ, –≤–∏–¥–Ω–æ —Å—Ä–∞–∑—É)
    - üìã –¢–∞–±–ª–∏—Ü–∞: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ + –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–ª–∏–ª–∏, –∑–ø, —á–∞—Å—ã, –¥–Ω–∏)
    - üìê –§–æ—Ä–º—É–ª—ã: –∏—Å–ø–æ–ª—å–∑—É—é—Ç qty –∏–∑ beton = concrete_m3 (–≤—Å–µ —Ä–∞—Å—á–µ—Ç—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã!)
  - **Files changed**: PartHeader.tsx (restored volume input), PositionsTable.tsx (restored sync function)
  - **Result**: –õ–æ–≥–∏—á–Ω–∞—è, –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ - –æ–±—ä–µ–º –≤–≤–æ–¥–∏—à—å —Ä—è–¥–æ–º —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º!

- **v4.3.1** (2025-11-08) - **BROKEN: Incomplete Refactor**
  - ‚ùå –û—à–∏–±–∫–∞: –ü—ã—Ç–∞–ª—Å—è —É–±—Ä–∞—Ç—å input –∏–∑ PartHeader
  - ‚ùå –†–µ–∑—É–ª—å—Ç–∞—Ç: –§–æ—Ä–º—É–ª—ã –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏, –Ω–µ—Ç —É–¥–æ–±–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –≤–≤–æ–¥–∞
  - ‚úì –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ v4.3.2

- **v4.3** (2025-11-08) - **MAJOR UI/UX Improvements** (BROKEN - Fixed in v4.3.2):

  ### Part A: Concrete Volume Input Refactor (‚ùå BROKEN - Fixed in v4.3.1)
  - ‚ùå BROKEN: Attempted to move input to PartHeader
  - ‚úì FIXED in v4.3.1: Input moved to correct location - table beton row

  ### Part B: Collapsible Sidebar with Smart Features (‚úÖ WORKING)
  - ‚ú® **localStorage persistence**: Sidebar state remembered between sessions
  - ‚å®Ô∏è **Keyboard shortcut**: `Ctrl+B` (Windows/Linux) / `Cmd+B` (Mac) to toggle
  - üì± **Smart defaults**: Auto-collapsed on screens < 1280px
  - üèóÔ∏è **Collapsed state indicator**: Icon + badge showing bridge count
  - üí° **Improved tooltips**: Show keyboard hints and bridge count
  - üìè **Table expansion**: Gains +180-200px width when sidebar collapsed (less horizontal scrolling)
  - üé® **Smooth transitions**: Already implemented in previous versions
  - üéØ **UX improvement**: Users control their workspace layout (modern pattern from VS Code, Gmail, Notion)
  - üìÇ **Files modified**:
    - `App.tsx`: localStorage, keyboard shortcuts, smart defaults
    - `Sidebar.tsx`: collapsed indicator with badge
    - `components.css`: collapsed-indicator styles

- **v4.2** (2025-11-08) - Hierarchical Table Structure (CRITICAL FIX):
  - üèóÔ∏è **MAJOR REFACTOR**: Fixed "N√°zev polo≈æky" duplication problem
  - ‚ú® **Created PartHeader component**: Shows construction part name ONCE instead of in every row
  - üóëÔ∏è **Removed "N√°zev polo≈æky" column from table**: Eliminated redundant name inputs
  - üìä **New hierarchical structure**:
    ```
    ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
    ‚ïë N√ÅZEV: [Editable Input - one time]  ‚ïë ‚Üê PartHeader
    ‚ïë MJ: M3 | Mno≈æstv√≠: 43.8 m¬≥          ‚ïë
    ‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
    ‚ïë Podtyp ‚îÇ MJ ‚îÇ Mno≈æstv√≠ ‚îÇ ...        ‚ïë
    ‚ïë‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ         ‚ïë
    ‚ïë beton  ‚îÇ M3 ‚îÇ  43.8    ‚îÇ ...        ‚ïë ‚Üê PositionRow
    ‚ïë bednƒõn√≠‚îÇ m2 ‚îÇ  63.6    ‚îÇ ...        ‚ïë
    ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
    ```
  - üé® **PartHeader styles**: Orange editable input (#FFA726), concrete-params display
  - üìÅ **New component**: `frontend/src/components/PartHeader.tsx` (59 lines)
  - üî¢ **Updated colSpan**: 17 ‚Üí 16 columns after removing name column
  - üóÑÔ∏è **Database**: item_name field now stored at position level, displayed once per part
  - ‚úÖ **Result**: Cleaner UX - users fill name once, not for every subtype (beton/bednƒõn√≠/v√Ωztu≈æ)

- **v4.1** (2025-11-07) - KPI Optimization & Template Update:
  - üé® **Optimized KPI Panel layout** (4 columns √ó 2 rows instead of dynamic grid)
  - üóëÔ∏è **Removed Kƒç/t (œÅ=2.4) metric** as per detailed audit requirements
  - üìè **Reduced KPI card sizes**: padding 12px ‚Üí 8px 10px, fonts: label 11px ‚Üí 10px, value 18px ‚Üí 16px
  - üî¢ **Fixed z-index hierarchy**: KPI panel (z-index: 100), table headers (z-index: 90, top: 140px)
  - ‚ú® **Updated bridge templates**: from 15 ‚Üí 24 positions (11 construction parts from detailed spec)
  - üèóÔ∏è **New templates**: ≈ò√çMSY (B37), P≈òECHODOV√â DESKY, MOSTN√ç NOSN√â KONSTRUKCE, SCHODI≈†≈§, PODKLADN√ç VRSTVY, PATKY
  - üìã **KPI Layout**: Row 1 (Celkov√° cena, Kƒç/m¬≥, Mƒõs√≠ce, T√Ωdny), Row 2 (Averages: lidi, Kƒç/hod, hod/den, Re≈æim pr√°ce)
  - üéØ **Fixed sticky behavior**: KPI stays on top, table headers scroll under KPI

- **v4.0** (2025-11-07) - Comprehensive UI/UX Audit Implementation:
  - ‚úÖ **Czech translation complete**: CreateBridgeForm translated from Russian to Czech
  - üé® **True concrete colors**: #F5F5F5 (primary bg), #E8E8E8 (cards/modals), #D0D0D0 (borders)
  - üìù **Added "N√°zev polo≈æky" column**: first editable column with min-width: 250px, orange background
  - ‚ú® **Pre-filled template positions**: 15 positions with Z√ÅKLADY, ≈ò√çMSY, MOSTN√ç OPƒöRY, PIL√ç≈òE, K≈ò√çDLA, MOSTOVKA, V√ùZTU≈Ω
  - üìå **Sticky header**: table and KPI card always visible while scrolling
  - üü† **Orange inputs (#FFA726)** for all editable fields maintained
  - üåÄ **Concrete gradient**: linear-gradient(170deg, #F5F5F5 80%, #E8E8E8 100%)
  - üîí **Database migration**: added item_name column to positions table
  - üìä **Table always visible**: removed "≈Ω√°dn√© pozice" blocking state from previous sessions

- **1.0.5** (2025-11-07):
  - ‚ú® –î–æ–±–∞–≤–ª–µ–Ω—ã ensure-shared-build.js —Å–∫—Ä–∏–ø—Ç—ã (—Ä–µ—à–µ–Ω–∏–µ –æ—Ç Codex)
  - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ shared –ø–∞–∫–µ—Ç–∞ —á–µ—Ä–µ–∑ prestart/prebuild —Ö—É–∫–∏
  - ‚úÖ –£–ø—Ä–æ—â–µ–Ω—ã buildCommand –≤ render.yaml (npm install ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏–∫–∞)
  - ‚úÖ –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: —Å–æ–±–∏—Ä–∞–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ dist/ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
  - ‚ö†Ô∏è –í–ê–ñ–ù–û: CORS_ORIGIN="*" –∏ VITE_API_URL=sync:false - –ù–ï –∫–æ—Å—Ç—ã–ª–∏!
  - üìù –≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è fromService deadlock –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –¥–µ–ø–ª–æ–µ

- **1.0.4** (2025-11-07):
  - üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤ render.yaml
  - ‚úÖ –£–±—Ä–∞–Ω–∞ fromService –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –º–µ–∂–¥—É backend ‚Üî frontend
  - ‚úÖ CORS_ORIGIN –≤—Ä–µ–º–µ–Ω–Ω–æ = "*" (–ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –º–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å)
  - ‚úÖ VITE_API_URL = sync:false (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è backend)
  - ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å buildCommand: shared build –ü–ï–†–í–´–ú
  - ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: fromService —Å–æ–∑–¥–∞—ë—Ç deadlock –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –¥–µ–ø–ª–æ–µ!
  - üìù –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è: —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å VITE_API_URL –≤ Render dashboard –≤—Ä—É—á–Ω—É—é

- **1.0.3** (2025-11-07):
  - üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ ESM –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è shared –ø–∞–∫–µ—Ç–∞
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ "type": "module" –≤ shared/package.json
  - ‚úÖ TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è: CommonJS ‚Üí ES2020
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã .js —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≤ –∏–º–ø–æ—Ä—Ç—ã (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ ESM)
  - ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã TypeScript –æ—à–∏–±–∫–∏ –≤–æ frontend (unused imports, type assertions)
  - ‚ö†Ô∏è –í–ê–ñ–ù–û: shared –ø–∞–∫–µ—Ç –î–û–õ–ñ–ï–ù —Å–æ–±–∏—Ä–∞—Ç—å—Å—è –ø–µ—Ä–µ–¥ backend/frontend

- **1.0.2** (2025-11-07):
  - üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å–∏—è Node.js –¥–ª—è better-sqlite3
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω .nvmrc ‚Üí Node.js 18.20.4 (–∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ)
  - ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω engines –≤ backend/package.json ‚Üí Node 18.x only
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω NODE_VERSION=18.20.4 –≤ render.yaml
  - ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: better-sqlite3 –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Node.js 25.x!

- **1.0.1** (2025-11-07):
  - üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω render.yaml –¥–ª—è Blueprint deployment
  - ‚úÖ Frontend: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `type: web` —Å `env: static` (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å)
  - ‚úÖ –£–¥–∞–ª—ë–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä 'region' (–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è free tier)
  - ‚ö†Ô∏è –í–ê–ñ–ù–û: Render Blueprint —Ç—Ä–µ–±—É–µ—Ç `type: web` + `env: static`, –ù–ï `type: static`!

- **1.0.0** (2025-11-07):
  - ‚úÖ –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è core-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
  - ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞ CZK/–º¬≥
  - ‚úÖ KROS-–æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ
  - ‚úÖ –†–∞—Å—á—ë—Ç –º–µ—Å—è—Ü–µ–≤/–Ω–µ–¥–µ–ª—å ‚≠ê NEW
  - ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å 30/22 –¥–Ω—è ‚≠ê NEW
  - ‚úÖ –ê–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–µ input-–ø–æ–ª—è
  - ‚úÖ –î–µ–ø–ª–æ–π –Ω–∞ Render
  - ‚úÖ CLAUDE.MD —Å–æ–∑–¥–∞–Ω

---

## üìû –ö–û–ù–¢–ê–ö–¢–´

- **Repository:** https://github.com/alpro1000/Monolit-Planner
- **Issues:** https://github.com/alpro1000/Monolit-Planner/issues
- **Branch:** `claude/monolit-planner-core-011CUtRicaEySo6zsaBmswVi`

---

**üèóÔ∏è Made for bridge builders in Czech Republic**

**‚ö° –í–ê–ñ–ù–û: –ü—Ä–∏ –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî –û–ë–ù–û–í–õ–Ø–ô –≠–¢–û–¢ –§–ê–ô–õ!**

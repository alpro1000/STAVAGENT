<!-- Context Editor Component - Phase 2
     Edit automatically extracted project context -->

<div id="context-editor-container" class="context-editor">
  <div class="editor-header">
    <h2>üîß Editace Kontextu Projektu</h2>
    <p class="subtitle">Upravte automaticky extrahovan√© informace nebo vypl≈àte chybƒõj√≠c√≠ √∫daje</p>
  </div>

  <!-- Basic Information Section -->
  <div class="form-section">
    <h3>üìã Z√°kladn√≠ Informace</h3>

    <div class="form-group">
      <label for="building-type">Typ Stavby *</label>
      <select id="building-type" class="form-control" required>
        <option value="">-- Vyberte typ stavby --</option>
        <option value="bytov√Ω d≈Øm">Bytov√Ω d≈Øm</option>
        <option value="rodinn√Ω d≈Øm">Rodinn√Ω d≈Øm</option>
        <option value="most">Most</option>
        <option value="gar√°≈æ">Gar√°≈æ</option>
        <option value="skladovac√≠ hala">Skladovac√≠ hala</option>
        <option value="pr≈Ømyslov√° hala">Pr≈Ømyslov√° hala</option>
        <option value="kancel√°≈ôn√≠ budova">Kancel√°≈ôn√≠ budova</option>
        <option value="jin√©">Jin√© (pros√≠m popi≈°te)</option>
      </select>
      <div id="building-type-other" class="hidden-field">
        <input type="text" id="building-type-custom" class="form-control" placeholder="Popi≈°te typ stavby">
      </div>
      <p class="field-help">Vyberte nebo napi≈°te typ stavby z technick√©ho zad√°n√≠</p>
    </div>

    <div class="form-group">
      <label for="storeys">Poƒçet Nadzemn√≠ch Podla≈æ√≠ *</label>
      <input type="number" id="storeys" class="form-control" min="1" max="100" placeholder="nap≈ô. 4">
      <p class="field-help">Poƒçet nadzemn√≠ch podla≈æ√≠ (NP) pro budovu</p>
    </div>

    <div class="form-group">
      <label for="basement-levels">Poƒçet Podzemn√≠ch Podla≈æ√≠</label>
      <input type="number" id="basement-levels" class="form-control" min="0" max="5" placeholder="0">
      <p class="field-help">Poƒçet podzemn√≠ch podla≈æ√≠ (PP), pokud existuj√≠</p>
    </div>
  </div>

  <!-- Structural Systems Section -->
  <div class="form-section">
    <h3>üèóÔ∏è Konstrukƒçn√≠ Syst√©my</h3>

    <div class="form-group">
      <label>Hlavn√≠ Konstrukƒçn√≠ Syst√©my *</label>
      <div class="checkbox-group">
        <label class="checkbox-item">
          <input type="checkbox" name="main-system" value="zdivo"> Zdivo
        </label>
        <label class="checkbox-item">
          <input type="checkbox" name="main-system" value="≈æelezobeton"> ≈Ωelezobeton (≈ΩB)
        </label>
        <label class="checkbox-item">
          <input type="checkbox" name="main-system" value="ocel"> Ocelov√° konstrukce
        </label>
        <label class="checkbox-item">
          <input type="checkbox" name="main-system" value="d≈ôevo"> D≈ôevo
        </label>
        <label class="checkbox-item">
          <input type="checkbox" name="main-system" value="jin√©"> Jin√©
        </label>
      </div>
      <p class="field-help">Vyberte alle aplikovateln√© konstrukƒçn√≠ syst√©my</p>
    </div>

    <!-- Conditional fields for concrete -->
    <div id="concrete-fields" class="hidden-section">
      <div class="form-group">
        <label for="foundation-concrete">T≈ô√≠da Betonu (Z√°klady)</label>
        <select id="foundation-concrete" class="form-control">
          <option value="">-- Vyberte t≈ô√≠du --</option>
          <option value="C12/15">C12/15</option>
          <option value="C16/20">C16/20</option>
          <option value="C20/25">C20/25</option>
          <option value="C25/30">C25/30</option>
          <option value="C30/37">C30/37</option>
          <option value="C35/45">C35/45</option>
          <option value="C40/50">C40/50</option>
        </select>
        <p class="field-help">T≈ô√≠da betonu pro z√°kladov√© konstrukce</p>
      </div>
    </div>
  </div>

  <!-- Materials Section -->
  <div class="form-section">
    <h3>üß± Materi√°ly</h3>

    <div class="form-group">
      <label for="wall-material">Materi√°l Stƒõn</label>
      <select id="wall-material" class="form-control">
        <option value="">-- Vyberte materi√°l --</option>
        <option value="Porotherm">Porotherm</option>
        <option value="Ytong">Ytong</option>
        <option value="Cihl√°≈ôstv√≠">Cihl√°≈ôstv√≠</option>
        <option value="Betonov√© bloky">Betonov√© bloky</option>
        <option value="≈Ωelezobeton">≈Ωelezobeton</option>
        <option value="Jin√©">Jin√©</option>
      </select>
    </div>

    <div class="form-group">
      <label for="insulation">Tepeln√° Izolace</label>
      <select id="insulation" class="form-control">
        <option value="">-- Vyberte typ --</option>
        <option value="EPS">EPS (Polystyren)</option>
        <option value="XPS">XPS (Extrudovan√Ω polystyren)</option>
        <option value="Miner√°ln√≠ vlna">Miner√°ln√≠ vlna</option>
        <option value="D≈ôevo">D≈ôevƒõn√© vl√°kno</option>
        <option value="Jin√©">Jin√©</option>
      </select>
    </div>

    <div class="form-group">
      <label for="roofing">St≈ôe≈°n√≠ Krytina</label>
      <select id="roofing" class="form-control">
        <option value="">-- Vyberte typ --</option>
        <option value="Betonov√° ta≈°ka">Betonov√° ta≈°ka</option>
        <option value="Plechov√° st≈ôecha">Plechov√° st≈ôecha</option>
        <option value="Asfaltov√© p√°sy">Asfaltov√© p√°sy</option>
        <option value="≈Ωivice">≈Ωivice</option>
        <option value="Ploch√° st≈ôecha">Ploch√° st≈ôecha (membr√°na)</option>
        <option value="Jin√©">Jin√©</option>
      </select>
    </div>
  </div>

  <!-- Geotechnical Information Section -->
  <div class="form-section">
    <h3>üèîÔ∏è Geotechnick√© Podklady</h3>

    <div class="form-group">
      <label for="soil-class">T≈ô√≠da Zeminy</label>
      <select id="soil-class" class="form-control">
        <option value="">-- Vyberte t≈ô√≠du --</option>
        <option value="I">I - P√≠sek, ≈°tƒõrk bez vody</option>
        <option value="II">II - Hl√≠na s p√≠skem</option>
        <option value="III">III - Hl√≠na, j√≠l</option>
        <option value="IV">IV - Hl√≠na v mas√≠vech</option>
        <option value="V">V - Pevn√© horniny rozvolnƒõl√©</option>
        <option value="VI">VI - Pevn√© horniny</option>
      </select>
      <p class="field-help">Z geologick√©ho pr≈Øzkumu</p>
    </div>

    <div class="form-group">
      <label for="groundwater-level">Hladina Spodn√≠ Vody</label>
      <select id="groundwater-level" class="form-control">
        <option value="">-- Vyberte hloubku --</option>
        <option value="nad_√∫rovn√≠">Nad √∫rovn√≠ budovy</option>
        <option value="0-1m">0-1 m pod z√°kladovou sp√°rou</option>
        <option value="1-3m">1-3 m pod z√°kladovou sp√°rou</option>
        <option value="3-5m">3-5 m pod z√°kladovou sp√°rou</option>
        <option value="5m+">Hloubƒõji ne≈æ 5 m</option>
        <option value="bez_vody">Bez vody v profiles</option>
      </select>
    </div>
  </div>

  <!-- Additional Notes Section -->
  <div class="form-section">
    <h3>üìù Pozn√°mky a Speci√°ln√≠ Po≈æadavky</h3>

    <div class="form-group">
      <label for="special-requirements">Zvl√°≈°tn√≠ Po≈æadavky</label>
      <textarea id="special-requirements" class="form-control textarea" placeholder="Popi≈°te zvl√°≈°tn√≠ po≈æadavky, omezen√≠ nebo specifika projektu..."></textarea>
      <p class="field-help">Nap≈ô. seismick√© zat√≠≈æen√≠, vy≈°≈°√≠ po≈æadavky na hluk, atd.</p>
    </div>

    <div class="form-group">
      <label for="project-notes">Pozn√°mky k Projektu</label>
      <textarea id="project-notes" class="form-control textarea" placeholder="Jak√©koli dal≈°√≠ informace, kter√© mohou b√Ωt relevantn√≠..."></textarea>
    </div>
  </div>

  <!-- Q&A Questions Section -->
  <div id="qa-questions-section" class="form-section" style="display: none;">
    <h3>‚ùì Ot√°zky z Dokumentace</h3>
    <div id="qa-items" class="qa-items">
      <!-- Generated from Q&A Flow -->
    </div>
  </div>

  <!-- Form Actions -->
  <div class="form-actions">
    <button id="save-context-btn" class="btn btn-primary btn-lg">
      <span class="spinner" id="save-spinner" style="display: none;">‚è≥</span>
      Ulo≈æit Kontext
    </button>
    <button id="reset-context-btn" class="btn btn-secondary btn-lg">Obnovit V√Ωchoz√≠</button>
    <button id="preview-context-btn" class="btn btn-secondary btn-lg">N√°hled JSON</button>
  </div>

  <!-- Context Preview Modal -->
  <div id="preview-modal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>N√°hled Kontextu Projektu</h3>
        <button class="close-btn" onclick="closePreviewModal()">‚úï</button>
      </div>
      <div class="modal-body">
        <pre id="context-preview" class="json-preview"></pre>
      </div>
      <div class="modal-footer">
        <button onclick="closePreviewModal()" class="btn btn-secondary">Zav≈ô√≠t</button>
        <button id="copy-json-btn" class="btn btn-primary">Kop√≠rovat JSON</button>
      </div>
    </div>
  </div>
</div>

<style>
.context-editor {
  max-width: 900px;
  margin: 20px auto;
  padding: 20px;
}

.editor-header {
  border-bottom: 2px solid #007bff;
  padding-bottom: 15px;
  margin-bottom: 30px;
}

.editor-header h2 {
  margin: 0 0 5px 0;
  color: #333;
}

.subtitle {
  color: #666;
  margin: 5px 0;
  font-size: 14px;
}

/* Form Sections */
.form-section {
  background: white;
  border: 1px solid #ddd;
  border-radius: 8px;
  padding: 20px;
  margin-bottom: 20px;
}

.form-section h3 {
  border-bottom: 1px solid #eee;
  padding-bottom: 10px;
  margin: 0 0 15px 0;
  color: #333;
}

/* Form Groups */
.form-group {
  margin-bottom: 15px;
}

.form-group:last-child {
  margin-bottom: 0;
}

.form-group label {
  display: block;
  margin-bottom: 5px;
  font-weight: 500;
  color: #333;
}

.form-control {
  width: 100%;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 14px;
  font-family: inherit;
}

.form-control:focus {
  outline: none;
  border-color: #007bff;
  box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
}

.textarea {
  resize: vertical;
  min-height: 100px;
}

/* Checkbox Group */
.checkbox-group {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  gap: 10px;
}

.checkbox-item {
  display: flex;
  align-items: center;
  font-weight: normal;
  cursor: pointer;
}

.checkbox-item input {
  margin-right: 8px;
}

/* Field Help Text */
.field-help {
  font-size: 12px;
  color: #999;
  margin-top: 4px;
  font-style: italic;
}

/* Hidden Fields -->
.hidden-field {
  display: none;
  margin-top: 10px;
}

.hidden-field.show {
  display: block;
}

.hidden-section {
  display: none;
  padding: 15px;
  background: #f0f7ff;
  border-left: 4px solid #007bff;
  border-radius: 4px;
  margin: 15px 0;
}

.hidden-section.show {
  display: block;
}

/* Q&A Items */
.qa-items {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.qa-item {
  padding: 15px;
  background: #f9f9f9;
  border-left: 4px solid #17a2b8;
  border-radius: 4px;
}

.qa-question {
  font-weight: 500;
  color: #333;
  margin-bottom: 10px;
}

.qa-answer {
  padding: 10px;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.qa-confidence {
  font-size: 12px;
  color: #999;
  margin-top: 5px;
}

/* Form Actions */
.form-actions {
  display: flex;
  gap: 10px;
  margin-top: 30px;
  padding-top: 20px;
  border-top: 1px solid #ddd;
}

.btn-lg {
  padding: 12px 24px;
  font-size: 16px;
}

.btn {
  padding: 10px 20px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
  transition: all 0.3s ease;
}

.btn-primary {
  background: #007bff;
  color: white;
}

.btn-primary:hover {
  background: #0056b3;
}

.btn-secondary {
  background: #6c757d;
  color: white;
}

.btn-secondary:hover {
  background: #5a6268;
}

/* Modal */
.modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.modal.show {
  display: flex;
}

.modal-content {
  background: white;
  border-radius: 8px;
  max-width: 600px;
  max-height: 80vh;
  overflow: auto;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  border-bottom: 1px solid #ddd;
}

.modal-header h3 {
  margin: 0;
  color: #333;
}

.close-btn {
  background: none;
  border: none;
  font-size: 24px;
  cursor: pointer;
  color: #999;
}

.modal-body {
  padding: 20px;
}

.json-preview {
  background: #f5f5f5;
  border: 1px solid #ddd;
  border-radius: 4px;
  padding: 15px;
  overflow-x: auto;
  font-size: 12px;
  font-family: 'Courier New', monospace;
  max-height: 400px;
  overflow-y: auto;
}

.modal-footer {
  display: flex;
  gap: 10px;
  padding: 15px 20px;
  border-top: 1px solid #ddd;
  justify-content: flex-end;
}

/* Responsive */
@media (max-width: 768px) {
  .checkbox-group {
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
  }

  .form-actions {
    flex-direction: column;
  }

  .btn {
    width: 100%;
  }
}
</style>

<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>URS Matcher Kiosk</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div id="root" class="app-container">
    <header class="app-header">
      <div class="header-content">
        <h1>ğŸ—ï¸ URS Matcher Kiosk</h1>
        <p class="subtitle">AutomatickÃ© vyhledÃ¡nÃ­ pozic v katalogu ÃšRS</p>
      </div>
    </header>

    <main class="app-main">
      <!-- Main Upload Section -->
      <div id="uploadSection" class="section active">
        <div class="section-content">
          <h2>MoÅ¾nosti zpracovÃ¡nÃ­</h2>

          <div class="action-grid">
            <!-- File Upload -->
            <div class="action-card">
              <div class="action-icon">ğŸ“</div>
              <h3>NahrÃ¡t soubor</h3>
              <p>Excel (.xlsx), ODS (.ods) nebo CSV (.csv)</p>

              <div class="file-upload-area" id="fileDropZone">
                <input type="file" id="fileInput" accept=".xlsx,.xls,.ods,.csv" hidden>
                <span class="upload-text">KliknÄ›te nebo tÃ¡hnÄ›te soubor sem</span>
              </div>

              <textarea id="projectContextInput" placeholder='Kontext projektu (volitelnÃ©, JSON formÃ¡t):&#10;{"building_type":"bytovÃ½ dÅ¯m","storeys":4,"main_system":["Porotherm","Å½B"]}' rows="3"></textarea>

              <div class="action-buttons">
                <button class="btn btn-primary" id="uploadBtn" disabled>
                  NahrÃ¡t a zpracovat
                </button>
                <button class="btn btn-success" id="blockMatchBtn" disabled>
                  ğŸ“Š Analyzovat bloky
                </button>
              </div>
            </div>

            <!-- Text Input -->
            <div class="action-card">
              <div class="action-icon">âœï¸</div>
              <h3>VloÅ¾it text ruÄnÄ›</h3>
              <p>JednÃ¡ poloÅ¾ka, napÅ™Ã­klad: "Beton C25/30 - 25 m3"</p>

              <textarea id="textInput" placeholder="PodkladnÃ­ beton C25/30 tl. 100 mm pod ZD&#10;MnoÅ¾stvÃ­: 25 m3&#10;MJ: m3" rows="4"></textarea>

              <div class="text-input-controls">
                <input type="number" id="quantityInput" placeholder="MnoÅ¾stvÃ­" value="0" min="0" step="0.1">
                <input type="text" id="unitInput" placeholder="MJ (m3, m2, ks...)" value="m3">
              </div>

              <button class="btn btn-primary" id="matchBtn">
                Vyhledat pozice
              </button>
            </div>

            <!-- Document Upload (Phase 2) -->
            <div class="action-card">
              <div class="action-icon">ğŸ“„</div>
              <h3>NahrÃ¡t Dokumenty</h3>
              <p>PDF, XLSX, DWG, JPG a dalÅ¡Ã­</p>

              <button class="btn btn-primary" id="openDocUploadBtn">
                ğŸ“„ NahrÃ¡t Dokumenty
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Document Upload Section (Phase 2) -->
      <div id="docUploadSection" class="section hidden">
        <div id="documentUploadContainer"></div>
      </div>

      <!-- Context Editor Section (Phase 2) -->
      <div id="contextEditorSection" class="section hidden">
        <div id="contextEditorContainer"></div>
      </div>

      <!-- Results Section -->
      <div id="resultsSection" class="section hidden">
        <div class="section-content">
          <div class="results-header">
            <h2 id="resultsTitle">VÃ½sledky hledÃ¡nÃ­</h2>
            <button class="btn btn-secondary" id="backBtn">â† ZpÄ›t</button>
          </div>

          <div id="resultsContainer" class="results-container">
            <div class="loading">NaÄÃ­tÃ¡nÃ­ vÃ½sledkÅ¯...</div>
          </div>

          <div class="results-actions">
            <button class="btn btn-success" id="exportBtn">
              ğŸ“¥ StÃ¡hnout Excel
            </button>
            <button class="btn btn-secondary" id="copyBtn">
              ğŸ“‹ KopÃ­rovat do schrÃ¡nky
            </button>
          </div>
        </div>
      </div>

      <!-- Phase 3 Advanced Results Section -->
      <div id="phase3ResultsSection" class="section hidden">
        <div class="section-content">
          <div class="results-header">
            <h2>ğŸ¤– AnalÃ½za VÃ­cerolÃ­ (Phase 3 Advanced)</h2>
            <button class="btn btn-secondary" id="backFromPhase3Btn">â† ZpÄ›t</button>
          </div>

          <!-- Complexity Classification -->
          <div id="complexitySection" class="info-panel">
            <h3>ğŸ“Š Klasifikace SloÅ¾itosti</h3>
            <div class="complexity-grid">
              <div class="complexity-card">
                <span class="complexity-level" id="complexityLevel"></span>
                <p id="complexityDescription"></p>
              </div>
              <div class="complexity-details">
                <p>ğŸ“ˆ PoÄet Å™Ã¡dkÅ¯: <span id="rowCount"></span></p>
                <p>âœ… Ãšplnost dat: <span id="completenessScore"></span>%</p>
                <p>ğŸ”‘ SpeciÃ¡lnÃ­ klÃ­ÄovÃ¡ slova: <span id="specialKeywords"></span></p>
              </div>
            </div>
          </div>

          <!-- Selected Roles -->
          <div id="rolesSection" class="info-panel">
            <h3>ğŸ‘¥ VybranÃ© Role SpecialistÅ¯</h3>
            <div class="roles-grid" id="rolesGrid">
              <!-- Generated dynamically -->
            </div>
          </div>

          <!-- Conflict Detection -->
          <div id="conflictSection" class="info-panel" style="display: none;">
            <h3>âš ï¸ DetekovanÃ© Konflikty</h3>
            <div id="conflictsList" class="conflicts-list">
              <!-- Generated dynamically -->
            </div>
          </div>

          <!-- Analysis Results -->
          <div id="analysisSection" class="info-panel">
            <h3>ğŸ“‹ VÃ½sledky AnalÃ½zy</h3>
            <div id="analysisResults" class="analysis-results">
              <!-- Generated dynamically -->
            </div>
          </div>

          <!-- Audit Trail -->
          <div id="auditSection" class="info-panel" style="display: none;">
            <h3>ğŸ“ Audit Trail</h3>
            <div id="auditTrail" class="audit-trail">
              <!-- Generated dynamically -->
            </div>
          </div>
        </div>
      </div>

      <!-- Error Section -->
      <div id="errorSection" class="section hidden">
        <div class="section-content error-content">
          <h2>âŒ Chyba</h2>
          <p id="errorMessage"></p>
          <button class="btn btn-secondary" id="errorBackBtn">
            â† ZpÄ›t na Ãºvod
          </button>
        </div>
      </div>
    </main>

    <footer class="app-footer">
      <p>URS Matcher Service v1.0 | <a href="/health">Stav systÃ©mu</a></p>
    </footer>
  </div>

  <script src="/app.js"></script>
</body>
</html>
